<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YE VAULT</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* Palette */
            --bg-dark: #09090b;
            --bg-card: #18181b;
            --bg-glass: rgba(24, 24, 27, 0.85);

            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;

            --brand-primary: #8b5cf6;
            --brand-glow: #a78bfa;

            --border-subtle: rgba(255, 255, 255, 0.08);
            --glass-blur: blur(20px);

            --font-display: 'Outfit', sans-serif;
            --font-body: 'Plus Jakarta Sans', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            outline: none;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.7;
            overflow: hidden;
            height: 100vh;
        }

        /* --- Animations --- */
        .bg-blobs {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .blob {
            position: absolute;
            width: 60vw;
            height: 60vw;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
            animation: float 20s infinite ease-in-out;
        }

        .blob-1 {
            background: var(--brand-primary);
            top: -20%;
            left: -20%;
        }

        .blob-2 {
            background: #06b6d4;
            bottom: -20%;
            right: -20%;
            animation-delay: -5s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(30px, -50px) scale(1.1);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        @keyframes blink-glow {
            0%, 100% { opacity: 1; text-shadow: 0 0 10px var(--brand-primary); }
            50% { opacity: 0.7; text-shadow: 0 0 20px var(--brand-glow); color: #fff; }
        }

        /* --- KRATOS / GOD OF WAR FX --- */
        @keyframes shake {
            0%, 100% { transform: translate(0, 0); }
            10%, 30%, 50%, 70%, 90% { transform: translate(-10px, -10px); }
            20%, 40%, 60%, 80% { transform: translate(10px, 10px); }
        }

        @keyframes thunder-flash {
            0% { background-color: var(--bg-dark); }
            10% { background-color: #fff; }
            15% { background-color: #450a0a; } /* Blood Red Dark */
            20% { background-color: #fff; }
            40% { background-color: #270404; } /* Deep Red */
            100% { background-color: #000; }
        }

        @keyframes text-burn {
            0% { letter-spacing: 0px; color: var(--text-secondary); }
            100% { letter-spacing: 5px; color: #ef4444; text-shadow: 0 0 20px #b91c1c, 0 0 40px #7f1d1d; }
        }

        .shake-element {
            animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;
        }

        .kratos-mode {
            animation: thunder-flash 0.8s forwards !important;
        }

        .kratos-mode .entry-question {
            animation: text-burn 0.5s forwards !important;
            font-family: 'Times New Roman', serif; /* Classic Mythic Look */
            font-weight: 900;
            text-transform: uppercase;
        }

        .kratos-mode .name-input {
            border-color: #ef4444 !important;
            color: #ef4444 !important;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.3);
        }

        .kratos-mode .entry-btn {
            background: #7f1d1d !important;
            border-color: #ef4444 !important;
            box-shadow: 0 0 30px #ef4444 !important;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* --- ADVANCED STORM FX (CANVAS) --- */
        #kratos-storm {
            position: absolute;
            inset: 0;
            z-index: -1; 
            background: #000;
            display: none;
            overflow: hidden;
        }
        
        #storm-canvas {
            display: block; 
            width: 100%; 
            height: 100%;
        }

        /* --- Layout --- */
        .app-layout {
            display: flex;
            height: 100vh;
            max-width: 1920px;
            margin: 0 auto;
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
            transition: opacity 1s, transform 1s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .app-layout.visible {
            opacity: 1;
            pointer-events: all;
            transform: none;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-glass);
            -webkit-backdrop-filter: var(--glass-blur);
            backdrop-filter: var(--glass-blur);
            display: flex;
            flex-direction: column;
            padding: 2rem;
            z-index: 50;
        }

        /* --- AMBIENCE & PANIC CSS --- */
        .ambience-controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .panic-btn {
            background: linear-gradient(135deg, #ef4444, #b91c1c);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
            animation: pulse-red 2s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .panic-btn:hover {
            transform: scale(1.05);
        }

        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        .cram-overlay {
            position: fixed;
            inset: 0;
            background: rgba(9, 9, 11, 0.95);
            z-index: 3000;
            /* High Z-Index */
            display: none;
            padding: 2rem;
            overflow-y: auto;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .cram-paper {
            background: #fff;
            color: #000;
            max-width: 800px;
            margin: 0 auto;
            padding: 3rem;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            font-family: 'Times New Roman', serif;
        }

        .cram-term {
            display: block;
            margin-bottom: 0.5rem;
            border-bottom: 1px dotted #ccc;
            padding-bottom: 0.2rem;
        }

        .cram-term strong {
            color: #d32f2f;
        }

        .main-viewport {
            flex: 1;
            padding: 2rem 3rem;
            overflow-y: auto;
            position: relative;
            scroll-behavior: smooth;
        }

        /* --- ENTRY PORTAL (The "Name Drop") --- */
        #entry-portal {
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: opacity 1s, transform 1s;
        }

        .entry-container {
            text-align: center;
        }

        .entry-question {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeIn 1s 0.5s forwards;
        }

        .name-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--brand-primary);
            font-family: var(--font-display);
            font-size: 4rem;
            color: white;
            text-align: center;
            width: 100%;
            max-width: 600px;
            padding: 0.5rem;
            outline: none;
            margin-bottom: 2rem;
            opacity: 0;
            animation: fadeInUp 1s 1s forwards;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, 0.1);
        }

        .entry-btn {
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border: 1px solid var(--border-subtle);
            padding: 1rem 3rem;
            border-radius: 2rem;
            cursor: pointer;
            transition: 0.3s;
            opacity: 0;
            animation: fadeIn 1s 2s forwards;
        }

        .entry-btn:hover {
            background: var(--brand-primary);
            transform: scale(1.1);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        /* FAB TOGGLE - Hidden by default on Desktop */
        .nav-toggle-btn {
            display: none;
        }

        /* --- Components --- */
        .brand-logo {
            font-family: var(--font-display);
            font-size: 3rem;
            font-weight: 800;
            letter-spacing: -2px;
            margin-bottom: 3rem;
            color: white;
        }

        .brand-logo span {
            color: var(--brand-primary);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.25rem;
            border-radius: 1rem;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            margin-bottom: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .nav-item:hover {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.03), transparent);
            color: var(--text-primary);
            transform: scale(1.02) translateX(4px);
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(139, 92, 246, 0.15), transparent);
            color: var(--brand-primary);
            font-weight: 600;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.1);
            border-left: 3px solid var(--brand-primary);
        }

        .section-view {
            display: none;
        }

        .section-view.active {
            display: block;
            animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes fadeSlideUp {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 1.5rem;
            padding: 2rem;
            transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            cursor: pointer;
            height: 100%;
        }

        .card:hover {
            transform: translateY(-4px) scale(1.01);
            border-color: rgba(139, 92, 246, 0.4);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .timer-widget {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1));
            border: 1px solid var(--border-subtle);
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }

        .timer-display {
            font-family: var(--font-display);
            font-size: 5rem;
            font-weight: 800;
            line-height: 1;
            margin: 1rem 0;
            font-variant-numeric: tabular-nums;
        }

        .session-badge {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.8rem;
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
        }

        .btn {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-subtle);
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-primary {
            background: var(--brand-primary);
            border: none;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:hover {
            background: #7c3aed;
        }

        .tag {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
            margin-bottom: 0.5rem;
        }

        .tag.purple {
            background: rgba(139, 92, 246, 0.15);
            color: #a78bfa;
        }

        .tag.cyan {
            background: #06b6d426;
            color: #22d3ee;
        }

        /* Note Detail Pro */
        .detail-view {
            background: var(--bg-card);
            border-radius: 1.5rem;
            padding: 3rem;
            border: 1px solid var(--border-subtle);
            display: none;
            max-width: 900px;
            margin: 0 auto;
        }

        .detail-content h3 {
            font-family: var(--font-display);
            color: var(--brand-primary);
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
            padding-bottom: 0.5rem;
        }

        .detail-content h4 {
            color: white;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }

        .detail-content p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
            font-size: 1.05rem;
        }

        .detail-content ul,
        .detail-content ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
            color: var(--text-secondary);
        }

        .detail-content li {
            margin-bottom: 0.5rem;
        }

        .mnemonic-box {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 1rem 1rem 0;
            font-size: 1.1rem;
        }

        .tip-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 1rem 1rem 0;
            font-size: 1.1rem;
        }

        /* Simple Flashcard CSS (preserved) */
        .flashcard-stage {
            perspective: 1200px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .flashcard {
            width: 100%;
            max-width: 600px;
            height: 320px;
            position: relative;
            transform-style: preserve-3d;
            transition: 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .face.back {
            transform: rotateY(180deg);
            background: radial-gradient(circle at top, rgba(6, 182, 212, 0.1), transparent), var(--bg-card);
            border-color: #06b6d4;
        }

        /* Quiz CSS (preserved) */
        .quiz-opt {
            width: 100%;
            padding: 1.25rem;
            margin-top: 0.75rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 0.75rem;
            color: var(--text-secondary);
            text-align: left;
            cursor: pointer;
            transition: 0.2s;
            font-size: 1rem;
        }

        .quiz-opt:hover {
            background: rgba(255, 255, 255, 0.06);
            padding-left: 1.5rem;
        }

        .quiz-opt.correct {
            border-color: #10b981;
            color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .quiz-opt.wrong {
            border-color: #f43f5e;
            color: #f43f5e;
            background: rgba(244, 63, 94, 0.1);
        }


        /* --- MOBILE RESPONSIVENESS --- */
        /* --- RESPONSIVE SIDEBAR (MOBILE) --- */
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            -webkit-backdrop-filter: blur(2px);
            backdrop-filter: blur(2px);
            z-index: 1050;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .sidebar-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* --- MOBILE RESPONSIVENESS --- */
        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                height: auto;
            }

            .bg-blobs {
                position: fixed;
            }

            .app-layout {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
                width: 100%;
                overflow: visible !important;
            }

            /* SIDEBAR TRANSFORMATION */
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                width: 280px;
                transform: translateX(-100%);
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: 20px 0 50px rgba(0, 0, 0, 0.5);
                display: flex !important;
                z-index: 1100;
                /* Ensure it's above the overlay (1050) */
                /* Force display for slide-out */
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-viewport {
                padding: 1.5rem;
                /* Balanced padding */
                overflow: visible;
                height: auto;
                flex: none;
                width: 100%;
            }

            /* FAB TOGGLE - Adjust position */
            .nav-toggle-btn {
                display: flex;
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                width: 3.5rem;
                height: 3.5rem;
                background: linear-gradient(135deg, var(--brand-primary), var(--brand-glow));
                border-radius: 50%;
                border: none;
                color: white;
                font-size: 1.5rem;
                align-items: center;
                justify-content: center;
                box-shadow: 0 4px 20px rgba(139, 92, 246, 0.5);
                z-index: 1200;
                transition: 0.2s;
            }

            .nav-toggle-btn:active {
                transform: scale(0.95);
            }

            /* ALIGNMENT FIXES */
            #dashboard h1 {
                font-size: 2.2rem !important;
                line-height: 1.1;
                margin-bottom: 0.5rem;
            }

            /* Timer Widget Mobile */
            .timer-widget {
                padding: 2rem 1.5rem;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .timer-display {
                font-size: 4rem;
                margin: 1rem 0;
            }

            .timer-widget div[style*="justify-content:center"] {
                flex-direction: column;
                width: 100%;
                gap: 0.8rem;
            }

            .timer-widget .btn {
                width: 100%;
            }

            .session-badge {
                position: static;
                margin-top: 1rem;
                background: rgba(16, 185, 129, 0.15);
            }

            /* Card Grid Fix */
            div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
            }

            /* Hide Entry Portal Inputs on small screens if keyboard opens */
            .name-input:focus {
                font-size: 2rem;
            }

            /* Table Cards */
            table,
            thead,
            tbody,
            th,
            td,
            tr {
                display: block;
                width: 100%;
            }

            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }

            tr {
                margin-bottom: 1.5rem;
                background: var(--bg-card) !important;
                border: 1px solid var(--border-subtle);
                border-radius: 1rem;
                padding: 1rem;
            }

            td {
                border: none;
                padding: 0.5rem 0 0.5rem 0 !important;
                position: relative;
                padding-left: 40% !important;
                text-align: right;
                display: flex;
                align-items: center;
                justify-content: flex-end;
                min-height: 2.5rem;
            }

            td:before {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                left: 0;
                width: 35%;
                padding-right: 10px;
                white-space: nowrap;
                content: attr(data-label);
                font-weight: 700;
                color: var(--text-muted);
                text-transform: uppercase;
                font-size: 0.75rem;
                text-align: left;
            }

            td:first-child {
                border-bottom: 1px solid var(--border-subtle);
                margin-bottom: 0.5rem;
                padding-bottom: 0.5rem !important;
                padding-left: 0 !important;
                text-align: left;
                justify-content: flex-start;
            }

            td:first-child:before {
                content: none;
            }

            /* Detail Views */
            .detail-view {
                padding: 1.5rem;
            }

            /* Hide Live Clock on Mobile to save space */
            #live-clock {
                display: none;
            }




            td:first-child:before {
                display: none;
            }

            .mobile-nav {
                display: none !important;
            }

            #dashboard h1 br {
                display: none;
            }
        }

        .mobile-nav {
            display: none;
        }

        /* Hidden on desktop */

        /* FOA SPECIFIC STYLES TO MATCH MARKETING UI */
        .foa-content h2 { font-family: var(--font-display); color: var(--brand-secondary); margin-top: 2rem; margin-bottom: 1rem; font-size: 1.8rem; }
        .foa-content h3 { color: var(--brand-primary); margin-top: 1.5rem; margin-bottom: 0.75rem; font-size: 1.3rem; }
        .foa-content p, .foa-content li { color: var(--text-secondary); line-height: 1.7; font-size: 1.05rem; }
        .foa-content strong { color: var(--text-primary); font-weight: 600; }
        .foa-content ul { padding-left: 1.5rem; margin-bottom: 1.5rem; }
        .foa-content li { margin-bottom: 0.5rem; }
        
        /* Specialized Cards */
        .foa-card { 
            background: rgba(255, 255, 255, 0.03); 
            border: 1px solid var(--border-subtle); 
            border-radius: 1rem; 
            padding: 2rem; 
            margin-bottom: 2rem; 
            transition: transform 0.2s;
        }
        .foa-card:hover { border-color: var(--brand-secondary); transform: translateY(-2px); }

        /* Feature Boxes */
        .formula { 
            background: rgba(6, 182, 212, 0.05); 
            border-left: 4px solid var(--brand-primary); 
            padding: 1.5rem; 
            margin: 1.5rem 0; 
            font-family: 'Courier New', monospace; 
            color: var(--brand-glow);
            border-radius: 0 8px 8px 0;
        }
        .key-point { 
            background: rgba(244, 63, 94, 0.05); 
            border-left: 4px solid #f43f5e; 
            padding: 1.5rem; 
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }
        .example { 
            background: rgba(16, 185, 129, 0.05); 
            border-left: 4px solid #10b981; 
            padding: 1.5rem; 
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        /* Practice Questions */
        .practice-question { 
            background: rgba(0, 0, 0, 0.2); 
            padding: 1.5rem; 
            border-radius: 1rem; 
            margin-top: 2rem; 
            border: 1px solid var(--border-subtle); 
        }
        .q-number { 
            font-weight: 800; 
            color: var(--brand-secondary); 
            text-transform: uppercase; 
            font-size: 0.9rem; 
            margin-bottom: 0.75rem; 
            letter-spacing: 1px;
        }
        .q-text { 
            margin-bottom: 1.25rem; 
            font-size: 1.1rem;
            color: var(--text-primary); 
        }
        
        .answer-btn { 
            background: var(--brand-primary); 
            color: #000; 
            font-weight: 700;
            border: none; 
            padding: 0.6rem 1.2rem; 
            border-radius: 2rem; 
            cursor: pointer; 
            font-size: 0.9rem; 
            transition: all 0.2s; 
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .answer-btn:hover { 
            background: var(--brand-glow); 
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
        }
        
        .answer { 
            display: none; 
            margin-top: 1.25rem; 
            padding-top: 1.25rem; 
            border-top: 1px solid rgba(255,255,255,0.1); 
            color: #10b981; 
            font-weight: 500;
        }
        .answer.show { 
            display: block; 
            animation: fadeIn 0.4s ease;
        }

        /* --- TABS & ANIMATIONS --- */
        .tab-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 0.5rem;
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-subtle);
            max-width: 500px;
        }

        .tab-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            font-family: var(--font-body);
            font-size: 1rem;
        }

        .tab-btn.active {
            background: var(--brand-primary);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
        }

        .tab-content.active {
            display: block;
            animation: fadeSlideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }


        /* --- GLOBAL TRANSITIONS --- */
        body {
            transition: background-color 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), color 0.8s ease;
        }

        /* --- PAKISTAN STUDIES THEME (Dark Premium Rose Glass) --- */
        body.pak-mode {
            /* Dark Burgundy/Rose Background */
            --bg-dark: #1a050b; 
            --bg-card: rgba(80, 7, 36, 0.3); /* Dark Red Glass */
            --bg-glass: rgba(40, 4, 15, 0.8); /* Dark Sidebar */
            
            --text-primary: #fff1f2; /* Rose 50 */
            --text-secondary: #fda4af; /* Rose 300 */
            --text-muted: #f43f5e; /* Rose 500 */
            
            --brand-primary: #e11d48; /* Rose 600 */
            --brand-glow: #fb7185; /* Rose 400 */
            --border-subtle: rgba(225, 29, 72, 0.2); 
        }

        /* Soft Animated Blobs for Pak Mode */
        body.pak-mode .blob-1 { background: #be123c; opacity: 0.25; filter: blur(120px); }
        body.pak-mode .blob-2 { background: #9f1239; opacity: 0.25; filter: blur(120px); }

        /* Remove "Weird White Line" (Border) from Sidebar in Pak Mode */
        body.pak-mode .sidebar {
            border-right: 1px solid rgba(225, 29, 72, 0.1) !important; /* Subtle Rose Border */
            box-shadow: 5px 0 30px rgba(0,0,0,0.2);
        }

        /* React-like Card UI for Pak Mode (Dark Glass) */
        body.pak-mode .card {
            background: linear-gradient(145deg, rgba(80, 7, 36, 0.4), rgba(40, 4, 15, 0.6)) !important;
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.08) !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
            border-radius: 1rem !important;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.4s ease, border-color 0.4s ease !important;
        }

        body.pak-mode .card:hover {
            transform: translateY(-5px) scale(1.01) !important;
            box-shadow: 0 20px 40px rgba(225, 29, 72, 0.15) !important;
            border-color: var(--brand-primary) !important;
        }

        body.pak-mode .tab-container {
            background: rgba(0, 0, 0, 0.3) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
        }

        body.pak-mode .tab-btn {
            color: #fda4af !important;
        }
        
        body.pak-mode .tab-btn.active {
            background: linear-gradient(135deg, #e11d48, #be123c) !important;
            color: white !important;
            box-shadow: 0 0 20px rgba(225, 29, 72, 0.5) !important;
        }

        body.pak-mode .nav-item { color: #fda4af; transition: all 0.3s ease; }
        body.pak-mode .nav-item:hover { 
            background: rgba(225, 29, 72, 0.1); 
            color: #fff; 
            padding-left: 1.5rem; /* Animated Slide */
        }
        body.pak-mode .nav-item.active { 
            background: linear-gradient(90deg, rgba(225, 29, 72, 0.1), transparent) !important; 
            color: #e11d48 !important; 
            border-left-color: #e11d48 !important;
        }

        /* Typography */
        body.pak-mode h1, body.pak-mode h2, body.pak-mode h3 {
            letter-spacing: 0.5px;
            text-shadow: 0 0 30px rgba(225, 29, 72, 0.2);
        }
        
        body.pak-mode .tag {
            background: rgba(225, 29, 72, 0.15) !important;
            color: #fb7185 !important;
            border: 1px solid rgba(225, 29, 72, 0.3) !important;
        }

        /* Custom Scrollbar for Pak Mode */
        body.pak-mode ::-webkit-scrollbar {
            width: 12px;
        }

        body.pak-mode ::-webkit-scrollbar-track {
            background: #0f0505; 
            border-left: 1px solid rgba(255, 255, 255, 0.05);
        }

        body.pak-mode ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #e11d48, #881337);
            border-radius: 6px;
            border: 2px solid #0f0505; /* Creates padding effect */
            box-shadow: inset 0 0 10px rgba(255, 200, 200, 0.3);
        }


        body.pak-mode ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #f43f5e, #be123c);
            box-shadow: 0 0 15px rgba(225, 29, 72, 0.8);
        }

        /* --- PAKISTAN STUDIES ANIMATIONS --- */
        @keyframes cascadeUp {
            from { opacity: 0; transform: translateY(40px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .pak-card-enter {
            animation: cascadeUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            opacity: 0; /* Ensures it starts invisible */
        }
        
        /* 3D Tilt Effect Classes */
        .pak-3d-active {
            transition: transform 0.1s ease-out, box-shadow 0.2s ease !important;
            z-index: 10;
        }

        /* Shimmer for Quotes */
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        body.pak-mode .tip-box {
            background: linear-gradient(45deg, rgba(225, 29, 72, 0.1) 25%, rgba(225, 29, 72, 0.2) 50%, rgba(225, 29, 72, 0.1) 75%);
            background-size: 200% 100%;
            animation: shimmer 6s infinite linear;
            border-left-color: #fb7185 !important; /* Rose border */
            color: #fff1f2;
        }

        /* --- 1. VAULT DECODER --- */
        .scramble-text {
            font-family: 'Courier New', monospace; /* Tech feel */
            display: inline-block;
        }

        /* --- 2. SCROLL OF TIME --- */
        .pak-timeline-container {
            position: absolute;
            left: 20px;
            top: 100px;
            bottom: 100px;
            width: 4px;
            background: rgba(225, 29, 72, 0.2);
            border-radius: 2px;
            z-index: 50;
            display: none; /* Hidden by default, shown in Grid */
        }
        .pak-timeline-progress {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: #fb7185;
            box-shadow: 0 0 10px #fb7185;
            transition: height 0.1s ease-out;
        }
        .timeline-year {
            position: absolute;
            left: 15px;
            transform: translateY(-50%);
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            transition: all 0.3s;
            cursor: pointer;
        }
        .timeline-year.active {
            color: #fb7185;
            font-size: 1.1rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(225, 29, 72, 0.5);
        }

        /* --- 3. PARALLAX MONUMENTS --- */
        .pak-skyline {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background-repeat: repeat-x;
            background-position: bottom left;
            opacity: 0.15;
            z-index: 0; /* Behind content */
            pointer-events: none;
            /* Simple CSS Gradient/Shape Skyline fallback if SVG fails */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300" preserveAspectRatio="none"><path d="M50,300 L50,150 L60,140 L40,140 L50,150 M150,300 L150,100 L180,300 M250,300 L250,200 L300,150 L350,200 L350,300 M450,300 L500,50 L550,300 M650,300 C650,200 750,200 750,300" fill="%23be123c"/></svg>'); 
        }

        /* --- 4. PARTITION MAP --- */
        .pak-map-widget {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 120px;
            height: 100px;
            opacity: 0.8;
            transition: all 0.3s;
            z-index: 60;
            /* Placeholder styling until JS injects SVG */
            border: 1px solid rgba(225, 29, 72, 0.3);
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            overflow: hidden;
            cursor: pointer;
        }
        .pak-map-widget:hover {
            transform: scale(1.1);
            border-color: #fb7185;
            box-shadow: 0 0 20px rgba(225, 29, 72, 0.4);
        }

    </style>
</head>

<body>

    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <!-- SOUND -->
    <audio id="timerSound"
        src="data:audio/mp3;base64,SUQzBAAAAAABAFRYWFgAAAASAAADbWFqb3JfYnJhbmQAZGFzaABUWFhYAAAAEQAAA21pbm9yX3ZlcnNpb24AMABUWFhYAAAAHAAAA2NvbXBhdGlibGVfYnJhbmRzAGlzbzZtcDQxAFRTU0UAAAAPAAADTGF2ZjU5LjI3LjEwMAAAAAAAAAAAAAAA//uQZAAAAAAAALAAAADXAAAASAAAAAABAAiQAAJAJAAAlAz//uQZAAAAAAAALAAAADXAAAASAAAAAABAAiQAAJAJAAAlAz//uQZAAAAAAAALAAAADXAAAASAAAAAABAAiQAAJAJAAAlAz//uQZAAAAAAAALAAAADXAAAASAAAAAABAAiQAAJAJAAAlA=="></audio>

    <!-- ENTRY PORTAL (The Minimalist Name Drop) -->
    <div id="entry-portal">
        <!-- New Storm Container -->
        <div id="kratos-storm">
             <canvas id="storm-canvas"></canvas>
        </div>

        <div class="entry-container">
            <h1 id="kratos-title" class="entry-question">YE VAULT ACCESS</h1>
            <input type="password" id="name-input" class="name-input" placeholder="Enter Access Key" autocomplete="off">
            <button class="entry-btn" onclick="enterApp()">Let's Go</button>
        </div>
    </div>


    <!-- SIDEBAR OVERLAY -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileNav()"></div>

    <!-- APP LAYOUT -->
    <div class="app-layout" id="app">
        <aside class="sidebar" id="mainSidebar">
            <div class="brand-logo">YE <span>VAULT</span></div>
            <div class="nav-item active" onclick="nav('dashboard', this)">All roads lead to Rome</div>
            <div class="nav-item" onclick="nav('it-business', this)">IT in Business</div>
            <div class="nav-item" onclick="nav('business-maths', this)">Business Maths</div>
            <div class="nav-item" onclick="nav('pakistan-studies', this)">Pakistan studies - BDS</div>
            <div class="nav-item" onclick="nav('pharma', this)">PHARMA</div>
            <div class="nav-item" onclick="window.open('https://examseatingplan-five.vercel.app/', '_blank')">Exam Seating Plan</div>



            <div style="margin-top:auto">
                <div
                    style="padding: 0 1rem 1rem 1rem; color: var(--text-muted); font-size: 0.75rem; border-bottom: 1px solid var(--border-subtle); margin-bottom: 1rem;">
                    Created by <span style="color: var(--brand-glow);">Asharib</span>
                </div>
                <div class="nav-item" onclick="window.close()">Exit</div>
            </div>
        </aside>

        <!-- MOBILE SIDEBAR TOGGLE FAB -->
        <button class="nav-toggle-btn" onclick="toggleMobileNav()">
            <span class="mobile-nav-icon">☰</span>
        </button>

        <main class="main-viewport">

            <!-- DASHBOARD -->
            <section id="dashboard" class="section-view active" style="position:relative;">
                <div style="display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:2rem;">
                    <h1 style="font-family:var(--font-display); font-size:3rem; line-height:1.1;">Run the world,
                        <br><span id="user-display" style="color:var(--brand-primary);">Future CEO</span>.
                    </h1>
                    <div id="live-clock"></div>
                </div>

                <div class="timer-widget">
                    <p
                        style="text-transform:uppercase; letter-spacing:2px; color:var(--brand-primary); font-weight:700;">
                        Deep Work Zone</p>
                    <div class="session-badge">Sessions Today: <span id="session-count">0</span></div>
                    <div class="timer-display" id="timer">25:00</div>
                    <div style="display:flex; justify-content:center; gap:1rem; align-items:center;">
                        <button class="btn btn-primary" onclick="toggleTimer()" id="timerBtn">Start Focus</button>
                        <button class="btn" onclick="resetTimer()">Reset</button>
                        <button class="btn" style="padding:0.8rem;" onclick="toggleSound()" id="soundBtn">Sound:
                            On</button>
                    </div>
                </div>

                <div class="card"
                    style="margin-top:2rem; background:linear-gradient(145deg, rgba(24, 24, 27, 0.9), rgba(20, 20, 22, 0.95)); border:1px solid rgba(255,255,255,0.05);">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h2 style="font-family:var(--font-display); font-size:1.5rem;">Exam Schedule</h2>
                        <span class="tag cyan" style="font-size:0.8rem; padding:0.4rem 1rem;">Finals 2025</span>
                    </div>
                    <div style="overflow-x:auto;">
                        <table
                            style="width:100%; border-collapse:separate; border-spacing:0 1rem; color:var(--text-secondary); min-width:600px;">
                            <thead>
                                <tr
                                    style="text-align:left; color:var(--text-muted); font-size:0.9rem; text-transform:uppercase; letter-spacing:1px;">
                                    <th style="padding:0 1.5rem;">Date</th>
                                    <th style="padding:0 1.5rem;">Subject</th>
                                    <th style="padding:0 1.5rem;">Time</th>
                                    <th style="padding:0 1.5rem;">Time Left</th>
                                    <th style="padding:0 1.5rem;">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background:rgba(255,255,255,0.02); transition:0.2s;">
                                    <td data-label="Date" style="padding:1.5rem; border-radius:1rem 0 0 1rem;"><strong
                                            style="color:var(--text-primary); font-size:1.1rem;">Dec 16</strong> <span
                                            style="font-size:0.9rem; opacity:0.7;">Tue</span></td>
                                    <td data-label="Subject" style="padding:1.5rem;">
                                        <div style="color:var(--text-primary); font-weight:600;">Islamic Studies</div>
                                        <div style="font-size:0.85rem; opacity:0.6;">FSMSS1007 • Room 297</div>
                                    </td>
                                    <td data-label="Time" style="padding:1.5rem;">09:00 - 12:00</td>
                                    <td data-label="Time Left"
                                        style="padding:1.5rem; font-weight:600; color:var(--brand-glow);"
                                        id="countdown-0">--</td>
                                    <td data-label="Status" style="padding:1.5rem; border-radius:0 1rem 1rem 0;"><span
                                            style="opacity:0.3;">Upcoming</span></td>
                                </tr>
                                <tr style="background:rgba(255,255,255,0.02); transition:0.2s;">
                                    <td data-label="Date" style="padding:1.5rem; border-radius:1rem 0 0 1rem;"><strong
                                            style="color:var(--text-primary); font-size:1.1rem;">Dec 18</strong> <span
                                            style="font-size:0.9rem; opacity:0.7;">Thu</span></td>
                                    <td data-label="Subject" style="padding:1.5rem;">
                                        <div style="color:var(--text-primary); font-weight:600;">Fundamentals of
                                            Accounting</div>
                                        <div style="font-size:0.85rem; opacity:0.6;">AF1001 • Room 319</div>
                                    </td>
                                    <td data-label="Time" style="padding:1.5rem;">09:00 - 12:00</td>
                                    <td data-label="Time Left"
                                        style="padding:1.5rem; font-weight:600; color:var(--brand-glow);"
                                        id="countdown-1">--</td>
                                    <td data-label="Status" style="padding:1.5rem; border-radius:0 1rem 1rem 0;"><span
                                            style="opacity:0.3;">Upcoming</span></td>
                                </tr>
                                <tr style="background:rgba(255,255,255,0.02); transition:0.2s;">
                                    <td data-label="Date" style="padding:1.5rem; border-radius:1rem 0 0 1rem;"><strong
                                            style="color:var(--text-primary); font-size:1.1rem;">Dec 24</strong> <span
                                            style="font-size:0.9rem; opacity:0.7;">Wed</span></td>
                                    <td data-label="Subject" style="padding:1.5rem;">
                                        <div style="color:var(--text-primary); font-weight:600;">English - I</div>
                                        <div style="font-size:0.85rem; opacity:0.6;">SS1016 • Room 308</div>
                                    </td>
                                    <td data-label="Time" style="padding:1.5rem;">09:00 - 12:00</td>
                                    <td data-label="Time Left"
                                        style="padding:1.5rem; font-weight:600; color:var(--brand-glow);"
                                        id="countdown-3">--</td>
                                    <td data-label="Status" style="padding:1.5rem; border-radius:0 1rem 1rem 0;"><span
                                            style="opacity:0.3;">Upcoming</span></td>
                                </tr>
                                <tr style="background:rgba(255,255,255,0.02); transition:0.2s;">
                                    <td data-label="Date" style="padding:1.5rem; border-radius:1rem 0 0 1rem;"><strong
                                            style="color:var(--text-primary); font-size:1.1rem;">Dec 26</strong> <span
                                            style="font-size:0.9rem; opacity:0.7;">Fri</span></td>
                                    <td data-label="Subject" style="padding:1.5rem;">
                                        <div style="color:var(--text-primary); font-weight:600;">IT in Business</div>
                                        <div style="font-size:0.85rem; opacity:0.6;">CS1001 • Room 313</div>
                                    </td>
                                    <td data-label="Time" style="padding:1.5rem;">08:30 - 12:30</td>
                                    <td data-label="Time Left"
                                        style="padding:1.5rem; font-weight:600; color:var(--brand-glow);"
                                        id="countdown-4">--</td>
                                    <td data-label="Status" style="padding:1.5rem; border-radius:0 1rem 1rem 0;"><span
                                            style="opacity:0.3;">Upcoming</span></td>
                                </tr>
                                <tr style="background:rgba(255,255,255,0.02); transition:0.2s;">
                                    <td data-label="Date" style="padding:1.5rem; border-radius:1rem 0 0 1rem;"><strong
                                            style="color:var(--text-primary); font-size:1.1rem;">Dec 30</strong> <span
                                            style="font-size:0.9rem; opacity:0.7;">Tue</span></td>
                                    <td data-label="Subject" style="padding:1.5rem;">
                                        <div style="color:var(--text-primary); font-weight:600;">Business Math – I</div>
                                        <div style="font-size:0.85rem; opacity:0.6;">MT1002 • Room 317</div>
                                    </td>
                                    <td data-label="Time" style="padding:1.5rem;">09:00 - 12:00</td>
                                    <td data-label="Time Left"
                                        style="padding:1.5rem; font-weight:600; color:var(--brand-glow);"
                                        id="countdown-5">--</td>
                                    <td data-label="Status" style="padding:1.5rem; border-radius:0 1rem 1rem 0;"><span
                                            style="opacity:0.3;">Upcoming</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- IT IN BUSINESS SECTION -->

            <!-- BUSINESS MATHS SECTION -->
            <section id="business-maths" class="section-view">
                <h1 style="font-family:var(--font-display); margin-bottom:2rem;">Business Maths Notes</h1>
                <p style="color: var(--text-secondary); text-align: center; margin-top: 4rem;">
                    Content coming soon...
                </p>
            </section>

            <!-- IT IN BUSINESS SECTION -->
             <section id="it-business" class="section-view">
                <!-- ITB Hub View -->
                <div id="itb-hub">
                    <h1 style="font-family:var(--font-display); margin-bottom:2rem;">IT in Business</h1>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="card" onclick="showItNotes()">
                            <span class="tag cyan">CHAPTERS 1-9</span>
                            <h3>Notes</h3>
                            <p>Complete notes for all 9 IT in Business chapters</p>
                        </div>
                        <div class="card" onclick="showItCodeQuestions()">
                            <span class="tag purple">PRACTICE</span>
                            <h3>Code Questions to Practice</h3>
                            <p>Practice questions to master IT concepts</p>
                        </div>
                    </div>
                </div>

                <!-- IT Notes List View -->
                <div id="it-notes-section" style="display:none;">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h1 style="font-family:var(--font-display); margin:0;">IT in Business Notes</h1>
                    </div>
                    <div id="it-notes-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <!-- IT Notes rendered here -->
                        <p style="color:var(--text-muted);">Loading notes...</p>
                    </div>
                </div>

                <!-- IT Note Detail View -->
                <div id="it-note-detail" class="detail-view">
                    <button onclick="closeItNote()" class="btn" style="margin-bottom: 2rem;">← Back to Notes</button>
                    <div id="it-note-body" class="detail-content"></div>
                </div>

                <!-- IT Code Questions View -->
                <div id="it-code-questions" style="display:none;">
                    <button onclick="backToItbHub()" class="btn" style="margin-bottom: 2rem;">← Back to IT in Business</button>
                    <h1 style="font-family:var(--font-display); margin-bottom:2rem;">Code Questions to Practice</h1>
                    <div class="card" style="text-align:center; padding:4rem;">
                        <p style="color:var(--text-secondary); font-size:1.2rem;">Questions will be provided by user</p>
                    </div>
                </div>
            </section>

            <!-- PAKISTAN STUDIES SECTION -->
            <section id="pakistan-studies" class="section-view">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                    <h1 style="font-family:var(--font-display); margin:0;">Pakistan studies - BDS</h1>
                    <button id="rain-btn" onclick="toggleRain()" class="btn" style="border-radius:50%; width:50px; height:50px; font-size:1.5rem; display:flex; align-items:center; justify-content:center; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.2);">☁️</button>
                </div>
                

                
                <div class="tab-container">
                    <button class="tab-btn active" onclick="switchPakTab('notes', this)">them goddamn notes</button>
                    <button class="tab-btn" onclick="switchPakTab('qa', this)">them goddamn Q/A</button>
                </div>

                <!-- Pakistan Notes View -->
                <div id="pak-notes-content" class="tab-content active">
                     <div id="pak-notes-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                             <!-- Content Rendered by renderPakNotes() -->
                             <p>Loading...</p>
                     </div>
                     
                     <div id="pak-note-detail" class="detail-view" style="display:none;">
                        <button onclick="closePakNote()" class="btn" style="margin-bottom: 2rem;">← Back to Notes</button>
                        <div id="pak-note-body" class="detail-content"></div>
                     </div>
                </div>

                <!-- Pakistan Q/A View -->
                <div id="pak-qa-content" class="tab-content">
                    <div class="card" style="text-align:center; padding:4rem;">
                         <h2 style="font-family:var(--font-display); margin-bottom:1rem; color:var(--brand-primary);">Q/A</h2>
                        <p style="color:var(--text-secondary); font-size:1.2rem;">Practice questions and answers will appear here.</p>
                    </div>
                </div>
            </section>

            <!-- PHARMA SECTION -->
            <section id="pharma" class="section-view">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                    <h1 style="font-family:var(--font-display); margin:0;">PHARMA</h1>
                </div>

                <!-- TEACHING UNIT 1: CARDIOVASCULAR & BLOOD SYSTEMS -->
                <div id="pharma-cv-grid" style="margin-top:3rem;">
                    <h2 style="font-family:var(--font-display); margin-bottom:2rem; color:var(--brand-primary);">
                        💊 TEACHING UNIT 1: CARDIOVASCULAR & BLOOD SYSTEMS
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="card" onclick="showPharmaNote('hypertension')" style="cursor:pointer;">
                            <span class="tag cyan">CV1</span>
                            <h3>Topic 1: Hypertension</h3>
                            <p>Anti-hypertensive drugs and classifications</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV2</span>
                            <h3>Topic 2: Hypertensive Emergency</h3>
                            <p>Emergency management and drug protocols</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV3</span>
                            <h3>Topic 3: Diuretics</h3>
                            <p>Loop, Thiazides, K+ Sparing, Osmotic</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV4</span>
                            <h3>Topic 4: Angina Pectoris</h3>
                            <p>Anti-anginal drugs and mechanisms</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV5</span>
                            <h3>Topic 5: Heart Failure</h3>
                            <p>Cardiac glycosides and HF management</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV6</span>
                            <h3>Topic 6: Hyperlipidemia</h3>
                            <p>Statins, Fibrates, and lipid-lowering agents</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CV7</span>
                            <h3>Topic 7: Blood Pharmacology</h3>
                            <p>Anticoagulants, Antiplatelets, Hemostatics</p>
                        </div>
                    </div>
                </div>

                <!-- TEACHING UNIT 2: GASTROINTESTINAL TRACT -->
                <div style="margin-top:3rem;">
                    <h2 style="font-family:var(--font-display); margin-bottom:2rem; color:var(--brand-primary);">
                        🩺 TEACHING UNIT 2: GASTROINTESTINAL TRACT
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="card">
                            <span class="tag purple">GIT1</span>
                            <h3>Topic 1: Diarrhea</h3>
                            <p>ORS, Antimotility agents, Antibiotics</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">GIT2</span>
                            <h3>Topic 2: Constipation</h3>
                            <p>Laxatives and stool management</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">GIT3</span>
                            <h3>Topic 3: Inflammatory Bowel Disease</h3>
                            <p>IBD drugs and immunomodulators</p>
                        </div>
                    </div>
                </div>

                <!-- TEACHING UNIT 3: CNS & ENDOCRINE -->
                <div style="margin-top:3rem;">
                    <h2 style="font-family:var(--font-display); margin-bottom:2rem; color:var(--brand-primary);">
                        🧠 TEACHING UNIT 3: CNS & ENDOCRINE
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="card">
                            <span class="tag cyan">CNS1</span>
                            <h3>Topic 1: Local Anesthetics</h3>
                            <p>Amides and Esters classification</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS2</span>
                            <h3>Topic 2: General Anesthetics</h3>
                            <p>Inhaled and IV anesthetics</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS3</span>
                            <h3>Topic 3: Opioid Analgesics</h3>
                            <p>Morphine, Codeine, and antagonists</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS4</span>
                            <h3>Topic 4: Sedatives & Hypnotics</h3>
                            <p>Benzodiazepines and Barbiturates</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS5</span>
                            <h3>Topic 5: Antidepressants</h3>
                            <p>SSRIs, TCAs, MAO Inhibitors</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS6</span>
                            <h3>Topic 6: Antipsychotics</h3>
                            <p>Typical and Atypical neuroleptics</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS7</span>
                            <h3>Topic 7: Antiepileptics</h3>
                            <p>Seizure management and prophylaxis</p>
                        </div>
                        <div class="card">
                            <span class="tag cyan">CNS8</span>
                            <h3>Topic 8: Parkinson's Disease</h3>
                            <p>Levodopa, Carbidopa, and dopaminergics</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">ENDO1</span>
                            <h3>Topic 9: Diabetes Mellitus</h3>
                            <p>Insulin and oral hypoglycemics</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">ENDO2</span>
                            <h3>Topic 10: Corticosteroids</h3>
                            <p>Glucocorticoids and their applications</p>
                        </div>
                    </div>
                </div>

                <!-- TEACHING UNIT 4: CHEMOTHERAPY -->
                <div style="margin-top:3rem;">
                    <h2 style="font-family:var(--font-display); margin-bottom:2rem; color:var(--brand-primary);">
                        ⚕️ TEACHING UNIT 4: CHEMOTHERAPY
                    </h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="card">
                            <span class="tag purple">CHEMO1</span>
                            <h3>Topic 1: Antibiotics</h3>
                            <p>Tetracyclines and Fluoroquinolones</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">CHEMO2</span>
                            <h3>Topic 2: Antiprotozoal</h3>
                            <p>Malaria and Amebiasis treatments</p>
                        </div>
                        <div class="card">
                            <span class="tag purple">CHEMO3</span>
                            <h3>Topic 3: Anticancer Drugs</h3>
                            <p>Cell cycle and chemotherapy agents</p>
                        </div>
                    </div>
                </div>

                <!-- HYPERTENSION DETAIL VIEW -->
                <div id="pharma-hypertension-detail" style="display:none;">
                    <button onclick="closePharmaNote()" class="btn" style="margin-bottom: 2rem;">← Back to Topics</button>
                    <h1 style="font-family:var(--font-display); margin-bottom:2rem;">Hypertension</h1>
                    
                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">1. THE BASICS: The Physiology of BP</h2>
                        <p style="margin-bottom:1rem; line-height:1.8;">To treat high blood pressure, you must lower one of the two factors in this "Golden Equation":</p>
                        
                        <div style="background:rgba(139,92,246,0.1); padding:1.5rem; border-radius:1rem; margin:1.5rem 0;">
                            <h3 style="color:var(--brand-primary); margin-bottom:1rem;">The Golden Equation:</h3>
                            <p style="font-size:1.2rem; text-align:center; font-weight:700; color:var(--text-primary);">BP = CO × PVR</p>
                            <ul style="margin-top:1rem; line-height:2;">
                                <li><strong>CO (Cardiac Output):</strong> Controlled by Heart Rate & Blood Volume</li>
                                <li><strong>PVR (Peripheral Vascular Resistance):</strong> Controlled by the diameter of Arterioles</li>
                            </ul>
                        </div>

                        <h3 style="color:var(--brand-primary); margin:1.5rem 0 1rem;">Anatomic Sites of Action:</h3>
                        <ul style="line-height:2;">
                            <li><strong>Arterioles:</strong> Resistance vessels (Controls PVR/Afterload)</li>
                            <li><strong>Venules:</strong> Capacitance vessels (Controls Preload)</li>
                            <li><strong>Heart:</strong> Pump output (Rate & Contractility)</li>
                            <li><strong>Kidney:</strong> Blood volume (Renin-Angiotensin System)</li>
                        </ul>
                    </div>

                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">2. CLASSIFICATION (The "ABCD" Rule)</h2>
                        <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:1rem;">
                            <div style="background:rgba(6,182,212,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#06b6d4; margin-bottom:0.5rem;">A</h3>
                                <p style="line-height:1.8;"><strong>ACE Inhibitors</strong> / <strong>ARBs</strong> / <strong>Alpha Blockers</strong></p>
                            </div>
                            <div style="background:rgba(139,92,246,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#8b5cf6; margin-bottom:0.5rem;">B</h3>
                                <p style="line-height:1.8;"><strong>Beta Blockers</strong></p>
                            </div>
                            <div style="background:rgba(236,72,153,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#ec4899; margin-bottom:0.5rem;">C</h3>
                                <p style="line-height:1.8;"><strong>Calcium Channel Blockers</strong></p>
                            </div>
                            <div style="background:rgba(245,158,11,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#f59e0b; margin-bottom:0.5rem;">D</h3>
                                <p style="line-height:1.8;"><strong>Diuretics</strong></p>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">3. RAAS INHIBITORS (The "A" Group)</h2>
                        
                        <h3 style="color:#06b6d4; margin:1.5rem 0 1rem;">A. ACE Inhibitors (Angiotensin Converting Enzyme Inhibitors)</h3>
                        <p style="margin-bottom:1rem;"><strong>Drugs:</strong> Captopril, Enalapril, Lisinopril</p>
                        
                        <div style="background:rgba(139,92,246,0.05); padding:1.5rem; border-radius:1rem; margin:1rem 0;">
                            <h4 style="color:var(--brand-primary); margin-bottom:1rem;">Mechanism of Action (MOA):</h4>
                            <ul style="line-height:2;">
                                <li>Inhibits ACE enzyme (Kinase II)</li>
                                <li>Blocks conversion of Angiotensin I → Angiotensin II (a potent vasoconstrictor)</li>
                                <li><strong>Result:</strong> Vasodilation + Reduced Aldosterone (Sodium/Water excretion)</li>
                            </ul>
                            <p style="margin-top:1rem; padding:1rem; background:rgba(239,68,68,0.1); border-radius:0.5rem;">
                                <strong>Side Effect Mechanism:</strong> ACE normally breaks down Bradykinin. When blocked → Bradykinin accumulates → <strong>Dry Cough</strong>
                            </p>
                        </div>

                        <div style="background:rgba(239,68,68,0.1); border-left:4px solid #ef4444; padding:1.5rem; margin:1.5rem 0; border-radius:0.5rem;">
                            <h4 style="color:#ef4444; margin-bottom:1rem;">⚠️ MNEMONIC: Side Effects of "CAPTOPRIL"</h4>
                            <ul style="line-height:2.2; list-style:none; padding:0;">
                                <li><strong>C</strong> = <strong>Cough</strong> (Dry, non-productive - due to Bradykinin)</li>
                                <li><strong>A</strong> = <strong>Angioedema</strong> (Swelling of lips/tongue - Life Threatening!)</li>
                                <li><strong>P</strong> = <strong>Potassium excess</strong> (Hyperkalemia)</li>
                                <li><strong>T</strong> = <strong>Taste changes</strong> (Dysgeusia)</li>
                                <li><strong>O</strong> = <strong>Orthostatic Hypotension</strong> (First dose effect)</li>
                                <li><strong>P</strong> = <strong>Pregnancy Contraindicated</strong> (Teratogenic - Fetal Renal Damage)</li>
                                <li><strong>R</strong> = <strong>Renal failure</strong> (in bilateral renal artery stenosis)</li>
                                <li><strong>I</strong> = <strong>Indomethacin</strong> (NSAIDs) decreases efficacy</li>
                                <li><strong>L</strong> = <strong>Leukopenia</strong> (rare)</li>
                            </ul>
                        </div>

                        <h3 style="color:#06b6d4; margin:2rem 0 1rem;">B. ARBs (Angiotensin Receptor Blockers)</h3>
                        <p style="margin-bottom:1rem;"><strong>Drugs:</strong> Losartan, Valsartan</p>
                        <p style="margin-bottom:1rem;"><strong>MOA:</strong> Competitively blocks the AT1 Receptor</p>
                        
                        <div style="background:rgba(34,197,94,0.1); padding:1.5rem; border-radius:1rem; margin:1rem 0;">
                            <p style="color:#22c55e; font-weight:700; margin-bottom:0.5rem;">The "Trick":</p>
                            <p style="line-height:1.8;">Same effects as ACE inhibitors BUT <strong>no increase in Bradykinin</strong>.</p>
                            <p style="margin-top:1rem;"><strong>Result:</strong> No Dry Cough, significantly less Angioedema</p>
                            <p style="margin-top:0.5rem; color:var(--text-secondary);"><strong>Use:</strong> Alternative for patients who cannot tolerate ACE Inhibitors</p>
                        </div>
                    </div>

                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">4. BETA BLOCKERS (The "B" Group)</h2>
                        
                        <h3 style="margin:1rem 0;">Drug Classification:</h3>
                        <ul style="line-height:2;">
                            <li><strong>Non-Selective (β₁ + β₂):</strong> Propranolol</li>
                            <li><strong>Cardioselective (β₁ only):</strong> Atenolol, Metoprolol, Bisoprolol</li>
                            <li><strong>Mixed (α + β):</strong> Labetalol, Carvedilol</li>
                        </ul>

                        <div style="background:rgba(139,92,246,0.05); padding:1.5rem; border-radius:1rem; margin:1.5rem 0;">
                            <h4 style="color:var(--brand-primary); margin-bottom:1rem;">Mechanism of Action:</h4>
                            <ul style="line-height:2;">
                                <li><strong>Heart (β₁):</strong> Decreases Heart Rate (Negative Chronotropy) & Contractility (Negative Inotropy) → ↓ Cardiac Output</li>
                                <li><strong>Kidney (β₁):</strong> Decreases Renin release → Blocks RAAS</li>
                            </ul>
                        </div>

                        <div style="background:rgba(239,68,68,0.1); border-left:4px solid #ef4444; padding:1.5rem; margin:1.5rem 0; border-radius:0.5rem;">
                            <h4 style="color:#ef4444; margin-bottom:1rem;">⚠️ MNEMONIC: Adverse Effects "ABCDE"</h4>
                            <ul style="line-height:2.2; list-style:none; padding:0;">
                                <li><strong>A</strong> = <strong>Asthma</strong> (Bronchospasm via β₂ block - Avoid Propranolol in Asthmatics)</li>
                                <li><strong>B</strong> = <strong>Block</strong> (Heart Block/Bradycardia)</li>
                                <li><strong>C</strong> = <strong>Cold extremities</strong> (Raynaud's phenomenon)</li>
                                <li><strong>D</strong> = <strong>Diabetes</strong> (Masks signs of hypoglycemia like tachycardia)</li>
                                <li><strong>E</strong> = <strong>Erectile Dysfunction</strong> / Fatigue</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">5. CALCIUM CHANNEL BLOCKERS (CCBs) (The "C" Group)</h2>
                        
                        <p style="margin-bottom:1.5rem;"><strong>MOA:</strong> Block L-Type Voltage-Gated Calcium Channels → No Calcium entry → Smooth muscle relaxation</p>

                        <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1.5rem; margin:1.5rem 0;">
                            <div style="background:rgba(236,72,153,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#ec4899; margin-bottom:1rem;">Dihydropyridines</h3>
                                <p style="margin-bottom:0.5rem;"><strong>(Vessel Selective)</strong></p>
                                <p style="margin-bottom:1rem;">Nifedipine, Amlodipine</p>
                                <p style="margin-bottom:0.5rem;"><strong>Action:</strong> Potent Vasodilation</p>
                                <p><strong>ADR:</strong> Reflex Tachycardia, Ankle Edema (fluid retention due to vasodilation)</p>
                            </div>
                            <div style="background:rgba(139,92,246,0.1); padding:1.5rem; border-radius:1rem;">
                                <h3 style="color:#8b5cf6; margin-bottom:1rem;">Non-Dihydropyridines</h3>
                                <p style="margin-bottom:0.5rem;"><strong>(Heart Selective)</strong></p>
                                <p style="margin-bottom:1rem;">Verapamil, Diltiazem</p>
                                <p style="margin-bottom:0.5rem;"><strong>Action:</strong> Decreases Heart Rate & Force (Mimics Beta Blockers)</p>
                                <p><strong>ADR:</strong> Constipation (Verapamil is famous for this)</p>
                            </div>
                        </div>

                        <div style="background:rgba(245,158,11,0.1); border-left:4px solid #f59e0b; padding:1.5rem; margin-top:1.5rem; border-radius:0.5rem;">
                            <p style="color:#f59e0b; font-weight:700; margin-bottom:0.5rem;">🦷 DENTAL GOLD:</p>
                            <p style="line-height:1.8;"><strong>Gingival Hyperplasia</strong> (Gum Overgrowth) is a classic side effect of Nifedipine and Amlodipine.</p>
                            <p style="margin-top:0.5rem; color:var(--text-secondary);">Tip: If a patient has swollen gums, check their medication list for these drugs!</p>
                        </div>
                    </div>

                    <div class="card" style="padding:2.5rem; margin-bottom:2rem;">
                        <h2 style="color:var(--brand-primary); margin-bottom:1.5rem;">6. OTHER ANTI-HYPERTENSIVES</h2>
                        
                        <h3 style="margin:1.5rem 0 1rem;">Alpha-1 Blockers (Prazosin)</h3>
                        <p><strong>MOA:</strong> Vasodilation</p>
                        <div style="background:rgba(239,68,68,0.1); padding:1rem; border-radius:0.5rem; margin:1rem 0;">
                            <p><strong>ADR:</strong> First Dose Phenomenon (Severe postural hypotension after the first dose)</p>
                            <p style="margin-top:0.5rem; color:var(--text-secondary);"><strong>Tip:</strong> Advise patient to take first dose at bedtime</p>
                        </div>

                        <h3 style="margin:2rem 0 1rem;">Centrally Acting Agents (Methyldopa)</h3>
                        <p style="margin-bottom:0.5rem;"><strong>MOA:</strong> Converted to α-methylnorepinephrine (α₂ agonist) in CNS → Reduces sympathetic outflow</p>
                        <div style="background:rgba(34,197,94,0.1); padding:1rem; border-radius:0.5rem; margin:1rem 0;">
                            <p style="color:#22c55e; font-weight:700;">Use: Drug of Choice for Hypertension in Pregnancy (Safe for baby)</p>
                        </div>
                        <p><strong>ADR:</strong> Sedation, Coombs +ve Hemolytic Anemia</p>
                    </div>

                    <div class="card" style="padding:2.5rem; background:rgba(245,158,11,0.1); border:2px solid #f59e0b;">
                        <h2 style="color:#f59e0b; margin-bottom:1.5rem;">🦷 DENTAL MANAGEMENT FOR HYPERTENSIVE PATIENTS</h2>
                        
                        <div style="background:rgba(255,255,255,0.5); padding:1.5rem; border-radius:1rem; margin-bottom:1rem;">
                            <h3 style="color:var(--brand-primary); margin-bottom:1rem;">Orthostatic Hypotension</h3>
                            <p style="line-height:1.8;">Common with Prazosin, Nitrates, and older patients. <strong>Raise the dental chair slowly.</strong></p>
                        </div>

                        <div style="background:rgba(255,255,255,0.5); padding:1.5rem; border-radius:1rem; margin-bottom:1rem;">
                            <h3 style="color:var(--brand-primary); margin-bottom:1rem;">Gingival Hyperplasia</h3>
                            <p style="line-height:1.8;">Check if patient is on <strong>Nifedipine/Amlodipine</strong>.</p>
                        </div>

                        <div style="background:rgba(255,255,255,0.5); padding:1.5rem; border-radius:1rem; margin-bottom:1rem;">
                            <h3 style="color:var(--brand-primary); margin-bottom:1rem;">Local Anesthesia (LA)</h3>
                            <p style="line-height:1.8;">Limit Epinephrine in cardiac patients (Max 0.04mg or ~2 cartridges of 1:100,000).</p>
                            <p style="margin-top:0.5rem;"><strong>Avoid Epinephrine completely</strong> if BP is uncontrolled or patient is on non-selective beta-blockers (risk of hypertensive crisis).</p>
                        </div>

                        <div style="background:rgba(255,255,255,0.5); padding:1.5rem; border-radius:1rem;">
                            <h3 style="color:var(--brand-primary); margin-bottom:1rem;">NSAIDs</h3>
                            <p style="line-height:1.8;">Long-term NSAID use (Ibuprofen) can <strong>reduce the efficacy</strong> of ACE Inhibitors and Beta Blockers (by blocking kidney prostaglandins).</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="quiz" class="section-view">
                <div style="max-width:800px; margin:0 auto;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:2rem;">
                        <h1 style="font-family:var(--font-display);">Quiz Mode</h1>
                        <h2 style="color:var(--brand-primary);">Score: <span id="q-score">0</span></h2>
                    </div>
                    <div id="quiz-container" class="card">
                        <p id="q-progress"
                            style="color:var(--text-muted); text-transform:uppercase; font-size:0.8rem; margin-bottom:1rem;">
                            Question 1</p>
                        <h2 id="q-text" style="font-family:var(--font-display);">Loading...</h2>
                        <div id="q-options"></div>
                        <button id="q-next" class="btn btn-primary" style="margin-top:2rem; width:100%; display:none;"
                            onclick="nextQ()">Next Question</button>
                    </div>
                </div>
            </section>



        </main>
    </div>


    <!-- MOVED AI INTERFACE CONTAINER (FULLSCREEN ROOT) -->
    <canvas id="pak-rain" style="position:fixed; top:0; left:0; width:100vw; height:100vh; pointer-events:none; z-index:9998; display:none;"></canvas>

    <div id="ai-interface"
        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:9999; background:rgba(0,0,0,1); overflow:hidden;">
        <iframe src="/ai" style="width:100%; height:100%; border:none; display:block;"
            allow="camera; microphone; autoplay"></iframe>
        <button onclick="closeAI()"
            style="position:absolute; top:2rem; right:2rem; background:rgba(255, 0, 0, 0.2); border:1px solid rgba(255,255,255,0.3); color:white; width:50px; height:50px; border-radius:50%; cursor:pointer; z-index:10000; font-size:1.5rem; display:flex; align-items:center; justify-content:center; transition: all 0.3s ease;"
            onmouseover="this.style.background='rgba(255,0,0,0.8)'"
            onmouseout="this.style.background='rgba(255,0,0,0.2)'">✕</button>
    </div>

    <script>
        // --- DATA (RETAINED FROM PREVIOUS) ---
        // (In a real app, I would import these, but keeping single file structure for you)
        // I will re-inject the expanded notes here to ensure nothing is lost.

        const notes = [
            {
                id: 'ch2', title: 'Ch 2: Company and Marketing Strategy', content: `
                <h3>📚 Chapter 2: Company and Marketing Strategy</h3>
                <p><strong>Theme: Partnering to Build Customer Engagement, Value, and Relationships</strong></p>

                <h3>1. Company-Wide Strategic Planning</h3>
                <p><strong>Definition:</strong> Strategic planning is the process of developing and maintaining a strategic fit between the organization's goals and capabilities and its changing marketing opportunities.</p>

                <h4>The 4 Steps of Strategic Planning</h4>
                <ol>
                    <li><strong>Step 1: Defining the Mission:</strong> The organization states its purpose—what it wants to accomplish in the larger environment.<br>
                    <em>Note:</em> A mission statement should be market-oriented (defined in terms of satisfying basic customer needs), not product-oriented.</li>
                    <li><strong>Step 2: Setting Objectives and Goals:</strong> Turning the mission into detailed supporting objectives for each level of management.</li>
                    <li><strong>Step 3: Designing the Business Portfolio:</strong> Deciding which businesses and products make up the company.</li>
                    <li><strong>Step 4: Planning Marketing Strategies:</strong> Detailed planning for marketing and other functional departments.</li>
                </ol>
                <div class="tip-box">💡 <strong>Exam Tip:</strong> Remember that the first three steps happen at the <strong>Corporate Level</strong>, while Step 4 happens at the <strong>Business Unit/Market Level</strong>. Strategic planning flows from the top down.</div>

                <h3>2. Designing the Business Portfolio</h3>
                <p><strong>Definition:</strong> The business portfolio is the collection of businesses and products that make up the company.</p>

                <h4>A. Analyzing the Current Portfolio (The BCG Matrix)</h4>
                <p>Companies use portfolio analysis to evaluate their Strategic Business Units (SBUs). The most famous method is the Boston Consulting Group (BCG) Growth-Share Matrix.</p>
                <ul>
                    <li><strong>Vertical Axis:</strong> Market Growth Rate (Market Attractiveness)</li>
                    <li><strong>Horizontal Axis:</strong> Relative Market Share (Company Strength)</li>
                </ul>

                <p><strong>The 4 Quadrants:</strong></p>
                <ul>
                    <li><strong>Stars (High Growth, High Share):</strong> Need heavy investment to finance rapid growth. <em>Fate:</em> Eventually slow down and turn into Cash Cows.</li>
                    <li><strong>Cash Cows (Low Growth, High Share):</strong> Established and successful; need less investment to hold share. <em>Function:</em> They produce the cash used to pay bills and support other SBUs.</li>
                    <li><strong>Question Marks (High Growth, Low Share):</strong> Require a lot of cash just to hold their share. <em>Decision:</em> Management must decide which to build into Stars and which to phase out.</li>
                    <li><strong>Dogs (Low Growth, Low Share):</strong> Generate enough cash to maintain themselves but promise no large source of cash. <em>Fate:</em> Usually harvested or divested.</li>
                </ul>

                <p><strong>4 Strategies for SBUs:</strong></p>
                <ul>
                    <li><strong>Build:</strong> Invest more to increase share (for Question Marks/Stars).</li>
                    <li><strong>Hold:</strong> Invest just enough to keep share (for Cash Cows).</li>
                    <li><strong>Harvest:</strong> Milk short-term cash flow regardless of long-term effect (for weak Cash Cows/Question Marks).</li>
                    <li><strong>Divest:</strong> Sell or phase out (for Dogs/Question Marks).</li>
                </ul>
                <div class="mnemonic-box">💡 <strong>Trick to Remember:</strong> Think of the Cash Cow as the "parent" funding the family. The Star is the "teenager" spending all the money to grow. The Dog is the "pet" that doesn't contribute financially.</div>

                <h4>B. Developing Strategies for Growth (Product/Market Expansion Grid)</h4>
                <p>A tool for identifying company growth opportunities through market penetration, market development, product development, or diversification.</p>
                <table style="width:100%; border-collapse:collapse; margin:1rem 0;">
                    <tr style="background:var(--bg-card);">
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);"></th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);">Existing Products</th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);">New Products</th>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Existing Markets</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>1. Market Penetration:</strong> Increasing sales to current customers without changing the original product (e.g., adding more stores, improving advertising).</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>3. Product Development:</strong> Offering modified or new products to current markets (e.g., new flavors, new models).</td>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>New Markets</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>2. Market Development:</strong> Identifying and developing new markets for current products (e.g., expanding to a new demographic or country).</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>4. Diversification:</strong> Starting up or buying businesses outside the company's current products and markets (e.g., a car company buying a clothing brand).</td>
                    </tr>
                </table>
                <div class="tip-box">
                    💡 <strong>Exam Tip:</strong> Always check the axes!
                    <ul>
                        <li>Same Product + Same People = <strong>Penetration</strong></li>
                        <li>Same Product + New People = <strong>Market Development</strong></li>
                        <li>New Product + Same People = <strong>Product Development</strong></li>
                        <li>New Product + New People = <strong>Diversification</strong></li>
                    </ul>
                </div>

                <h3>3. Marketing's Role in Strategic Planning</h3>
                <p>Marketing plays a key role in strategic planning by providing a guiding philosophy (the marketing concept) and inputs regarding attractive market opportunities.</p>
                <ul>
                    <li><strong>Value Chain:</strong> The series of internal departments that carry out value-creating activities to design, produce, market, deliver, and support a firm's products. Success depends on coordination between departments.</li>
                    <li><strong>Value Delivery Network:</strong> The network made up of the company, its suppliers, its distributors, and, ultimately, its customers who partner with each other to improve the performance of the entire system.</li>
                </ul>

                <h3>4. Customer Value-Driven Marketing Strategy</h3>
                <p><strong>Definition:</strong> The marketing logic by which the company hopes to create customer value and achieve profitable customer relationships.</p>
                <ul>
                    <li><strong>A. Market Segmentation:</strong> Dividing a market into distinct groups of buyers who have different needs, characteristics, or behaviors, and who might require separate products or marketing programs.<br>
                    <em>Market Segment:</em> A group of consumers who respond in a similar way to a given set of marketing efforts.</li>
                    <li><strong>B. Market Targeting:</strong> Evaluating each market segment's attractiveness and selecting one or more segments to enter.</li>
                    <li><strong>C. Differentiation:</strong> Actually differentiating the market offering to create superior customer value.</li>
                    <li><strong>D. Positioning:</strong> Arranging for a product to occupy a clear, distinctive, and desirable place relative to competing products in the minds of target consumers.</li>
                </ul>

                <h3>5. The Marketing Mix (The 4 Ps)</h3>
                <p><strong>Definition:</strong> The set of tactical marketing tools that the firm blends to produce the response it wants in the target market.</p>
                <ul>
                    <li><strong>Product:</strong> The goods-and-services combination the company offers to the target market (Variety, quality, design, features, brand name, packaging).</li>
                    <li><strong>Price:</strong> The amount of money customers must pay to obtain the product (List price, discounts, allowances, credit terms).</li>
                    <li><strong>Place:</strong> Company activities that make the product available to target consumers (Channels, coverage, locations, inventory, logistics).</li>
                    <li><strong>Promotion:</strong> Activities that communicate the merits of the product and persuade target customers to buy it (Advertising, personal selling, sales promotion, public relations).</li>
                </ul>
                <div class="mnemonic-box">
                    💡 <strong>Trick to Remember:</strong> The 4 Ps are the <strong>Seller's View</strong>. The <strong>Buyer's View</strong> is the 4 As:
                    <ul>
                        <li>Product → Acceptability</li>
                        <li>Price → Affordability</li>
                        <li>Place → Accessibility</li>
                        <li>Promotion → Awareness</li>
                    </ul>
                </div>

                <h3>6. Managing the Marketing Effort</h3>
                <p>Managing the marketing process requires four key functions: Analysis, Planning, Implementation, and Control.</p>

                <h4>A. SWOT Analysis (Marketing Analysis)</h4>
                <p>A comprehensive evaluation of the company's position.</p>
                <ul>
                    <li><strong>Strengths (Internal, Positive):</strong> Internal capabilities that may help achieve objectives.</li>
                    <li><strong>Weaknesses (Internal, Negative):</strong> Internal limitations that may interfere with performance.</li>
                    <li><strong>Opportunities (External, Positive):</strong> External factors that the company may be able to exploit to its advantage.</li>
                    <li><strong>Threats (External, Negative):</strong> Current and emerging external factors that may challenge the company's performance.</li>
                </ul>
                <div class="tip-box">
                    💡 <strong>Exam Tip:</strong>
                    <ul>
                        <li><strong>Internal</strong> = Things you can control (e.g., your employees, your patents).</li>
                        <li><strong>External</strong> = Things you cannot control (e.g., competitors, economy, laws).</li>
                    </ul>
                </div>

                <h4>B. Marketing Implementation</h4>
                <p>Turning marketing strategies and plans into marketing actions to accomplish strategic marketing objectives. It addresses the <strong>who, where, when, and how</strong>.</p>

                <h4>C. Marketing Control</h4>
                <p>Measuring and evaluating the results of marketing strategies and plans and taking corrective action to ensure that the objectives are achieved.</p>

                <h4>D. Return on Marketing Investment (Marketing ROI)</h4>
                <p>The net return from a marketing investment divided by the costs of the marketing investment. It measures the profits generated by investments in marketing activities.</p>
                `
            },
            {
                id: 'ch7', title: 'Ch 7: Customer Value-Driven Marketing Strategy', content: `
                <h3>Theme: Creating Value for Target Customers</h3>

                <h3>1. The Core Strategy Steps (STDP)</h3>
                <ul>
                    <li><strong>Segmentation:</strong> Divide the total market into smaller segments.</li>
                    <li><strong>Targeting:</strong> Select the segment or segments to enter.</li>
                    <li><strong>Differentiation:</strong> Differentiate the market offering to create superior customer value.</li>
                    <li><strong>Positioning:</strong> Position the market offering in the minds of target customers.</li>
                </ul>

                <h3>2. Market Segmentation Bases</h3>
                <p>How do we divide the market?</p>
                <ul>
                    <li><strong>Geographic:</strong> Nations, regions, states, cities (e.g., Target sells winter coats in NY, swimsuits in FL).</li>
                    <li><strong>Demographic:</strong> Age, gender, income, occupation.</li>
                    <li><strong>Psychographic:</strong> Social class, lifestyle, personality. <br><em>Example:</em> Rocky Mountain Tiny Houses targets the "simple living" lifestyle segment.</li>
                    <li><strong>Behavioral:</strong> Occasions, benefits sought, user status, usage rate. <br><em>Example:</em> Schwinn makes bikes for different benefits—mountain vs. road.</li>
                </ul>
                <div class="mnemonic-box">💡 <strong>Memory Tip:</strong> G-D-P-B (Good Dogs Play Ball) -> Geo, Demo, Psycho, Behavior.</div>

                <h3>3. Business & International Segmentation (The "Perfecting" Addition)</h3>
                <ul>
                    <li><strong>Business Markets:</strong> Segmented by operating characteristics, purchasing approaches, situational factors, and personal characteristics.</li>
                    <li><strong>Intermarket (Cross-Market) Segmentation:</strong> Forming segments of consumers who have similar needs/behaviors even though they are located in different countries. <br><em>Example:</em> Zara targets style-conscious but value-seeking consumers globally.</li>
                </ul>

                <h3>4. Requirements for Effective Segmentation</h3>
                <p>To be useful, segments must be:</p>
                <ul>
                    <li><strong>Measurable:</strong> Size and purchasing power can be measured.</li>
                    <li><strong>Accessible:</strong> Can be reached and served.</li>
                    <li><strong>Substantial:</strong> Large and profitable enough.</li>
                    <li><strong>Differentiable:</strong> Respond differently to different marketing elements.</li>
                    <li><strong>Actionable:</strong> Effective programs can be designed for them.</li>
                </ul>

                <h3>5. Market Targeting Strategies</h3>
                <ul>
                    <li><strong>Undifferentiated (Mass) Marketing:</strong> Target the whole market with one offer.</li>
                    <li><strong>Differentiated (Segmented) Marketing:</strong> Target several market segments with separate offers. <br><em>Example:</em> Marriott (IHG) has different brands like Holiday Inn vs. Hotel Indigo.</li>
                    <li><strong>Concentrated (Niche) Marketing:</strong> Large share of a small market. <br><em>Example:</em> American Giant focusing on made-in-USA apparel.</li>
                    <li><strong>Micromarketing:</strong> Tailoring products to specific individuals (Local marketing & Individual marketing). <br><em>Example:</em> FitMyFoot 3D prints footwear for individual feet.</li>
                </ul>

                <h3>6. Differentiation & Positioning</h3>
                <p><strong>Positioning:</strong> The place the product occupies in the consumer's mind relative to competitors.</p>
                <p><em>Example:</em> Land Rover positions itself on luxury + off-road performance.</p>
                <div class="tip-box"><strong>Socially Responsible Targeting:</strong> Marketers must consider if they are targeting vulnerable segments responsibly (e.g., not targeting kids with junk food).</div>
                `
            },
            {
                id: 'ch8', title: 'Ch 8: Products, Services, and Brands', content: `
                <h3>📚 Chapter 8: Products, Services, and Brands</h3>
                <p><strong>Goal: Building Customer Value</strong></p>

                <h3>1. What is a Product?</h3>
                <p><strong>Definition:</strong> A product is anything that can be offered to a market for attention, acquisition, use, or consumption that might satisfy a want or need.</p>
                <p><strong>Broad Definition:</strong> It is not just tangible objects (cars, phones). It includes services, events, persons, places, organizations, and ideas (e.g., an Instagram account or a trip to Las Vegas).</p>
                <p><strong>Service:</strong> A form of product that consists of activities, benefits, or satisfactions offered for sale that are essentially intangible and do not result in the ownership of anything (e.g., banking, hotel stays).</p>

                <h4>Levels of Product and Services</h4>
                <p>Marketers plan products on three levels.</p>
                <ol>
                    <li><strong>Core Customer Value:</strong> The most basic level. It answers the question, "What is the buyer really buying?" (e.g., An iPad buyer is buying "entertainment, self-expression, and connectivity," not just a tablet).</li>
                    <li><strong>Actual Product:</strong> The physical device with features, design, quality level, brand name, and packaging.</li>
                    <li><strong>Augmented Product:</strong> Additional services and benefits built around the core and actual product (e.g., warranty, delivery, credit, after-sale service).</li>
                </ol>
                <div class="tip-box">
                    <strong>💡 Exam Tip:</strong> If asked to analyze a product like a smartphone:
                    <ul>
                        <li><strong>Core:</strong> Communication/Connection.</li>
                        <li><strong>Actual:</strong> The phone itself, the screen, the Apple logo.</li>
                        <li><strong>Augmented:</strong> AppleCare+, iCloud storage service.</li>
                    </ul>
                </div>

                <h3>2. Product Classifications</h3>
                <p>Products are divided into two broad classes based on the types of consumers who use them: Consumer Products and Industrial Products.</p>

                <h4>A. Consumer Products</h4>
                <p>Products bought by final consumers for personal consumption.</p>
                <table style="width:100%; border-collapse:collapse; margin:1rem 0;">
                    <tr style="background:var(--bg-card);">
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle); text-align:left;">Type</th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle); text-align:left;">Definition</th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle); text-align:left;">Buying Behavior</th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle); text-align:left;">Examples</th>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Convenience</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Bought frequently, immediately, with minimal comparison/effort.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Low price, widespread distribution.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Soap, candy, newspapers, fast food.</td>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Shopping</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Bought less frequently; customers compare on suitability, quality, price, and style.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Higher price, selective distribution.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Furniture, clothing, major appliances, hotels.</td>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Specialty</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Unique characteristics or brand identification; buyers make a special purchase effort.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">High price, exclusive distribution.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Lamborghini, Rolex, medical specialist services.</td>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Unsought</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Consumer either does not know about or knows about but does not normally consider buying.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Requires aggressive advertising/selling.</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);">Life insurance, blood donations, funeral services.</td>
                    </tr>
                </table>

                <h4>B. Industrial Products</h4>
                <p>Products bought by individuals and organizations for further processing or for use in conducting a business.</p>
                <ul>
                    <li><strong>Materials and Parts:</strong> Raw materials (wheat, timber) and manufactured parts (tires, small motors).</li>
                    <li><strong>Capital Items:</strong> Aid in the buyer's production or operations, including installations (factories) and accessory equipment (lift trucks, computers).</li>
                    <li><strong>Supplies and Services:</strong> Operating supplies (lubricants, paper) and repair/maintenance services (window cleaning).</li>
                </ul>
                <div class="mnemonic-box">💡 <strong>Trick to Remember:</strong> The difference between a consumer and industrial product is the purpose of the purchase. If you buy a lawnmower for your home, it's a Consumer Product. If a landscaping business buys the same lawnmower to cut clients' grass, it's an Industrial Product.</div>

                <h3>3. Product and Service Decisions</h3>
                <p>Marketers make decisions at three levels: Individual Product, Product Line, and Product Mix.</p>

                <h4>Level 1: Individual Product Decisions</h4>
                <ul>
                    <li><strong>Product Attributes:</strong>
                        <ul>
                            <li><strong>Quality:</strong> Performance quality (ability to perform functions) and Conformance quality (consistency).</li>
                            <li><strong>Features:</strong> A competitive tool for differentiating the product.</li>
                            <li><strong>Style & Design:</strong> Style is appearance; Design contributes to usefulness and looks.</li>
                        </ul>
                    </li>
                    <li><strong>Branding:</strong> A name, term, sign, symbol, or design that identifies the maker or seller.</li>
                    <li><strong>Packaging:</strong> Designing and producing the container or wrapper. (Functions: protect, attract, describe, and sell).</li>
                    <li><strong>Labeling:</strong> Identifies the product, describes it, and promotes the brand (regulated by laws like the Fair Packaging and Labeling Act).</li>
                    <li><strong>Product Support Services:</strong> Customer service acts as a differentiator (e.g., Apple's Genius Bar).</li>
                </ul>

                <h4>Level 2: Product Line Decisions</h4>
                <p><strong>Product Line:</strong> A group of products that are closely related because they function in a similar manner, are sold to the same customer groups, are marketed through the same types of outlets, or fall within given price ranges (e.g., Nike produces several lines of athletic shoes).</p>
                <ul>
                    <li><strong>Line Filling:</strong> Adding more items within the present range of the line (to keep out competitors or use excess capacity).</li>
                    <li><strong>Line Stretching:</strong> Lengthening the product line beyond its current range.
                        <ul>
                            <li><strong>Downward:</strong> Adding lower-end products (e.g., Mercedes releasing a cheaper A-Class).</li>
                            <li><strong>Upward:</strong> Adding higher-end products to add prestige.</li>
                        </ul>
                    </li>
                </ul>

                <h4>Level 3: Product Mix (Portfolio) Decisions</h4>
                <p><strong>Product Mix:</strong> The set of all product lines and items that a particular seller offers for sale.</p>
                <ul>
                    <li><strong>Width:</strong> Number of different product lines (e.g., Colgate has Oral Care, Personal Care, Home Care, Pet Nutrition).</li>
                    <li><strong>Length:</strong> Total number of items a company carries within its product lines.</li>
                    <li><strong>Depth:</strong> Number of versions offered for each product in the line (e.g., Colgate toothpaste comes in Total, Optic White, Sensitive, etc.).</li>
                    <li><strong>Consistency:</strong> How closely related the various product lines are in end use, production requirements, or distribution channels.</li>
                </ul>

                <h3>4. Services Marketing</h3>
                <p>Services are growing faster than products. They have four special characteristics that affect their marketing.</p>

                <h4>The 4 Characteristics of Services (The 4 Is)</h4>
                <ul>
                    <li><strong>Intangibility:</strong> Services cannot be seen, tasted, felt, heard, or smelled before purchase (e.g., airline passengers have nothing but a ticket and a promise).</li>
                    <li><strong>Inseparability:</strong> Services cannot be separated from their providers. If a service employee provides the service, then the employee is part of the service.</li>
                    <li><strong>Variability:</strong> Quality of services depends on who provides them and when, where, and how (e.g., one Marriott hotel might be better than another).</li>
                    <li><strong>Perishability:</strong> Services cannot be stored for later sale or use (e.g., an empty airline seat usually represents lost revenue forever).</li>
                </ul>

                <h4>The Service Profit Chain</h4>
                <p>Service firms must focus on both customers and employees.</p>
                <ul>
                    <li><strong>Internal Marketing:</strong> The service firm must orient and motivate its customer-contact employees and supporting service people to work as a team to provide customer satisfaction. (Must happen before external marketing).</li>
                    <li><strong>Interactive Marketing:</strong> Service quality depends heavily on the quality of the buyer-seller interaction during the service encounter.</li>
                </ul>

                <h3>5. Branding Strategy: Building Strong Brands</h3>
                <p><strong>Brand Equity:</strong> The differential effect that knowing the brand name has on a customer's response to the product or its marketing. High brand equity provides a competitive advantage.</p>

                <h4>Major Brand Strategy Decisions</h4>

                <p><strong>1. Brand Positioning</strong></p>
                <p>Marketers can position brands at three levels:</p>
                <ul>
                    <li><strong>Attributes:</strong> Lowest level (e.g., "fastest," "cheapest"). Least desirable because competitors can copy easily.</li>
                    <li><strong>Benefits:</strong> (e.g., "save time," "peace of mind").</li>
                    <li><strong>Beliefs and Values:</strong> Highest level; engages customers on a deep, emotional level (e.g., Nike's "Just Do It" passion for sports).</li>
                </ul>

                <p><strong>2. Brand Name Selection</strong></p>
                <p>A good name should suggest benefits, be easy to pronounce/remember, be distinctive, extendable, and capable of registration/legal protection.</p>

                <p><strong>3. Brand Sponsorship</strong></p>
                <ul>
                    <li><strong>National Brand (Manufacturer's Brand):</strong> Owned by the manufacturer (e.g., Samsung, Kellogg's).</li>
                    <li><strong>Private Brand (Store Brand):</strong> Created and owned by a reseller (e.g., Walmart's Great Value). Trend: Private brands are growing faster than national brands.</li>
                    <li><strong>Licensing:</strong> Using names or symbols created by other manufacturers or well-known characters (e.g., Minions on a toothbrush) for a fee.</li>
                    <li><strong>Co-branding:</strong> Two established brand names of different companies are used on the same product (e.g., Taco Bell and Doritos for the Doritos Locos Tacos).</li>
                </ul>

                <p><strong>4. Brand Development Strategies</strong></p>
                <p>A powerful matrix for growth.</p>
                <table style="width:100%; border-collapse:collapse; margin:1rem 0;">
                    <tr style="background:var(--bg-card);">
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);"></th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);">Existing Product Category</th>
                        <th style="padding:0.75rem; border:1px solid var(--border-subtle);">New Product Category</th>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Existing Brand Name</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Line Extension:</strong> Extending an existing brand name to new forms, colors, sizes, ingredients, or flavors of an existing product category (e.g., Coke Zero, Cherry Coke).</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Brand Extension:</strong> Extending an existing brand name to new product categories (e.g., Dyson making lamps, or Mr. Clean car washes).</td>
                    </tr>
                    <tr>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>New Brand Name</strong></td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>Multibrands:</strong> Marketing many different brands in a given product category (e.g., PepsiCo marketing Pepsi, Mountain Dew, and Sierra Mist).</td>
                        <td style="padding:0.75rem; border:1px solid var(--border-subtle);"><strong>New Brands:</strong> Creating a new brand name when entering a new product category where the current brand name is not appropriate (e.g., Toyota creating Lexus for luxury cars).</td>
                    </tr>
                </table>

                <div class="tip-box">
                    <strong>💡 Exam Trick:</strong>
                    <ul>
                        <li><strong>Line Extension</strong> = Same name, Same category (New Flavor).</li>
                        <li><strong>Brand Extension</strong> = Same name, New category (New type of product).</li>
                        <li><strong>Multibrand</strong> = New name, Same category (Competes with itself).</li>
                        <li><strong>New Brand</strong> = New name, New category.</li>
                    </ul>
                </div>
                `
            },
            {
                id: 'ch9', title: 'Ch 9: New Products & Product Life Cycle', content: `
                <h3>1. The Golden Rule of this Chapter</h3>
                <p><strong>Innovation is Survival.</strong></p>
                <p><strong>Fact:</strong> 60%–80% of new products fail.</p>
                <p><strong>The Solution:</strong> You need a system to innovate.</p>
                <p><em>Example:</em> Google (Alphabet) isn't just a search engine; it's a "Moonshot Factory" culture that accepts failure to find the next big thing.</p>

                <h3>2. The 8 Steps to Creating a New Product</h3>
                <div class="tip-box">
                    <strong>Must memorize this order:</strong>
                    <ol>
                        <li><strong>Idea Generation:</strong> Finding ideas (Internal R&D, Crowdsourcing).</li>
                        <li><strong>Idea Screening:</strong> R-W-W Rule (Real? Win? Worth?).</li>
                        <li><strong>Concept Development & Testing:</strong> Detailed version tested with consumers ("Would you buy this?").</li>
                        <li><strong>Marketing Strategy:</strong> Target market, price, budget.</li>
                        <li><strong>Business Analysis:</strong> Check the money (Sales vs Costs).</li>
                        <li><strong>Product Development:</strong> Building the physical prototype (Big money spent here, e.g., Pfizer COVID vaccine).</li>
                        <li><strong>Test Marketing:</strong> Standard (Real cities) vs Simulated (Online).</li>
                        <li><strong>Commercialization:</strong> Full launch (When and Where).</li>
                    </ol>
                    <p>🧠 <strong>Mnemonic:</strong> I Saw Cats Marching Behind People Tasting Candy.</p>
                </div>

                <h3>3. The Product Life Cycle (PLC)</h3>
                <ul>
                    <li><strong>Stage 1: Introduction (The Baby):</strong> Low sales, negative profits. Goal: Awareness.</li>
                    <li><strong>Stage 2: Growth (The Teenager):</strong> Climbing sales, rising profits. Goal: Maximize Market Share.</li>
                    <li><strong>Stage 3: Maturity (The Adult):</strong> Peak sales, leveling profits. Goal: Defend profit (Modify product/marketing).</li>
                    <li><strong>Stage 4: Decline (The Senior):</strong> Falling sales. Strategy: Milk (cut costs) or Drop.</li>
                </ul>

                <h3>4. Vital Terms</h3>
                <ul>
                    <li><strong>Crowdsourcing:</strong> Asking the "crowd" for ideas.</li>
                    <li><strong>Standardization:</strong> Exact same product globally (iPhone).</li>
                    <li><strong>Adaptation:</strong> Modifying for local culture (McDonald's wine in France).</li>
                </ul>
                <div class="tip-box">
                    <strong>Exam Tips:</strong><br>
                    - If they ask about "Screening": Write <strong>R-W-W</strong>.<br>
                    - Introduction Stage Goal = <strong>AWARENESS</strong>.<br>
                    - Maturity Stage Goal = <strong>DEFENSE</strong>.
                </div>
                `
            },
            {
                id: 'ch10', title: 'Ch 10: Pricing – Understanding Value', content: `
                <h3>1. The Golden Rule of this Chapter</h3>
                <p><strong>Price is the only "P" that brings in money.</strong> (Others are costs).</p>
                <p>You don't just set a number; you capture value.</p>
                <p><em>Example:</em> Peloton charges $1,745 for the "cult" and lifestyle, not just the bike.</p>

                <h3>2. The 3 Major Pricing Strategies</h3>
                <h4>Strategy 1: Customer Value-Based Pricing (The "Right" Way)</h4>
                <p>Start with the customer's perception of value.</p>
                <ul>
                    <li><strong>Good-Value Pricing:</strong> Fair quality at fair price (Aldi).</li>
                    <li><strong>Value-Added Pricing:</strong> Charging more for features/services (Peloton).</li>
                </ul>

                <h4>Strategy 2: Cost-Based Pricing (The "Math" Way)</h4>
                <p>Cost + Markup. Risk: Ignores demand.</p>
                <ul>
                    <li><strong>Cost-Plus:</strong> Cost + Markup.</li>
                    <li><strong>Break-Even:</strong> Price covers costs exactly (0 profit).</li>
                </ul>

                <h4>Strategy 3: Competition-Based Pricing (The "Follower" Way)</h4>
                <p>Look at competitors. More value? Higher price. Less value? Lower price.</p>

                <h3>3. Essential Cost Terms</h3>
                <ul>
                    <li><strong>Fixed Costs (Overhead):</strong> Stay same (Rent, Salaries). Memory: "The Factory".</li>
                    <li><strong>Variable Costs:</strong> Go up with volume (Materials). Memory: "The Volume".</li>
                    <li><strong>Total Costs:</strong> Fixed + Variable.</li>
                </ul>

                <h3>4. The Economics Stuff</h3>
                <ul>
                    <li><strong>Demand Curve:</strong> Price ⬆️ = Demand ⬇️.</li>
                    <li><strong>Price Elasticity:</strong> Sensitivity to price.
                        <ul>
                            <li><strong>Inelastic:</strong> "Need it" (Gas).</li>
                            <li><strong>Elastic:</strong> "Too expensive, bye" (Vacation).</li>
                        </ul>
                    </li>
                </ul>
                <div class="tip-box">
                    <strong>Exam Tips:</strong><br>
                    - "Perception" = <strong>Value-Based</strong>.<br>
                    - "Markup" = <strong>Cost-Based</strong>.
                </div>
                `
            },
            {
                id: 'ch11', title: 'Ch 11: Pricing Strategies (Advanced)', content: `
                <h3>1. Pricing New Products</h3>
                <ul>
                    <li><strong>Market-Skimming:</strong> High initial price to "skim" revenue (Apple). Use when high quality/image.</li>
                    <li><strong>Market-Penetration:</strong> Low initial price to win share (Samsung/IKEA). Use when market is price-sensitive.</li>
                </ul>

                <h3>2. Product Mix Pricing</h3>
                <ul>
                    <li><strong>Product Line:</strong> Price steps (iPhone 14 vs Pro).</li>
                    <li><strong>Optional-Product:</strong> Main + Extras (Car + GPS).</li>
                    <li><strong>Captive-Product:</strong> Cheap main + Expensive supplies (Printer + Ink). Memory: "Trapped".</li>
                    <li><strong>By-Product:</strong> Selling waste (Sawdust).</li>
                    <li><strong>Product Bundle:</strong> Combo pack (McDonald's Meal).</li>
                </ul>

                <h3>3. Price Adjustment Strategies</h3>
                <ul>
                    <li><strong>Discount/Allowance:</strong> Cash discount, Trade-in.</li>
                    <li><strong>Segmented:</strong> Student/Senior discounts.</li>
                    <li><strong>Psychological:</strong> $100 perfume smells better than $10. Reference prices ("Was $100!").</li>
                    <li><strong>Promotional:</strong> Flash sales.</li>
                    <li><strong>Dynamic:</strong> Prices move with demand (Uber). Memory: "Movement".</li>
                </ul>

                <h3>4. Public Policy (The Illegal Stuff)</h3>
                <ul>
                    <li><strong>Price Fixing:</strong> Collusion with competitors.</li>
                    <li><strong>Predatory Pricing:</strong> Selling below cost to kill competition.</li>
                    <li><strong>Deceptive Pricing:</strong> Lying about original price.</li>
                </ul>
                `
            },
            {
                id: 'ch12', title: 'Ch 12: Marketing Channels – Delivering Value', content: `
                <h3>Theme: You can cut out the middleman, but you can't cut out their job.</h3>
                <p><strong>Value Delivery Network:</strong> It's a partnership. (Supplier -> Company -> Distributor -> Customer).</p>
                <p><em>Example:</em> Airbnb disrupted this by creating a new network.</p>

                <h3>2. How Channels Are Organized</h3>
                <ul>
                    <li><strong>Conventional:</strong> Everyone fights; lower profits.</li>
                    <li><strong>Vertical Marketing System (VMS):</strong> Teamwork.
                        <ul>
                            <li><strong>Corporate:</strong> Single ownership (Zara).</li>
                            <li><strong>Contractual:</strong> Franchise (McDonald's).</li>
                            <li><strong>Administered:</strong> Big player bullies (Walmart).</li>
                        </ul>
                    </li>
                    <li><strong>Horizontal:</strong> Two companies join (Starbucks inside Target).</li>
                </ul>

                <h3>3. Distribution Strategies</h3>
                <ul>
                    <li><strong>Intensive:</strong> Everywhere (Coke).</li>
                    <li><strong>Exclusive:</strong> Few places (Rolex).</li>
                    <li><strong>Selective:</strong> Middle (TVs).</li>
                </ul>

                <h3>4. Logistics (The Moving Stuff)</h3>
                <p>Goal: Right product, right place, right time, right cost.</p>
                <ul>
                    <li><strong>Warehousing:</strong> Storing.</li>
                    <li><strong>Inventory (JIT):</strong> Just-in-Time saves storage cost.</li>
                    <li><strong>Transportation:</strong> Truck (Flexible), Rail (Bulk), Water (Cheap/Slow), Air (Fast/Exp), Multimodal.</li>
                </ul>
                <div class="tip-box">
                    <strong>Exam Tips:</strong><br>
                    - <strong>Disintermediation:</strong> Killing the middleman (Spotify killed CD stores).<br>
                    - <strong>Upstream:</strong> Raw materials. <strong>Downstream:</strong> Retailers (Marketing focus).
                </div>
                `
            }
        ];


        const itNotes = [
            {
                id: 'it1', title: 'Topic 1: Introduction to IT in Business', content: `
                <h3>1. The Role of IT in Business</h3>
                <p>Information Technology (IT) is the use of computers, storage, networking, and other physical devices, infrastructure, and processes to create, process, store, secure, and exchange all forms of electronic data.</p>
                <ul>
                    <li><strong>Communication:</strong> Email, Video Conferencing, Slack.</li>
                    <li><strong>Efficiency:</strong> Automation of repetitive tasks.</li>
                    <li><strong>Decision Making:</strong> Data analytics and Business Intelligence (BI).</li>
                    <li><strong>Global Reach:</strong> E-commerce and remote work.</li>
                </ul>

                <h3>2. Components of an Information System</h3>
                <p>An Information System (IS) is a combination of:</p>
                <ol>
                    <li><strong>Hardware:</strong> Physical equipment (Computers, Servers).</li>
                    <li><strong>Software:</strong> Programs (OS, Applications).</li>
                    <li><strong>Data:</strong> Raw properties/facts.</li>
                    <li><strong>People:</strong> Users and IT professionals.</li>
                    <li><strong>Procedures:</strong> Rules and instructions.</li>
                </ol>
                <div class="mnemonic-box">💡 <strong>Remember:</strong> H-S-D-P-P (Hardware, Software, Data, People, Procedures).</div>
                `
            },
            {
                id: 'it2', title: 'Topic 2: General Computing Concepts', content: `
                <h3>1. Information Processing Cycle (IPOS)</h3>
                <p>All computers follow a standard cycle to convert raw data into useful information.</p>
                <ul>
                    <li><strong>Input:</strong> Entering raw data (e.g., typing on a keyboard, clicking a mouse).</li>
                    <li><strong>Process:</strong> The CPU converts that raw data into information based on instructions.</li>
                    <li><strong>Output:</strong> Displaying the result (e.g., monitor, printer, speaker).</li>
                    <li><strong>Storage:</strong> Saving data for later use (e.g., Hard Drive, Cloud, USB).</li>
                </ul>
                <div class="mnemonic-box">💡 <strong>Tip (Mnemonic):</strong> Remember "IPOS" — Input, Processing, Output, Storage.</div>
                
                <div class="tip-box">
                    <strong>Pizza Shop Analogy:</strong>
                    <ul>
                        <li><strong>Input:</strong> Taking the order (Raw data)</li>
                        <li><strong>Process:</strong> Cooking the pizza (Processing)</li>
                        <li><strong>Output:</strong> Serving the pizza to the customer (Information)</li>
                        <li><strong>Storage:</strong> Freezing leftovers for later (Saving)</li>
                    </ul>
                </div>

                <h3>2. Data Conversion & ASCII Code</h3>
                <p>Computers only understand Binary (0s and 1s). To bridge the gap between human language and computer machine language, we use encoding systems like ASCII.</p>
                
                <p><strong>What is ASCII?</strong></p>
                <ul>
                    <li><strong>Acronym:</strong> American Standard Code for Information Interchange.</li>
                    <li><strong>Function:</strong> It assigns a unique numeric value to every character (letters, numbers, symbols) so the computer can store it as binary.</li>
                    <li><strong>Structure:</strong>
                        <ul>
                            <li>Standard ASCII uses 7 bits (representing 128 characters, 0–127).</li>
                            <li>Extended ASCII uses 8 bits (representing 256 characters, 0–255) to include more symbols.</li>
                        </ul>
                    </li>
                </ul>

                <p><strong>Key ASCII Values to Remember:</strong></p>
                <ul>
                    <li><strong>"A" (Uppercase):</strong> starts at 65.</li>
                    <li><strong>"a" (Lowercase):</strong> starts at 97.</li>
                    <li><strong>"0" (Number):</strong> starts at 48.</li>
                    <li><strong>Space:</strong> is 32.</li>
                </ul>

                <div class="mnemonic-box">
                    ⚡ <strong>Trick for Conversion:</strong> Uppercase to Lowercase: Add 32.<br>
                    Example: 'A' is 65. 65 + 32 = 97, which is 'a'.<br>
                    <em>Why 32? In binary, 32 is a single bit flip (2<sup>5</sup>). This makes it very easy for the CPU to switch cases just by flipping one bit!</em>
                </div>

                <h3>3. The Core Hardware: CPU vs. RAM</h3>
                <p>These two work together to run every task on your computer.</p>

                <h4>CPU (Central Processing Unit)</h4>
                <ul>
                    <li><strong>Role:</strong> The "Brain" of the computer. It fetches instructions, decodes them, and executes them (The Fetch-Decode-Execute Cycle).</li>
                    <li><strong>Speed:</strong> Measured in GHz (Billions of cycles per second).</li>
                    <li><strong>Components:</strong>
                        <ul>
                            <li><strong>ALU (Arithmetic Logic Unit):</strong> Does the math (+ - × ÷) and logic (True/False).</li>
                            <li><strong>CU (Control Unit):</strong> Directs traffic; tells data where to go.</li>
                        </ul>
                    </li>
                </ul>

                <h4>RAM (Random Access Memory)</h4>
                <ul>
                    <li><strong>Role:</strong> The "Workspace" or "Short-term Memory". It holds data currently in use for quick access by the CPU.</li>
                    <li><strong>Volatile:</strong> If you turn the power off, everything in RAM is deleted.</li>
                </ul>

                <div class="tip-box">
                    <strong>The Kitchen Analogy:</strong>
                    <ul>
                        <li><strong>CPU (The Chef):</strong> Processes the ingredients (data). A faster chef chops faster.</li>
                        <li><strong>RAM (The Countertop):</strong> Where ingredients are placed for immediate cooking. Low RAM = Small counter = Chef wastes time walking to pantry.</li>
                        <li><strong>Hard Drive (The Pantry):</strong> Where ingredients are stored long-term. Huge capacity, but slower to access.</li>
                    </ul>
                </div>

                <h3>4. Client-Server Architecture</h3>
                <p>This is how modern networks (like the Internet) are organized.</p>
                <ul>
                    <li><strong>The Client (Requester):</strong> The device asking for information (e.g., Chrome, mobile app).</li>
                    <li><strong>The Server (Provider):</strong> A powerful computer that stores resources and "serves" them (e.g., Web servers, Email servers, Database servers).</li>
                </ul>

                <p><strong>How they talk (Request-Response Loop):</strong></p>
                <ol>
                    <li><strong>Request:</strong> The Client sends a message.</li>
                    <li><strong>Process:</strong> The Server finds the file or runs the query.</li>
                    <li><strong>Response:</strong> The Server sends the data back to the Client to be displayed.</li>
                </ol>

                <div class="mnemonic-box">
                    💡 <strong>Tip:</strong> Think of a Restaurant.<br>
                    <strong>Client</strong> = Hungry Customer (You).<br>
                    <strong>Server</strong> = The Waiter/Kitchen (Fulfills your request).<br>
                    <strong>Request</strong> = Your Order.<br>
                    <strong>Response</strong> = The Food.
                </div>

                <h3>Summary Checklist for Finals</h3>
                <ul class="checklist">
                    <li>[ ] <strong>IPOS:</strong> Can you name the 4 stages? (Input, Process, Output, Storage)</li>
                    <li>[ ] <strong>ASCII:</strong> Do you know that 'A'=65 and 'a'=97?</li>
                    <li>[ ] <strong>CPU vs RAM:</strong> Remember "Chef vs Countertop."</li>
                    <li>[ ] <strong>Client-Server:</strong> Remember "Customer vs Waiter."</li>
                </ul>
                `
            },
            {
                id: 'it3', title: 'Topic 3: Number Systems', content: `
                <h3>1. Number System Conversions</h3>
                
                <h4>A. Decimal to Binary</h4>
                <p><strong>Method:</strong> Repeated Division by 2.</p>
                <ul>
                    <li><strong>Process:</strong> Divide the decimal number by 2, record the remainder (0 or 1), and repeat with the quotient until it reaches 0.</li>
                    <li><strong>Reading the Result:</strong> Read remainders from <strong>Bottom to Top</strong> (MSD to LSD).</li>
                </ul>
                <div class="example">
                    <strong>Example:</strong> Convert 139<sub>10</sub> to binary<br>
                    139 ÷ 2 = 69 remainder 1<br>
                    69 ÷ 2 = 34 remainder 1<br>
                    34 ÷ 2 = 17 remainder 0<br>
                    17 ÷ 2 = 8 remainder 1<br>
                    8 ÷ 2 = 4 remainder 0<br>
                    4 ÷ 2 = 2 remainder 0<br>
                    2 ÷ 2 = 1 remainder 0<br>
                    1 ÷ 2 = 0 remainder 1<br><br>
                    Reading bottom to top: <strong>10001011<sub>2</sub></strong>
                </div>

                <h4>B. Binary to Decimal</h4>
                <p><strong>Method:</strong> Sum of Powers of 2.</p>
                <p><strong>Process:</strong> Multiply each bit by 2<sup>n</sup> (where n is the position starting from 0 on the right) and sum them up.</p>
                <div class="example">
                    <strong>Example:</strong> 10001011<sub>2</sub><br>
                    = (1×2<sup>7</sup>) + (0×2<sup>6</sup>) + (0×2<sup>5</sup>) + (0×2<sup>4</sup>) + (1×2<sup>3</sup>) + (0×2<sup>2</sup>) + (1×2<sup>1</sup>) + (1×2<sup>0</sup>)<br>
                    = 128 + 0 + 0 + 0 + 8 + 0 + 2 + 1<br>
                    = <strong>139<sub>10</sub></strong>
                </div>

                <h4>C. Binary ↔ Octal (Base 8)</h4>
                <p><strong>Rule:</strong> Group bits by 3.</p>
                <ul>
                    <li><strong>Binary to Octal:</strong> Starting from the binary point (right), separate bits into groups of three. Replace each group with the octal digit.</li>
                </ul>
                <div class="example">
                    <strong>Example:</strong> 10001011<sub>2</sub><br>
                    Group by 3 from right: <strong>10 001 011</strong><br>
                    010 = 2, 001 = 1, 011 = 3<br>
                    Result: <strong>213<sub>8</sub></strong>
                </div>
                <ul>
                    <li><strong>Octal to Binary:</strong> Replace each octal digit with its corresponding 3-bit binary string.</li>
                </ul>

                <h4>D. Binary ↔ Hexadecimal (Base 16)</h4>
                <p><strong>Rule:</strong> Group bits by 4.</p>
                <ul>
                    <li><strong>Binary to Hex:</strong> Starting from the right, separate bits into groups of four. Replace with the hex digit.</li>
                </ul>
                <div class="example">
                    <strong>Example:</strong> 10001011<sub>2</sub><br>
                    Group by 4 from right: <strong>1000 1011</strong><br>
                    1000 = 8, 1011 = B (11 in decimal)<br>
                    Result: <strong>8B<sub>16</sub></strong>
                </div>
                <ul>
                    <li><strong>Hex to Binary:</strong> Replace each hex digit with its corresponding 4-bit binary string.</li>
                </ul>

                <div class="mnemonic-box">
                    ⚡ <strong>Trick for Conversions:</strong><br>
                    • Octal = 3 bits (2<sup>3</sup> = 8)<br>
                    • Hex = 4 bits (2<sup>4</sup> = 16)<br>
                    • Always group from <strong>Right to Left</strong>. If the last group doesn't have enough bits, add leading zeros.
                </div>

                <h3>2. Binary Arithmetic</h3>

                <h4>A. Binary Addition</h4>
                <p><strong>Rules:</strong></p>
                <ul>
                    <li>0 + 0 = 0</li>
                    <li>0 + 1 = 1</li>
                    <li>1 + 0 = 1</li>
                    <li>1 + 1 = 10 (Sum = 0, Carry = 1)</li>
                    <li>1 + 1 + 1 = 11 (Sum = 1, Carry = 1)</li>
                </ul>

                <h4>B. Binary Subtraction</h4>
                <p><strong>Rules:</strong></p>
                <ul>
                    <li>0 - 0 = 0</li>
                    <li>1 - 1 = 0</li>
                    <li>1 - 0 = 1</li>
                    <li>10 - 1 = 1 (This happens when you borrow from the left)</li>
                </ul>

                <h4>C. Binary Multiplication</h4>
                <p><strong>Rules:</strong></p>
                <ul>
                    <li>Works exactly like decimal multiplication.</li>
                    <li>1 × 1 = 1</li>
                    <li>Anything multiplied by 0 is 0</li>
                    <li>Shift the rows to the left as you multiply by higher place values, then add the results.</li>
                </ul>

                <h3>3. Complements (Signed Numbers)</h3>

                <h4>A. 1's Complement</h4>
                <p><strong>Method:</strong> Invert every bit.</p>
                <p>Change all 0s to 1s and all 1s to 0s.</p>
                <div class="example">
                    <strong>Example:</strong><br>
                    Original: 11001010<br>
                    1's Complement: <strong>00110101</strong>
                </div>

                <h4>B. 2's Complement</h4>
                <p><strong>Method:</strong> 1's Complement + 1.</p>
                <ul>
                    <li><strong>Step 1:</strong> Find the 1's complement (invert digits).</li>
                    <li><strong>Step 2:</strong> Add 1 to the result.</li>
                </ul>
                <div class="example">
                    <strong>Example:</strong><br>
                    Original: 11001010<br>
                    1's Comp: 00110101<br>
                    Add 1: 00110101 + 1 = <strong>00110110</strong>
                </div>

                <div class="mnemonic-box">
                    💡 <strong>Tip for 2's Complement:</strong><br>
                    This is how computers represent negative numbers.<br><br>
                    <strong>Shortcut:</strong> Start from the right side of the binary number. Copy all zeros and the first '1' you see. Then, invert every bit after that (to the left).<br><br>
                    <strong>Try it on 11001010:</strong><br>
                    Right to left: 0 (copy), 1 (copy first 1). Now invert the rest: 0→1, 1→0, 0→1, 0→1, 1→0, 1→0.<br>
                    Result: <strong>00110110</strong> (Matches the calculation!)
                </div>
                `
            },
            {
                id: 'it4', title: 'Topic 4: Information System Details', content: `
                <h3>1. Components of an Information System</h3>
                <p>An Information System (IS) is more than just computers; it is an organized combination of people, hardware, software, communications networks, data resources, and policies.</p>

                <h4>A. People Resources</h4>
                <p>People are the essential element for the successful operation of all information systems.</p>
                <ul>
                    <li><strong>End Users (Users/Clients):</strong> People who use an information system or the information it produces (e.g., accountants, salespersons, customers, managers).</li>
                    <li><strong>IS Specialists:</strong> People who develop and operate information systems (e.g., systems analysts, software developers, system operators).</li>
                </ul>

                <h4>B. Data Resources</h4>
                <p>Data is the raw material of an information system.</p>
                <ul>
                    <li><strong>Data vs. Information:</strong> Data are raw facts (e.g., "36,000 pounds"). Information is data that has been converted into a meaningful and useful context for end users (e.g., "Shipping Costs Report").</li>
                    <li><strong>Forms:</strong> Text, numbers, images, audio, and video.</li>
                    <li><strong>Storage:</strong> Data is typically organized into:
                        <ul>
                            <li><strong>Databases:</strong> Collections of logically related records.</li>
                            <li><strong>Knowledge Bases:</strong> Collections of facts, rules, and case examples (used in expert systems).</li>
                        </ul>
                    </li>
                </ul>

                <h4>C. Technology Resources (Hardware, Software, Networks)</h4>
                <p><strong>Hardware Resources:</strong> All physical devices and materials used in information processing.</p>
                <ul>
                    <li><strong>Machines:</strong> Computers, monitors, drives, printers.</li>
                    <li><strong>Media:</strong> Tangible objects on which data is recorded (e.g., paper forms, magnetic disks, flash drives).</li>
                </ul>

                <p><strong>Software Resources:</strong> All sets of information processing instructions.</p>
                <ul>
                    <li><strong>Programs:</strong> Instructions that direct the computer hardware (e.g., Operating Systems, Application programs).</li>
                    <li><strong>Procedures:</strong> Instructions for people who will use the information system (e.g., User manuals, data entry protocols).</li>
                </ul>

                <p><strong>Network Resources:</strong></p>
                <ul>
                    <li><strong>Communications Media:</strong> Twisted-pair wire, fiber-optic cable, microwave, cellular, and satellite wireless systems.</li>
                    <li><strong>Network Infrastructure:</strong> Hardware and software needed to support the network (e.g., modems, routers, network operating systems).</li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Preparation Tip:</strong> Remember the 5-Component Model: People, Hardware, Software, Data, and Networks. If asked specifically about "Resources," group Hardware, Software, and Networks under "Technology Resources."
                </div>

                <h3>2. Information System Types (The Pyramid Model)</h3>
                <p>Information systems are often classified by the level of organization they support.</p>

                <h4>A. Transaction Processing Systems (TPS)</h4>
                <ul>
                    <li><strong>Level:</strong> Operational Level (Day-to-day operations).</li>
                    <li><strong>Function:</strong> Records and processes data resulting from business transactions. They capture the raw data that feeds other systems.</li>
                    <li><strong>Examples:</strong> Point-of-sale (POS) systems, payroll processing, inventory tracking, airline reservation systems.</li>
                    <li><strong>Key Characteristic:</strong> High volume, repetitive, high accuracy required.</li>
                </ul>

                <h4>B. Management Information Systems (MIS)</h4>
                <ul>
                    <li><strong>Level:</strong> Management Level.</li>
                    <li><strong>Function:</strong> Provides managers with specified information or pre-defined reports to support decision-making. It summarizes data from the TPS.</li>
                    <li><strong>Output:</strong> Periodic, exception, and demand reports.</li>
                    <li><strong>Examples:</strong> Sales performance reports, budget variance reports.</li>
                    <li><strong>Key Characteristic:</strong> Reports on what has happened (historical focus).</li>
                </ul>

                <h4>C. Decision Support Systems (DSS)</h4>
                <ul>
                    <li><strong>Level:</strong> Management/Strategic Level.</li>
                    <li><strong>Function:</strong> Provides interactive information support to managers during the decision-making process. It helps solve semi-structured and unstructured problems.</li>
                    <li><strong>Features:</strong> Uses analytical models (like "What-If" analysis) and specialized databases.</li>
                    <li><strong>Examples:</strong> Pricing modeling, risk analysis systems, loan application analyzers.</li>
                    <li><strong>Key Characteristic:</strong> Interactive; asks "What if we change this variable?".</li>
                </ul>

                <h4>D. Executive Support Systems (ESS)</h4>
                <p><em>(Also known as Executive Information Systems - EIS)</em></p>
                <ul>
                    <li><strong>Level:</strong> Strategic Level (Top Executives).</li>
                    <li><strong>Function:</strong> Provides critical information from specific internal and external sources in easy-to-use formats to executives.</li>
                    <li><strong>Features:</strong> Digital Dashboards, drill-down capability (starting with a summary and clicking for details).</li>
                    <li><strong>Examples:</strong> A CEO's dashboard showing real-time company stock price, competitor news, and global sales summaries.</li>
                    <li><strong>Key Characteristic:</strong> Highly visual, easy to use, focuses on "Strategic Critical Success Factors."</li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Differentiate them by Time Horizon:</strong><br>
                    • <strong>TPS:</strong> Now (Real-time transactions).<br>
                    • <strong>MIS:</strong> Past (Weekly/Monthly reports).<br>
                    • <strong>DSS:</strong> Future (Forecasting/Modeling).<br>
                    • <strong>ESS:</strong> Big Picture (Strategic Long-term).
                </div>

                <h3>3. System Software</h3>
                <p>System software consists of programs that manage and support a computer system and its information processing activities. It acts as the interface between the hardware and the application software.</p>

                <h4>A. Operating System (OS)</h4>
                <p><strong>Definition:</strong> An integrated system of programs that supervises the CPU, controls input/output functions, and provides support services.</p>
                <p><strong>Key Functions:</strong></p>
                <ul>
                    <li><strong>User Interface:</strong> How you interact with the computer (CLI or GUI).</li>
                    <li><strong>Resource Management:</strong> Managing memory (RAM), processor time, and storage files.</li>
                    <li><strong>Task Management:</strong> Multitasking and scheduling programs.</li>
                    <li><strong>File Management:</strong> Keeping track of where files are stored.</li>
                </ul>
                <p><strong>Examples:</strong> Windows (XP, 2000, 10), macOS, Linux, UNIX, Android.</p>

                <h4>B. BIOS (Basic Input/Output System) or Firmware</h4>
                <p><strong>Definition:</strong> Firmware is software that is permanently stored on a chip (ROM - Read Only Memory). The BIOS is a specific type of firmware used during the startup process.</p>
                <p><strong>Function:</strong></p>
                <ul>
                    <li><strong>POST (Power-On Self-Test):</strong> When you turn on the computer, the BIOS checks to see if the hardware (RAM, keyboard, drives) is functioning.</li>
                    <li><strong>Bootstrapping:</strong> It locates the Operating System on the hard drive and loads it into RAM.</li>
                </ul>
                <p><strong>Key Characteristic:</strong> It bridges the gap between the raw hardware and the Operating System.</p>

                <div class="mnemonic-box">
                    💡 <strong>Preparation Tip:</strong> Think of the BIOS as the "starter motor" of a car (gets things going) and the OS as the "driver" (controls the car while it's running).
                </div>

                <h3>4. Application Software</h3>
                <p>Programs that direct the processing of a particular use or application for end users.</p>

                <h4>A. Word Processing</h4>
                <ul>
                    <li><strong>Type:</strong> General-Purpose Productivity Tool.</li>
                    <li><strong>Function:</strong> Creation, editing, formatting, and printing of documents.</li>
                    <li><strong>Features:</strong> Spell check, grammar check, thesaurus, formatting (bold, italic), mail merge.</li>
                    <li><strong>Examples:</strong> Microsoft Word, Google Docs, Corel WordPerfect.</li>
                </ul>

                <h4>B. Multimedia</h4>
                <ul>
                    <li><strong>Type:</strong> Graphics and Media.</li>
                    <li><strong>Function:</strong> Integrates various forms of media—text, graphics, audio, and video.</li>
                    <li><strong>Types:</strong>
                        <ul>
                            <li><strong>Presentation Graphics:</strong> (e.g., PowerPoint) for creating slide shows.</li>
                            <li><strong>Image Editing:</strong> (e.g., Photoshop) for modifying digital photos.</li>
                            <li><strong>Video/Audio Editing:</strong> (e.g., Premiere Pro) for cutting and arranging clips.</li>
                        </ul>
                    </li>
                </ul>

                <h4>C. Games</h4>
                <ul>
                    <li><strong>Type:</strong> Entertainment/Simulation.</li>
                    <li><strong>Function:</strong> Interactive software designed for entertainment or educational simulation.</li>
                    <li><strong>Examples:</strong> 3D Simulations, Strategy games, Educational puzzles.</li>
                    <li><strong>Tech Note:</strong> Often requires high-performance hardware (GPUs) for real-time rendering.</li>
                </ul>

                <h4>D. Tools (Utilities)</h4>
                <ul>
                    <li><strong>Type:</strong> System Utility / Maintenance.</li>
                    <li><strong>Function:</strong> Performs housekeeping chores to keep the computer running efficiently.</li>
                    <li><strong>Examples:</strong>
                        <ul>
                            <li><strong>Backup Utilities:</strong> Copying data to safe storage.</li>
                            <li><strong>Antivirus:</strong> Scanning for malware.</li>
                            <li><strong>Disk Defragmenter:</strong> Reorganizing files on a hard drive to speed up access.</li>
                            <li><strong>Compression:</strong> (e.g., WinZip) reducing file size.</li>
                        </ul>
                    </li>
                </ul>

                <h3>5. Enterprise Systems (ERP & CRM)</h3>
                <p>These are "Cross-Functional Enterprise Systems" designed to break down the walls between different departments (like marketing, finance, and manufacturing).</p>

                <h4>A. ERP (Enterprise Resource Planning)</h4>
                <ul>
                    <li><strong>Focus:</strong> Internal efficiency.</li>
                    <li><strong>Definition:</strong> A software suite that integrates the core functional areas of a business (Finance, HR, Manufacturing, Supply Chain) into a single system with a shared database.</li>
                    <li><strong>Goal:</strong> To streamline internal business processes and improve the flow of information across the organization.</li>
                    <li><strong>Example:</strong> When a salesperson enters an order, the ERP system automatically checks inventory, schedules production, alerts the warehouse, and updates the finance ledgers simultaneously.</li>
                </ul>

                <h4>B. CRM (Customer Relationship Management)</h4>
                <ul>
                    <li><strong>Focus:</strong> External relationships (Customers).</li>
                    <li><strong>Definition:</strong> A system that manages a company's interactions with current and future customers.</li>
                    <li><strong>Goal:</strong> To optimize revenue, customer satisfaction, and retention.</li>
                    <li><strong>Components:</strong>
                        <ul>
                            <li><strong>Sales Force Automation:</strong> Tracking leads and sales progress.</li>
                            <li><strong>Customer Support:</strong> Managing complaints and service requests.</li>
                            <li><strong>Marketing Automation:</strong> Targeted email campaigns and promotions.</li>
                        </ul>
                    </li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Preparation Tip:</strong><br>
                    • <strong>ERP</strong> is the "Backbone" (Spine) of the company—keeps the internal organs working together.<br>
                    • <strong>CRM</strong> is the "Face" of the company—manages how the company looks and talks to the outside world (customers).
                </div>
                `
            },
            {
                id: 'it5', title: 'Topic 5: Python Programming', content: `
                <h3>1. Variables (Naming Conventions)</h3>
                <p><strong>Definition:</strong> Variables are containers for storing data values created the moment you assign a value.</p>
                
                <h4>Naming Rules:</h4>
                <ul>
                    <li>A variable name must start with a letter or the underscore character.</li>
                    <li>A variable name cannot start with a number.</li>
                    <li>Variable names can only contain alpha-numeric characters and underscores (A-z, 0-9, and _ ).</li>
                    <li>Variable names are case-sensitive (e.g., <code>age</code>, <code>Age</code>, and <code>AGE</code> are three different variables).</li>
                </ul>

                <div class="tip-box">
                    <strong>Tips & Tricks:</strong><br>
                    • <strong>Readability:</strong> Use snake_case (e.g., <code>my_variable_name</code>) for multi-word variables to make them readable.<br>
                    • <strong>Meaningful Names:</strong> Avoid single letters like <code>x</code> or <code>y</code> in complex scripts; use <code>user_age</code> or <code>total_price</code> instead.<br>
                    • <strong>Avoid Keywords:</strong> Never use Python keywords (like <code>if</code>, <code>for</code>, <code>class</code>, <code>list</code>) as variable names.
                </div>

                <h3>2. Data Types (int, float, and string)</h3>
                
                <h4>Numeric Types:</h4>
                <ul>
                    <li><strong>int (Integer):</strong> A whole number, positive or negative, without decimals, of unlimited length.</li>
                    <li><strong>float (Floating Point):</strong> A number, positive or negative, containing one or more decimals. It can also be a scientific number with an "e" to indicate the power of 10.</li>
                    <li><strong>Complex:</strong> Written with a "j" as the imaginary part (e.g., <code>3+5j</code>).</li>
                </ul>

                <h4>Text Type (String):</h4>
                <ul>
                    <li>Defined as <code>str</code> in Python.</li>
                    <li>Strings are sequences of characters enclosed in single (<code>' '</code>) or double (<code>" "</code>) quotes.</li>
                </ul>

                <h4>Type Conversion:</h4>
                <p>You can convert between types using the <code>int()</code>, <code>float()</code>, and <code>complex()</code> methods.</p>

                <div class="tip-box">
                    <strong>Tips & Tricks:</strong><br>
                    • <strong>Integer Division:</strong> Remember that normal division <code>/</code> always returns a float (e.g., <code>4 / 2</code> is <code>2.0</code>). Use <code>//</code> for integer (floor) division.<br>
                    • <strong>Float Precision:</strong> Be careful when comparing floats directly due to precision issues.<br>
                    • <strong>String Immutability:</strong> Strings cannot be changed once created. Any modification creates a new string.
                </div>

                <h3>3. Python Collections (List, Tuple & Sets)</h3>

                <h4>Lists (list):</h4>
                <p><strong>Properties:</strong> Ordered, changeable (mutable), and allow duplicate values.</p>
                <ul>
                    <li><strong>Syntax:</strong> Created using square brackets <code>[]</code>.</li>
                    <li><strong>Indexing:</strong> Zero-based index; the first item is <code>[0]</code>, the second is <code>[1]</code>.</li>
                    <li><strong>Negative Indexing:</strong> <code>-1</code> refers to the last item, <code>-2</code> to the second last.</li>
                    <li><strong>Modifying:</strong> You can change, add, and remove items after creation.</li>
                </ul>

                <p><strong>Key Methods:</strong></p>
                <ul>
                    <li><code>len()</code>: Determines the number of items.</li>
                    <li><code>insert()</code>: Adds an item at a specified index.</li>
                    <li><code>append()</code>: Adds an item to the end of the list.</li>
                    <li><code>extend()</code>: Appends elements from another list.</li>
                    <li><code>sort()</code> / <code>reverse()</code>: Sorts or reverses the order.</li>
                </ul>

                <h4>Tuples (tuple):</h4>
                <p><strong>Properties:</strong> Ordered and unchangeable (immutable).</p>
                <ul>
                    <li><strong>Syntax:</strong> Written with round brackets <code>()</code>.</li>
                    <li><strong>Workaround for Changes:</strong> You cannot add/remove items directly. You must convert the tuple to a list, make changes, and convert it back to a tuple.</li>
                    <li><strong>Packing/Unpacking:</strong> Assigning values to a tuple is "packing". Extracting them back into variables is "unpacking".</li>
                </ul>

                <h4>Sets (set):</h4>
                <p><strong>Properties:</strong> Unordered, unindexed, and do not allow duplicate values.</p>
                <ul>
                    <li><strong>Syntax:</strong> Written with curly brackets <code>{}</code>.</li>
                    <li><strong>Usage:</strong> Best for membership testing (checking if an item exists) and eliminating duplicates.</li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Choosing the Right Type:</strong><br>
                    • Use <strong>Lists</strong> for data that may change or needs to be ordered.<br>
                    • Use <strong>Tuples</strong> for data that should not change (like coordinates), as they are faster and memory-efficient.<br>
                    • Use <strong>Sets</strong> to instantly remove duplicates from a list: <code>list(set(my_list))</code>.<br><br>
                    <strong>Copying Lists:</strong> Don't just do <code>list2 = list1</code>. This creates a reference, not a copy. Use <code>list2 = list1.copy()</code> or <code>list2 = list1[:]</code>.
                </div>

                <h3>4. Conditional Structures</h3>
                <p><strong>Logic:</strong> Uses comparison and logical operators to determine the flow of execution.</p>

                <h4>Structures:</h4>
                <ul>
                    <li><strong>if:</strong> Executes code only if a condition is True.</li>
                    <li><strong>elif:</strong> "Else if" - checks a new condition if the previous conditions were False.</li>
                    <li><strong>else:</strong> Executes code if all previous conditions were False.</li>
                    <li><strong>Nested if:</strong> An if statement inside another if statement.</li>
                </ul>

                <div class="tip-box">
                    <strong>Tips & Tricks:</strong><br>
                    • <strong>Indentation:</strong> Python relies on indentation (whitespace). Ensure all code inside an if block is indented consistently.<br>
                    • <strong>Short-hand:</strong> Use ternary operators for simple assignments: <code>status = "Adult" if age >= 18 else "Minor"</code>.<br>
                    • <strong>Truthiness:</strong> Empty lists <code>[]</code>, strings <code>""</code>, and the number <code>0</code> evaluate to False in conditions.
                </div>

                <h3>5. Operators</h3>

                <h4>Arithmetic Operators:</h4>
                <p>Used for mathematical operations.</p>
                <ul>
                    <li><code>+</code> (Add), <code>-</code> (Subtract), <code>*</code> (Multiply), <code>/</code> (Divide).</li>
                    <li><code>%</code> (Modulus/Remainder), <code>**</code> (Exponentiation), <code>//</code> (Floor Division).</li>
                </ul>

                <h4>Assignment Operators:</h4>
                <p>Used to assign values.</p>
                <ul>
                    <li><code>=</code> (Assign), <code>+=</code> (Add and assign), <code>-=</code> (Subtract and assign), etc.</li>
                </ul>

                <h4>Comparison Operators:</h4>
                <p>Used to compare two values.</p>
                <ul>
                    <li><code>==</code> (Equal), <code>!=</code> (Not equal).</li>
                    <li><code>&lt;</code> (Less than), <code>&gt;</code> (Greater than), <code>&lt;=</code> (Less than or equal), <code>&gt;=</code> (Greater than or equal).</li>
                </ul>

                <h4>Logical Operators:</h4>
                <p>Used to combine conditional statements.</p>
                <ul>
                    <li><code>and</code> (Returns True if both are true).</li>
                    <li><code>or</code> (Returns True if one is true).</li>
                    <li><code>not</code> (Reverse the result).</li>
                </ul>

                <h4>Identity Operators:</h4>
                <p>Compare objects, not just values.</p>
                <ul>
                    <li><code>is</code> (Returns True if variables are the same object).</li>
                    <li><code>is not</code> (Returns True if variables are not the same object).</li>
                </ul>

                <h4>Membership Operators:</h4>
                <p>Test if a sequence is present in an object.</p>
                <ul>
                    <li><code>in</code> (Returns True if a value is found in the sequence).</li>
                    <li><code>not in</code> (Returns True if a value is not found).</li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Tips & Tricks:</strong><br>
                    • <strong>== vs is:</strong> Use <code>==</code> for value equality (e.g., <code>a == b</code>). Use <code>is</code> for checking if they are the exact same object in memory (e.g., checking for <code>None</code>).<br>
                    • <strong>Chaining:</strong> You can chain comparisons: <code>if 0 &lt; x &lt; 10:</code> is valid Python.<br>
                    • <strong>Modulus %:</strong> Great for checking even/odd numbers (<code>x % 2 == 0</code>) or cycling through indices.
                </div>
                `
            },
            {
                id: 'it6', title: 'Topic 6: SDLC', content: `
                <h3>1. SDLC Phases & Artifacts</h3>
                <p>The SDLC is a framework describing the activities performed at each stage of a software development project.</p>

                <h4>Phase 1: Planning and Requirements</h4>
                <p><strong>Description:</strong> This is the first and most important phase. The Business Analyst collects the client's requirements. This information is used to plan the basic project approach, expenditure, risk analysis, and technical analysis.</p>
                <p><strong>Artifact (Output):</strong> <strong>BRS (Business Requirement Specification)</strong>. This document is prepared after planning to outline the high-level business needs.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Focus on the "why" in this phase. If the requirements are wrong here, the cost to fix them effectively doubles with every subsequent phase.
                </div>

                <h4>Phase 2: Analysis</h4>
                <p><strong>Description:</strong> The requirements are analyzed in depth to define what the system should do.</p>
                <p><strong>Artifact (Output):</strong> <strong>SRS (Software Requirement Specification)</strong>. This is derived from the BRS and contains all product requirements to be designed and developed.</p>
                <p><strong>Sub-Artifacts:</strong> Based on the SRS, two detailed documents are often created:</p>
                <ul>
                    <li>FRS (Functional Requirement Specification)</li>
                    <li>System Requirement Specification</li>
                </ul>
                <div class="tip-box">
                    <strong>Tip:</strong> The SRS is your "contract" for the project scope. If it's not in the SRS, it's technically not required.
                </div>

                <h4>Phase 3: Designing</h4>
                <p><strong>Description:</strong> Product architecture is proposed based on the SRS.</p>
                <p><strong>Artifact (Output):</strong> <strong>DDS (Design Document Specification)</strong></p>
                <p><strong>Sub-Artifacts:</strong></p>
                <ul>
                    <li><strong>HLD (High-Level Design):</strong> Overview of architecture (often done by System Architect).</li>
                    <li><strong>LLD (Low-Level Design):</strong> Detailed internal logic of modules.</li>
                </ul>
                <div class="tip-box">
                    <strong>Tip:</strong> HLD is about "Architecture" (database design, interface relationships), while LLD is about "Logic" (algorithms, pseudo-code).
                </div>

                <h4>Phase 4: Development (Building)</h4>
                <p><strong>Description:</strong> The actual coding of the project takes place here. Developers convert the design documents into executable code.</p>
                <p><strong>Artifact (Output):</strong> Source Code / Executable Software.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> This is usually the longest phase in the Waterfall model but can be short and repetitive in Agile.
                </div>

                <h4>Phase 5: Testing</h4>
                <p><strong>Description:</strong> The software is executed to find defects. It ensures the product meets the requirements specified in the SRS.</p>
                <p><strong>Artifact (Output):</strong> Test Reports, Bug Reports.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Testing isn't just about finding bugs; it's about verifying the "Expected Result" matches the "Actual Result".
                </div>

                <h4>Phase 6: Deployment & Maintenance</h4>
                <p><strong>Description:</strong> The product is released to the market/client. Maintenance involves updating the product or fixing issues reported by users after release.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Maintenance is often the most expensive phase over the life of the software because it lasts the longest.
                </div>

                <h3>2. SDLC Models</h3>
                <p>Different projects require different approaches. These models define how the phases interact.</p>

                <h4>Waterfall Model</h4>
                <p><strong>Concept:</strong> The "Classic" model. It is linear and sequential. You must finish one phase completely before starting the next.</p>
                <ul>
                    <li><strong>Pros:</strong> Simple to manage, easy to understand.</li>
                    <li><strong>Cons:</strong> Inflexible. You cannot go back to change requirements once the testing phase starts without significant cost.</li>
                </ul>
                <div class="tip-box">
                    <strong>Tip:</strong> Use this only when requirements are crystal clear and unchanging (e.g., a simple payroll system).
                </div>

                <h4>V-Shaped Model (Verification and Validation)</h4>
                <p><strong>Concept:</strong> An extension of Waterfall where testing is planned in parallel with the corresponding development phase. For every development step on the left side of the "V", there is a testing step on the right.</p>
                <p><strong>Phases Mapping:</strong></p>
                <ul>
                    <li>Requirements Planning ↔ Acceptance Testing</li>
                    <li>Product Specification ↔ System Testing</li>
                    <li>High-Level Design ↔ Integration Testing</li>
                    <li>Detailed Design ↔ Unit Testing</li>
                </ul>
                <div class="mnemonic-box">
                    💡 <strong>Tip:</strong> "Verification" asks "Are we building the product right?" (Development). "Validation" asks "Are we building the right product?" (Testing).
                </div>

                <h4>Iterative Model</h4>
                <p><strong>Concept:</strong> Develop a system through repeated cycles (iterations) and in smaller portions at a time (incremental).</p>
                <p><strong>Process:</strong> You start with a simple implementation of a subset of requirements and iteratively enhance the evolving versions until the full system is implemented.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Great for projects where the major requirements are known, but some details might evolve over time.
                </div>

                <h4>Spiral Model</h4>
                <p><strong>Concept:</strong> Combines elements of design and prototyping-in-stages to combine the advantages of top-down and bottom-up concepts. Risk Analysis is the key feature here.</p>
                <p><strong>Weaknesses:</strong> Risk assessment expertise is required, and it can be complex and expensive for small projects.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Use this for large, expensive, and complicated projects (like flight control systems) where failure is not an option.
                </div>

                <h4>Agile Model</h4>
                <p><strong>Concept:</strong> Focuses on continuous iteration of development and testing throughout the SDLC. It emphasizes individuals and interactions over processes and tools.</p>
                <p><strong>Key:</strong> Customer collaboration is prioritized over contract negotiation.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Agile is a mindset, not just a process. It breaks the product into small "sprints" (usually 2-4 weeks) delivering working software frequently.
                </div>

                <h3>3. Testing Types</h3>
                <p>Testing ensures the quality of the software by finding defects before the users do.</p>

                <h4>Unit Testing</h4>
                <p><strong>Definition:</strong> Testing of individual modules or components of the software.</p>
                <p><strong>Who does it:</strong> Usually the Developers.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> This is "White Box" testing because the tester looks at the internal code logic.
                </div>

                <h4>Integration Testing</h4>
                <p><strong>Definition:</strong> Testing new code in combination with code that has already been integrated. It verifies that different modules work together correctly.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Finds issues in the "interfaces" (data passing) between modules.
                </div>

                <h4>System Testing</h4>
                <p><strong>Definition:</strong> Execution of the entire software for the purpose of finding defects. It tests the complete, integrated system to verify it meets specific requirements.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> This is "Black Box" testing; the tester doesn't care about the code, only the input and output.
                </div>

                <h4>Regression Testing</h4>
                <p><strong>Definition:</strong> Re-running functional and non-functional tests to ensure that previously developed and tested software still performs after a change.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> Essential in Agile and Iterative models. Whenever you fix a bug, you run regression tests to ensure you didn't break something else.
                </div>

                <h4>Acceptance Testing</h4>
                <p><strong>Definition:</strong> Checks the entire software system in its environment to see if it meets the user's business needs.</p>
                <div class="tip-box">
                    <strong>Tip:</strong> This is the final gateway before the software "Goes Live." It includes Alpha (internal) and Beta (client) testing.
                </div>
                `
            },
            {
                id: 'it7', title: 'Topic 7: Database concepts and management systems (DBMS)', content: `
                <h3>1. Database Concepts & DBMS</h3>

                <h4>Data vs. Information</h4>
                <ul>
                    <li><strong>Data:</strong> Raw facts and figures (e.g., numbers, dates, names) that have not been processed to reveal meaning.</li>
                    <li><strong>Information:</strong> Processed data that is meaningful and useful for decision-making (e.g., a trend analysis derived from sales numbers).</li>
                </ul>
                <div class="tip-box">
                    <strong>Tip:</strong> Think of data as the "ingredients" and information as the "cooked meal." You can't make decisions based on ingredients alone.
                </div>

                <h4>What is a DBMS?</h4>
                <p>A software system that enables users to define, create, maintain, and control access to the database.</p>
                <ul>
                    <li><strong>Role:</strong> It acts as an intermediary between the user/applications and the physical database.</li>
                    <li><strong>Examples:</strong> MySQL, Oracle, PostgreSQL, Microsoft SQL Server.</li>
                </ul>

                <h4>Data Types</h4>
                <ul>
                    <li><strong>Structured Data:</strong> Highly organized in rows and columns (e.g., Relational Databases, Spreadsheets).</li>
                    <li><strong>Unstructured Data:</strong> No pre-defined format (e.g., Videos, Emails, Social Media posts).</li>
                    <li><strong>Semi-Structured Data:</strong> Contains tags or markers but isn't fully tabular (e.g., JSON, XML).</li>
                </ul>

                <h4>Database Structures</h4>
                <ul>
                    <li><strong>Hierarchical:</strong> Data is organized in a tree-like structure (Parent-Child).</li>
                    <li><strong>Network:</strong> Allows more complex connections (Many-to-Many relationships).</li>
                    <li><strong>Relational (RDBMS):</strong> Data is stored in tables (relations) related by common fields. This is the most common modern model.</li>
                    <li><strong>Object-Oriented:</strong> Stores data as "objects" (like in programming).</li>
                </ul>

                <h3>2. Entity Relationship Diagram (ERD)</h3>
                <p><strong>Definition:</strong> A visual representation of the logical structure of a database. It shows how data entities relate to one another.</p>

                <h4>Core Components:</h4>
                <ul>
                    <li><strong>Entities (Rectangles):</strong> Objects or concepts where data is stored (e.g., Student, Course, Customer).</li>
                    <li><strong>Attributes (Ovals):</strong> Details or properties of an entity (e.g., StudentName, StudentID, Email).</li>
                    <li><strong>Relationships (Diamonds):</strong> How two entities are connected (e.g., Enrolls, Teaches, Purchases).</li>
                </ul>

                <h4>Advanced Attributes:</h4>
                <ul>
                    <li><strong>Multivalued Attribute (Double Oval):</strong> An attribute that can have more than one value (e.g., Phone_Number for a person who has multiple phones).</li>
                    <li><strong>Derived Attribute (Dashed Oval):</strong> An attribute whose value is calculated from other attributes (e.g., Age is derived from Date_Of_Birth).</li>
                    <li><strong>Weak Entity (Double Rectangle):</strong> An entity that cannot exist without a "strong" owner entity (e.g., a Dependent entity relies on an Employee entity).</li>
                </ul>

                <div class="tip-box">
                    <strong>Tip:</strong> When drawing an ERD, start by identifying the "Nouns" (Entities) and then the "Verbs" (Relationships). If a noun is just a property of another noun (like "Color" of a "Car"), it's an attribute, not an entity.
                </div>

                <h3>3. Keys (The Backbone of RDBMS)</h3>
                <p>Keys ensure data integrity and establish links between tables.</p>

                <h4>Primary Key (PK):</h4>
                <ul>
                    <li><strong>Definition:</strong> A unique identifier for a specific record in a table.</li>
                    <li><strong>Rules:</strong> Must be unique (no duplicates) and cannot be NULL (empty).</li>
                    <li><strong>Example:</strong> Student_ID in a Students table.</li>
                </ul>
                <div class="tip-box">
                    <strong>Tip:</strong> Always create a surrogate key (like an auto-incrementing ID) if a natural unique key doesn't exist.
                </div>

                <h4>Candidate Key:</h4>
                <ul>
                    <li><strong>Definition:</strong> Any attribute (column) that could qualify as a Primary Key.</li>
                    <li><strong>Example:</strong> In a table with Student_ID, Email, and SSN, all three are candidate keys because they are unique. You pick one to be the Primary Key.</li>
                </ul>

                <h4>Unique Key:</h4>
                <ul>
                    <li><strong>Definition:</strong> Ensures all values in a column are different.</li>
                    <li><strong>Difference from PK:</strong> A table can have multiple Unique Keys, but only one Primary Key. Also, a Unique Key can usually accept one NULL value (depending on the DBMS).</li>
                </ul>

                <h4>Foreign Key (FK):</h4>
                <ul>
                    <li><strong>Definition:</strong> A field in one table that links to the Primary Key of another table.</li>
                    <li><strong>Purpose:</strong> Enforces Referential Integrity (ensures you can't have an order for a customer that doesn't exist).</li>
                    <li><strong>Example:</strong> Customer_ID in the Orders table is a Foreign Key pointing to Customer_ID in the Customers table.</li>
                </ul>

                <h3>4. Relationships (Cardinality)</h3>
                <p>Cardinality defines the numerical relationship between rows of one table and rows of another.</p>

                <h4>One-to-One (1:1):</h4>
                <ul>
                    <li><strong>Definition:</strong> A single record in Table A is related to a single record in Table B.</li>
                    <li><strong>Example:</strong> Person ↔ Passport. One person has one passport; one passport belongs to one person.</li>
                    <li><strong>Implementation:</strong> Share the same Primary Key or put the PK of one as a Unique FK in the other.</li>
                </ul>

                <h4>One-to-Many (1:N):</h4>
                <ul>
                    <li><strong>Definition:</strong> A single record in Table A can be related to multiple records in Table B, but a record in Table B relates to only one in Table A.</li>
                    <li><strong>Example:</strong> Customer ↔ Orders. One customer can place many orders, but an order belongs to only one customer.</li>
                    <li><strong>Implementation:</strong> Put the Primary Key of the "One" side (Customer) as a Foreign Key in the "Many" side (Orders).</li>
                </ul>

                <h4>Many-to-Many (M:N):</h4>
                <ul>
                    <li><strong>Definition:</strong> Multiple records in Table A are related to multiple records in Table B.</li>
                    <li><strong>Example:</strong> Student ↔ Course. A student can take many courses, and a course can have many students.</li>
                    <li><strong>Implementation:</strong> You cannot implement this directly. You must create a third Junction Table (or Associative Entity) that breaks it into two 1:N relationships.
                        <ul>
                            <li><strong>New Table:</strong> Enrollments (contains Student_ID and Course_ID).</li>
                        </ul>
                    </li>
                </ul>

                <div class="mnemonic-box">
                    💡 <strong>Tip:</strong> To determine the relationship type, ask the question in both directions. "How many X can a Y have?" AND "How many Y can an X have?"
                </div>
                `
            },
            {
                id: 'it8', title: 'Topic 8: E-Commerce & E-Business', content: `
                <h3>1. E-Commerce Models</h3>
                <ul>
                    <li><strong>B2B (Business to Business):</strong> Alibaba, AWS.</li>
                    <li><strong>B2C (Business to Consumer):</strong> Amazon, Netflix.</li>
                    <li><strong>C2C (Consumer to Consumer):</strong> eBay, Facebook Marketplace.</li>
                    <li><strong>C2B (Consumer to Business):</strong> Freelancers (Upwork), Influencers.</li>
                </ul>

                <h3>2. E-Business vs. E-Commerce</h3>
                <p><strong>E-Commerce:</strong> Buying and selling over the internet.</p>
                <p><strong>E-Business:</strong> Includes E-Commerce PLUS internal business processes (HR, Logicstics, production management) done online.</p>
                `
            },
            {
                id: 'it9', title: 'Topic 9: Data Security & Ethics', content: `
                <h3>1. CIA Triad</h3>
                <p>The core of information security.</p>
                <ul>
                    <li><strong>Confidentiality:</strong> Only authorized people see data.</li>
                    <li><strong>Integrity:</strong> Data is not altered/tampered with.</li>
                    <li><strong>Availability:</strong> Data is accessible when needed.</li>
                </ul>

                <h3>2. Common Threats</h3>
                <ul>
                    <li><strong>Phishing:</strong> Fake emails stealing creds.</li>
                    <li><strong>Malware:</strong> Viruses, Worms, Ransomware.</li>
                    <li><strong>Social Engineering:</strong> Manipulating people into giving info.</li>
                </ul>
                `
            }
        ];

        const flashcardsData = [
            { ch: "ch2", f: "Market Segmentation", b: "Dividing a market into smaller segments with distinct needs." },
            { ch: "ch2", f: "Differentiation", b: "Making a product different to create superior customer value." },
            { ch: "ch2", f: "Positioning", b: "Arranging for a product to occupy a clear, distinctive place in consumer minds." },
            { ch: "ch2", f: "Demographic Segmentation", b: "Dividing market by Age, Gender, Income, Occupation." },
            { ch: "ch2", f: "Psychographic Segmentation", b: "Dividing market by Social Class, Lifestyle, Personality." },
            { ch: "ch7", f: "Undifferentiated Marketing", b: "Targeting the whole market with one offer (Mass Marketing)." },
            { ch: "ch7", f: "Micromarketing", b: "Tailoring products to the needs of specific individuals (Local/Individual)." },
            { ch: "ch7", f: "Value Proposition", b: "The full mix of benefits on which a brand is differentiated and positioned." },
            { ch: "ch8", f: "Core Customer Value", b: "The basic problem-solving benefit that consumers are really buying." },
            { ch: "ch8", f: "Augmented Product", b: "Additional consumer services and benefits (Warranty, Credit)." },
            { ch: "ch8", f: "Convenience Product", b: "Consumer product that customers usually buy frequently, immediately, and with minimal comparison." },
            { ch: "ch8", f: "Specialty Product", b: "Consumer product with unique characteristics for which a significant group is willing to make a special purchase effort." },
            { ch: "ch8", f: "Unsought Product", b: "Consumer product that the consumer either does not know about or knows about but does not normally consider buying." },
            { ch: "ch9", f: "Product Life Cycle (PLC)", b: "The course of a product's sales and profits over its lifetime." },
            { ch: "ch9", f: "PLC: Introduction Stage", b: "Period of slow sales growth as product is introduced. Nonexistent profits." },
            { ch: "ch9", f: "PLC: Maturity Stage", b: "Period of slowdown in sales growth because product has achieved acceptance. Profits level off." },
            { ch: "ch10", f: "Value-Based Pricing", b: "Setting price based on buyers' perceptions of value rather than on the seller's cost." },
            { ch: "ch10", f: "Cost-Plus Pricing", b: "Adding a standard markup to the cost of the product." },
            { ch: "ch10", f: "Price Elasticity", b: "A measure of the sensitivity of demand to changes in price." },
            { ch: "ch11", f: "Dynamic Pricing", b: "Adjusting prices continually to meet the characteristics and needs of individual customers and situations." },
            { ch: "ch11", f: "Psychological Pricing", b: "Pricing that considers the psychology of prices, not simply the economics ($9.99)." },
            { ch: "ch12", f: "Direct Marketing Channel", b: "A marketing channel that has no intermediary levels." },
            { ch: "ch12", f: "Vertical Marketing System (VMS)", b: "A channel structure in which producers, wholesalers, and retailers act as a unified system." },
            { ch: "ch12", f: "Multichannel Distribution", b: "A single firm sets up two or more marketing channels to reach one or more customer segments." },
            { ch: "gen", f: "SWOT Analysis", b: "Strengths (Int), Weaknesses (Int), Opportunities (Ext), Threats (Ext)." },
            { ch: "gen", f: "Marketing Mix (4 Ps)", b: "Product, Price, Place, Promotion." }
        ];

        const quizData = [
            // Part 1: Conceptual Questions adapted to Quiz format
            { q: "What is the difference between a Star and a Cash Cow in the BCG Matrix?", a: ["Star: High Growth/High Share, Cash Cow: Low Growth/High Share", "Star: Low Growth/High Share, Cash Cow: High Growth/High Share", "Star: High Growth/Low Share, Cash Cow: Low Growth/Low Share", "They are the same"], c: 0 },
            { q: "What does 'Marketing ROI' measure?", a: ["Return on Influencer investment", "Profits generated by marketing investments", "Rate of Interest on loans", "Revenue from online sales only"], c: 1 },
            { q: "Differentiated Marketing targets:", a: ["The whole market with one offer", "A small niche share", "Multiple segments with separate offers", "One person at a time"], c: 2 },
            { q: "What is a 'Value Proposition'?", a: ["The lowest price on the market", "The full mix of benefits differentiating a brand", "A discount coupon", "The company mission statement"], c: 1 },
            { q: "Service Perishability means:", a: ["Services expire after 1 year", "Services cannot be stored for later sale or use", "Services are always fresh", "Service quality varies by employee"], c: 1 },
            { q: "Line Extension vs. Brand Extension:", a: ["Same category vs. New category", "New category vs. Same category", "Both are new categories", "Both are same category"], c: 0 },
            { q: "In Idea Screening, R-W-W stands for:", a: ["Real, Win, Worth", "Read, Write, Walk", "Ready, Willing, Waiting", "Rich, Wealthy, Wise"], c: 0 },
            { q: "Why are profits often negative in the Introduction stage?", a: ["Low prices", "High development and launch costs", "Too many competitors", "Product is bad"], c: 1 },
            { q: "Good-Value Pricing vs. Value-Added Pricing:", a: ["High price vs. Low price", "Fair quality/price vs. Features justifying higher price", "Math-based vs. Psychology-based", "None of the above"], c: 1 },
            { q: "Price Elasticity measures:", a: ["How fast prices change", "Sensitivity of demand to price changes", "The cost of rubber bands", "Profit margins"], c: 1 },
            { q: "When to use Market-Skimming Pricing?", a: ["Low quality product", "High price sensitivity", "High quality/image, hard for competitors to enter", "Mass market basics"], c: 2 },
            { q: "Cheap printer, expensive ink is an example of:", a: ["Product Bundle Pricing", "Captive-Product Pricing", "Optional-Product Pricing", "By-Product Pricing"], c: 1 },
            { q: "Vertical Marketing System (VMS) is:", a: ["Producers, Wholesalers, Retailers acting as a unified system", "Producers fighting Retailers", "Direct to consumer only", "A pyramid scheme"], c: 0 },
            { q: "Disintermediation means:", a: ["Adding more middlemen", "Cutting out marketing channel intermediaries", "Mediating disputes", "Distributing everywhere"], c: 1 },

            // Part 2: MCQs
            { q: "(Chap 2) Growth strategy: make more sales to current customers without changing product?", a: ["Market Development", "Market Penetration", "Product Development", "Diversification"], c: 1 },
            { q: "(Chap 7) Variables like social class, lifestyle, and personality are used in:", a: ["Geographic", "Behavioral", "Psychographic", "Demographic"], c: 2 },
            { q: "(Chap 8) A laundry detergent bought regularly without planning is a:", a: ["Shopping Product", "Specialty Product", "Unsought Product", "Convenience Product"], c: 3 },
            { q: "(Chap 8) 'Service Variability' means:", a: ["Services are invisible", "Services can't be stored", "Quality depends on who/when/where/how", "Produced/consumed same time"], c: 2 },
            { q: "(Chap 9) Stage where competitors enter in large numbers & goal is max market share?", a: ["Introduction", "Growth", "Maturity", "Decline"], c: 1 },
            { q: "(Chap 9) Crowdsourcing is a form of:", a: ["Idea Screening", "Test Marketing", "Idea Generation", "Commercialization"], c: 2 },
            { q: "(Chap 10) Compares costs that change directly with production level:", a: ["Fixed Cost", "Overhead", "Total Cost", "Variable Cost"], c: 3 },
            { q: "(Chap 11) Selling a Razor for $5 but blades for $20 is:", a: ["Product Bundle", "Captive-Product", "Optional-Product", "By-Product"], c: 1 },
            { q: "(Chap 11) Adjusting prices continually (like Uber) is:", a: ["Segmented Pricing", "Dynamic Pricing", "Psychological Pricing", "Promotional Pricing"], c: 1 },
            { q: "(Chap 12) Luxury brands like Rolex use which distribution?", a: ["Intensive", "Selective", "Exclusive", "Mass"], c: 2 }
        ];

        // --- STATE ---
        let cards = [...flashcardsData];
        let cIdx = 0;
        let qIdx = 0;
        let qScore = 0;
        let timerTime = 25 * 60;
        let timerInterval = null;
        let isRunning = false;
        let soundEnabled = true;

        // --- INIT ---
        window.onload = () => {
            renderNotes();
            renderIslamicNotes();
            updateCard();
            loadQuiz();
            updateExamCountdown(); // Calc countdowns

            // Focus Name Input auto
            setTimeout(() => document.getElementById('name-input').focus(), 1500);
        };

        // --- ENTER KEY LISTENER (GLOBAL - WORKS ALWAYS) ---
        // Using keydown instead of keypress for better compatibility
        // Using document level listener so it ALWAYS works
        document.addEventListener('keydown', function(e) {
            // Only trigger on Enter key
            if (e.key === 'Enter' || e.keyCode === 13) {
                const portal = document.getElementById('entry-portal');
                const nameInput = document.getElementById('name-input');
                
                // Only process if portal is visible and input is focused
                if (portal && portal.style.display !== 'none' && nameInput === document.activeElement) {
                    e.preventDefault(); // Prevent form submission or other default behaviors
                    enterApp();
                }
            }
        });

        // --- GOD TIER STORM ENGINE ---
        class StormSystem {
            constructor() {
                this.canvas = document.getElementById('storm-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.particles = [];
                this.lightning = 0;
                this.width = 0;
                this.height = 0;
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.width = this.canvas.width = window.innerWidth;
                this.height = this.canvas.height = window.innerHeight;
            }

            start() {
                this.loop();
                // Create Initial Rain
                for(let i=0; i<500; i++) this.particles.push(this.newDrop());
            }

            newDrop() {
                return {
                    x: Math.random() * this.width,
                    y: Math.random() * this.height,
                    l: Math.random() * 20 + 10, // length
                    v: Math.random() * 10 + 20  // velocity
                };
            }

            drawLightning() {
                if (Math.random() > 0.02) return; // Rare flash
                
                const x = Math.random() * this.width;
                this.ctx.beginPath();
                this.ctx.moveTo(x, 0);
                let cx = x;
                for (let y = 0; y < this.height; y += 20) {
                    cx += (Math.random() - 0.5) * 40;
                    this.ctx.lineTo(cx, y);
                }
                this.ctx.strokeStyle = '#fff';
                this.ctx.lineWidth = 2;
                this.ctx.stroke();
                
                // Flash Screen
                this.ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                this.ctx.fillRect(0,0,this.width, this.height);
                this.lightning = 10;
            }

            loop() {
                // Fade bg for trails
                this.ctx.fillStyle = this.lightning > 0 ? `rgba(69, 10, 10, 0.8)` : 'rgba(10, 0, 0, 0.4)';
                this.ctx.fillRect(0, 0, this.width, this.height);

                if(this.lightning > 0) this.lightning--;

                // Rain
                this.ctx.strokeStyle = 'rgba(220, 38, 38, 0.6)'; // RED RAIN
                this.ctx.lineWidth = 1;
                this.ctx.beginPath();
                for (let p of this.particles) {
                    this.ctx.moveTo(p.x, p.y);
                    this.ctx.lineTo(p.x, p.y + p.l);
                    
                    p.y += p.v;
                    if (p.y > this.height) {
                        p.y = -p.l;
                        p.x = Math.random() * this.width;
                    }
                }
                this.ctx.stroke();

                this.drawLightning();
                
                requestAnimationFrame(() => this.loop());
            }
        }
        
        let stormEngine = null;

        // --- CREATIVE ENTRY LOGIC (STRICT MODE) ---
        let loginAttempts = 0;
        const ACCESS_KEY = "FYODOR DOSTOYEVSKY";
        let authStep = 1;

        function enterApp() {
            const inputField = document.getElementById('name-input');
            const enteredVal = inputField.value.trim();
            const portal = document.getElementById('entry-portal');
            const title = document.getElementById('kratos-title') || document.querySelector('.entry-question');

            // STEP 1: PASSWORD VERIFICATION
            if (authStep === 1) {
                if (enteredVal !== ACCESS_KEY) {
                    loginAttempts++;
                    
                    // VISUAL PENALTY SYSTEM
                    if (loginAttempts === 1) {
                        // Strike 1: Warning Shake
                        inputField.classList.add('shake-element');
                        inputField.style.borderColor = '#f59e0b'; // Warning Orange
                        setTimeout(() => inputField.classList.remove('shake-element'), 500);
                        inputField.value = "";
                        inputField.placeholder = "Incorrect Key. Try again.";
                    } else if (loginAttempts >= 2) {
                        // Strike 2: GOD OF WAR MODE
                        const stormContainer = document.getElementById('kratos-storm');
                        
                        // Trigger Chaos
                        portal.classList.add('kratos-mode');
                        if (stormContainer) {
                            stormContainer.style.display = 'block';
                            if(!stormEngine) {
                                stormEngine = new StormSystem();
                                stormEngine.start();
                            }
                        }
                        
                        // Force Text Update
                        if(title) {
                            title.innerHTML = "BOY. <br> THAT IS NOT THE KEY.";
                            title.style.color = "#ef4444"; // Explicit Red
                            title.style.textShadow = "0 0 30px #b91c1c";
                            title.style.fontFamily = "'Times New Roman', serif";
                        }
                        
                        // Permanent Shake until fixed
                        inputField.classList.add('shake-element');
                        setTimeout(() => inputField.classList.remove('shake-element'), 500);
                        inputField.value = "";
                    }
                    return; 
                } else {
                    // SUCCESS: Transition to Name Step
                    authStep = 2;
                    loginAttempts = 0;
                    inputField.value = "";
                    inputField.type = "text";
                    inputField.placeholder = "Type your Name";
                    if (title) {
                        title.innerHTML = "Who is conquering Marketing today?";
                        title.style.color = "";
                        title.style.textShadow = "";
                        title.style.fontFamily = "";
                    }
                    portal.classList.remove('kratos-mode');
                    inputField.style.borderColor = "";
                    const stormContainer = document.getElementById('kratos-storm');
                    if (stormContainer) stormContainer.style.display = 'none';
                    
                    // Auto-focus for immediate name entry
                    setTimeout(() => inputField.focus(), 100);
                    return;
                }
            }

            // STEP 2: NAME ENTRY
            if (authStep === 2) {
                if (!enteredVal) {
                    inputField.classList.add('shake-element');
                    setTimeout(() => inputField.classList.remove('shake-element'), 500);
                    inputField.placeholder = "Name Required.";
                    return;
                }

                // Final Success Logic
                fetch('/api/visitor', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: enteredVal })
                }).catch(console.error);

                const app = document.getElementById('app');

                // Smooth exit
                portal.style.transition = 'opacity 0.8s, transform 0.8s';
                portal.style.opacity = '0';
                portal.style.transform = 'scale(1.1)'; 

                setTimeout(() => {
                    portal.style.display = 'none';
                    app.classList.add('visible');
                    document.getElementById('user-display').innerText = enteredVal; 
                }, 800);
            }
        }

        // --- NAV ---
        function nav(id, el) {
            document.querySelectorAll('.section-view').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');

            // Handle Desktop & Mobile Nav Highlighting
            if (el) {
                document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                document.querySelectorAll('.mobile-nav-item').forEach(n => n.classList.remove('active'));
                el.classList.add('active');
            }

            // Theme Switching for Pakistan Studies
            if (id === 'pakistan-studies') {
                document.body.classList.add('pak-mode');
            } else {
                document.body.classList.remove('pak-mode');
            }
        }

        // --- PHARMA NOTES ---
        function showPharmaNote(topicId) {
            // Hide all topic grids
            document.getElementById('pharma-cv-grid').style.display = 'none';
            
            // Show the specific detail view
            document.getElementById('pharma-' + topicId + '-detail').style.display = 'block';
            
            // Scroll to top of page
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closePharmaNote() {
            // Hide all detail views
            const detailViews = document.querySelectorAll('[id^="pharma-"][id$="-detail"]');
            detailViews.forEach(view => view.style.display = 'none');
            
            // Show the topic grids
            document.getElementById('pharma-cv-grid').style.display = 'block';
        }

        // --- NOTES ---
        function renderNotes() {
            document.getElementById('notes-grid').innerHTML = notes.map(n => `
                <div class="card" onclick="openNote('${n.id}')">
                    <span class="tag purple">${n.id.toUpperCase()}</span>
                    <h3>${n.title}</h3>
                    <p>Click to read detailed notes.</p>
                </div>
            `).join('');
        }
        function openNote(id) {
            const n = notes.find(x => x.id === id);
            document.getElementById('note-body').innerHTML = `<h1>${n.title}</h1>${n.content}`;
            document.getElementById('notes-grid').style.display = 'none';
            document.getElementById('note-detail').style.display = 'block';
        }
        function closeNote() {
            document.getElementById('note-detail').style.display = 'none';
            document.getElementById('notes-grid').style.display = 'grid';
        }


// --- IT IN BUSINESS NOTES ---

// Show IT Notes List
function showItNotes() {
    document.getElementById('itb-hub').style.display = 'none';
    document.getElementById('it-notes-section').style.display = 'block';
    document.getElementById('it-code-questions').style.display = 'none';
    document.getElementById('it-note-detail').style.display = 'none';
    renderItNotes();
}

// Show Code Questions
function showItCodeQuestions() {
    document.getElementById('itb-hub').style.display = 'none';
    document.getElementById('it-notes-section').style.display = 'none';
    document.getElementById('it-code-questions').style.display = 'block';
    document.getElementById('it-note-detail').style.display = 'none';
}

// Back to ITB Hub
function backToItbHub() {
    document.getElementById('itb-hub').style.display = 'block';
    document.getElementById('it-notes-section').style.display = 'none';
    document.getElementById('it-code-questions').style.display = 'none';
    document.getElementById('it-note-detail').style.display = 'none';
}

function renderItNotes() {
    console.log("Attempting to render IT Notes...");
    const grid = document.getElementById('it-notes-grid');
    if (grid) {
        if (itNotes && itNotes.length > 0) {
            grid.innerHTML = itNotes.map(n => `
                <div class="card" onclick="openItNote('${n.id}')">
                    <span class="tag cyan">${n.id.toUpperCase()}</span>
                    <h3>${n.title}</h3>
                    <p>Click to read detailed notes.</p>
                </div>
            `).join('');
            console.log("IT Notes rendered successfully.");
        } else {
            grid.innerHTML = "<p>No IT Notes available.</p>";
        }
    } else {
        console.error("IT Notes Grid element not found!");
    }
}

function openItNote(id) {
    const n = itNotes.find(x => x.id === id);
    if(n) {
        document.getElementById('it-note-body').innerHTML = `<h1>${n.title}</h1>${n.content}`;
        document.getElementById('it-notes-section').style.display = 'none';
        document.getElementById('it-note-detail').style.display = 'block';
    }
}

function closeItNote() {
    document.getElementById('it-note-detail').style.display = 'none';
    document.getElementById('it-notes-section').style.display = 'block';
}

// --- PAKISTAN STUDIES NAVIGATION ---
const pakNotes = [
    { 
        id: 'pak1', 
        title: 'Aims and Objectives of the Ideology of Pakistan', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Ideology of Pakistan is based on the principle that Muslims of South Asia are a separate nation with a distinct culture, civilization, and religion. The creation of Pakistan was not just for a piece of land, but to establish a laboratory where Islamic principles could be experimented upon.</p>
            <div class="tip-box"><strong>Key Concept:</strong> The Ideology of Pakistan is essentially the Islamic Ideology.</div>

            <h3>2. Detailed Aims & Objectives</h3>
            
            <h4>I. Enforcement of the Sovereignty of God Almighty</h4>
            <p><strong>Concept:</strong> The fundamental basis of the Islamic State is that supreme authority lies only with Allah. No human (king or parliament) is the absolute lawmaker; they must act within the limits prescribed by the Quran and Sunnah.</p>
            <p><strong>Objective:</strong> To establish a state where the Law of Allah is supreme, ensuring that the government acts as a sacred trust (Amanat).</p>

            <h4>II. Establishment of Islamic Democracy</h4>
            <p><strong>Concept:</strong> Islamic democracy differs from Western democracy. In the West, democracy often means "rule of the majority" even if it is immoral. In Islam, democracy means consultation (Shura) and equality, but within Islamic laws.</p>
            <p><strong>Objective:</strong> To create a society where:</p>
            <ul>
                <li>No one has a privileged status based on caste, color, or creed.</li>
                <li>The rights of minorities are protected.</li>
                <li>Justice is accessible to all.</li>
            </ul>

            <h4>III. Protection of Muslim Culture and Civilization</h4>
            <p><strong>Context:</strong> In undivided India, the Hindu majority (via movements like Shuddhi and Sangathan) tried to absorb Muslims and erase their culture.</p>
            <p><strong>Objective:</strong> Pakistan was created to protect Muslim festivals (Eid, etc.), Islamic values, and the distinct social fabric which was completely different from Hindu society.</p>

            <h4>IV. Protection of Two-Nation Theory</h4>
            <p><strong>Concept:</strong> The entire freedom movement revolved around the Two-Nation Theory—the idea that Muslims and Hindus are two distinct nations that cannot merge.</p>
            <p><strong>Objective:</strong> To practically prove that Muslims are a separate entity and require a separate homeland to survive.</p>

            <h4>V. Emancipation from the Prejudicial Hindu Majority</h4>
            <p><strong>Context:</strong> The British and Hindus had a joint policy to crush Muslims economically and politically.</p>
            <p><strong>Objective:</strong> To free Muslims from political slavery (being a permanent minority) and economic slavery (dependence on Hindu money-lenders and landlords).</p>

            <h4>VI. Establishment of a Balanced Economic System</h4>
            <p><strong>Context:</strong> Western capitalism concentrates wealth in a few hands.</p>
            <p><strong>Objective:</strong> To establish an Islamic economic system based on Zakat, Usher, prohibition of Riba (Interest), and fair distribution of resources.</p>

            <h4>VII. Protection/Usage of Urdu Language</h4>
            <p><strong>Context:</strong> During the Urdu-Hindi Controversy (1867), Hindus agitated to replace Urdu with Hindi.</p>
            <p><strong>Objective:</strong> To preserve Urdu as the national language and a unifying force, as it was considered a symbol of Muslim heritage.</p>

            <h4>VIII. Independence of a Perfect Islamic State</h4>
            <p><strong>Objective:</strong> To create a model state that could serve as a leader for the entire Muslim Ummah (Pan-Islamism) and revive the glorious past of Muslims.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "STUDEE IC"</h3>
                <ul>
                    <li><strong>S</strong> - Sovereignty of God</li>
                    <li><strong>T</strong> - Two-Nation Theory</li>
                    <li><strong>U</strong> - Urdu Language</li>
                    <li><strong>D</strong> - Democracy (Islamic)</li>
                    <li><strong>E</strong> - Emancipation</li>
                    <li><strong>E</strong> - Economic System</li>
                    <li><strong>I</strong> - Islamic State</li>
                    <li><strong>C</strong> - Culture & Civilization</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes</h3>
                <p><strong>Quaid-e-Azam:</strong> "We did not demand Pakistan simply to have a piece of land but we wanted a laboratory where we could experiment on Islamic principles." (1948)</p>
                <p><strong>Quaid-e-Azam:</strong> "Our object should be peace within and peace without."</p>
                <p><strong>Allama Iqbal:</strong> "The Muslim demand for the creation of a Muslim India within India is, therefore, perfectly justified." (1930)</p>
            </div>
        `
    },
    { 
        id: 'pak2', 
        title: 'The Ideology of Pakistan and Quaid-e-Azam', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Ideology of Pakistan was not just a political slogan but a practical manifestation of the Two-Nation Theory. Quaid-e-Azam Muhammad Ali Jinnah, the father of the nation, translated the philosophical idea of Allama Iqbal into a political reality. He consistently emphasized that Muslims are a separate nation with their own distinct culture, civilization, and code of life.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. The Basis of Nationhood (Two-Nation Theory)</h4>
            <p><strong>Core Concept:</strong> Quaid-e-Azam firmly believed that Muslims were not a "minority" to be protected but a "nation" entitled to a homeland.</p>
            <div class="tip-box">
                <strong>The Key Statement:</strong> At the historic session of the Muslim League in Lahore (1940), he declared:<br>
                <em>"Muslims are not a minority. They are one nation by every definition of the word ‘nation’."</em>
            </div>
            <p><strong>The Difference:</strong> He argued that Hindus and Muslims belong to two different religious philosophies, social customs, and literatures. They neither intermarry nor inter-dine, and indeed they belong to two different civilizations.</p>

            <h4>II. Distinctive Culture & Civilization</h4>
            <p><strong>The List of Differences:</strong> Quaid-e-Azam defined the Muslim nation by listing their unique attributes. You must memorize this list for the exam:</p>
            <ul>
                <li>We have our own culture and civilization.</li>
                <li>Language and literature.</li>
                <li>Art and architecture.</li>
                <li>Names and nomenclature.</li>
                <li>Sense of values and proportion.</li>
                <li>Legal laws and moral codes.</li>
                <li>Customs and calendar.</li>
                <li>History and traditions.</li>
            </ul>
            <p><strong>Conclusion:</strong> He summarized that Muslims have their own distinctive outlook on life and of life.</p>

            <h4>III. Islam as the Foundation</h4>
            <p><strong>The "Why" Factor:</strong> Pakistan was not demanded just for territory but to practice Islam.</p>
            <p><strong>Quaid's Vision:</strong> He stated that we did not demand Pakistan simply to have a piece of land, but we wanted a "laboratory" where we could experiment on Islamic principles. (Note: This is a golden keyword for your answer).</p>
            <p><strong>Islamic Democracy:</strong> He clarified that the constitution of Pakistan would be democratic and based on the fundamental laws of Islam because Islam has taught us the lesson of democracy.</p>

            <h4>IV. Protection of Minorities</h4>
            <p><strong>Equal Rights:</strong> Contrary to propaganda, Quaid-e-Azam envisioned a state where minorities would be safe.</p>
            <p><strong>Foreign Policy:</strong> He stated, <em>"Our Foreign Policy is one of friendliness and good-will towards all the nations of the world."</em></p>
            <p><strong>Peace:</strong> He emphasized that Pakistan does not cherish aggressive designs against any country and believes in honesty and fair play.</p>

            <h4>V. The National Language (Urdu)</h4>
            <p><strong>Unifying Force:</strong> After independence, Quaid-e-Azam was very clear about the role of Urdu as a unifying force.</p>
            <p><strong>The Warning:</strong> He warned that without one state language, no nation can remain tied up solidly together.</p>
            <p><strong>The Declaration:</strong> He explicitly said:<br><em>"Let me make it clear that the national language of Pakistan is going to be Urdu and no other language."</em></p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "UNCLE D"</h3>
                <ul>
                    <li><strong>U</strong> - Urdu as National Language (Only Urdu, no other)</li>
                    <li><strong>N</strong> - Nation, not Minority ("Muslims are a nation by every definition")</li>
                    <li><strong>C</strong> - Culture & Civilization (Distinct Art, Architecture, Names)</li>
                    <li><strong>L</strong> - Laboratory (Pakistan as a lab for Islamic principles)</li>
                    <li><strong>E</strong> - Experiment (Experimenting on Islamic laws)</li>
                    <li><strong>D</strong> - Democracy (Islamic Democracy & Rights of Minorities)</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                <p>Memorize these exact words to quote in your answer sheet.</p>
                <p><strong>On Nationhood (Lahore 1940):</strong> "We are a nation with our own culture and civilization, language and literature... we have our own distinctive outlook on life and of life."</p>
                <p><strong>On Separation:</strong> "The Hindu and the Muslims belong to two different religious philosophies, social customs and literature. They neither intermarry nor interline together."</p>
                <p><strong>On Territory:</strong> "We are one nation and the nation does not survive in the air. It requires an independent [land] to settle."</p>
                <p><strong>On Foreign Policy:</strong> "Our Foreign Policy is one of friendliness and good-will towards all the nations of the world."</p>
            </div>
        ` 
    },
    { 
        id: 'pak3', 
        title: 'The Ideology of Pakistan and Allama Iqbal', 
        content: `
            <h3>1. Introduction</h3>
            <p>Allama Muhammad Iqbal is known as the "Dreamer of Pakistan" (Musawar-e-Pakistan) and the "Poet of the East" (Shair-e-Mashriq). He was the first Muslim leader to officially propose the idea of a separate homeland for the Muslims of India on a political platform. He awakened the Muslims from their slumber through his poetry and philosophy.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. The Historical Context (Allahabad Address)</h4>
            <p><strong>The Event:</strong> The annual session of the All India Muslim League was held at Allahabad on December 30, 1930.</p>
            <p><strong>The Role:</strong> Allama Iqbal presided over this meeting and delivered his historical presidential address.</p>
            <p><strong>Significance:</strong> This address proved to be a milestone in the freedom struggle because it changed the demand from "rights within India" to "a separate independent state".</p>

            <h4>II. The Demand for a Separate State</h4>
            <p><strong>The Proposal:</strong> Iqbal clearly defined the geography of the future Muslim state. He wanted to consolidate the Muslim-majority provinces of the North-West into a single political unit.</p>
            <p><strong>Key Statement:</strong> He proposed that Punjab, N.W.F.P (now Khyber Pakhtunkhwa), Sindh, and Baluchistan should be amalgamated (joined) into a single state.</p>
            <p><strong>Nature of State:</strong> He clarified that this state could be within the British Empire (Dominion status) or without it (Independent), but it was necessary for the Muslims.</p>

            <h4>III. Islam as a Complete Code of Life</h4>
            <p><strong>Philosophy:</strong> Iqbal argued that Islam is not just a religion of private worship (like Christianity was in Europe) but a complete code of life.</p>
            <p><strong>Application:</strong> It gives guidance for every aspect of life—social, political, and economic.</p>
            <p><strong>Conclusion:</strong> Therefore, Muslims cannot be ruled by a secular Hindu majority because their entire social structure is based on Islamic laws.</p>

            <h4>IV. India: A Continent, Not a Country</h4>
            <p><strong>The Argument:</strong> Iqbal rejected the Congress's claim that India was a single nation.</p>
            <p><strong>The Reality:</strong> He stated that India is a continent of human groups belonging to different races, speaking different languages, and professing different religions.</p>
            <p><strong>Justification:</strong> Therefore, the Muslim demand for a separate Muslim India within India is perfectly justified.</p>

            <h4>V. Muslim Unity (Millat)</h4>
            <p><strong>Concept:</strong> Iqbal strongly believed in the unity of the Muslim Ummah. He taught that Muslims are one nation regardless of their color or race (Concept of Millat).</p>
            <p><strong>Role of Pakistan:</strong> He visualized Pakistan as a fortress of Islam where Muslims could unite and eventually lead the Muslim world.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "I-PADS"</h3>
                <ul>
                    <li><strong>I</strong> – Islam is a complete code of life (Not just a religion).</li>
                    <li><strong>P</strong> – Punjab & Provinces (The list: Punjab, NWFP, Sindh, Baluchistan).</li>
                    <li><strong>A</strong> – Allahabad Address (1930, the historic event).</li>
                    <li><strong>D</strong> – Distinct Nations (India is a continent of distinction).</li>
                    <li><strong>S</strong> – Separate State (The final demand).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                <p>The examiner looks for these specific lines. Memorize them word-for-word.</p>
                
                <p><strong>The Famous "Amalgamation" Quote (MUST WRITE):</strong><br>
                "I would like to see the Punjab, North-West Frontier Province, Sindh and Baluchistan amalgamated into a single state. Self-government within the British Empire or without the British Empire, the formation of a consolidated North-West Indian Muslim State appears to me to be the final destiny of the Muslims."</p>

                <p><strong>On The Nature of India:</strong><br>
                "India is a continent of human groups belonging to different races, speaking different languages, and professing different religions."</p>

                <p><strong>On Islam:</strong><br>
                "Islam is a complete code of life, which gives guidance for every aspect of life."</p>
            </div>
        ` 
    },
    { 
        id: 'pak4', 
        title: 'Importance of the Ideology of Pakistan', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Ideology of Pakistan is not just a theoretical concept; it is the soul of the nation. Just as a body cannot survive without a soul, Pakistan cannot survive without its ideology. It is the driving force that unites the diverse people of Pakistan into a single nation.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Basis of Creation</h4>
            <p><strong>The Foundation:</strong> Pakistan is the only state in the world (after the state of Madina) that was created solely on the basis of an ideology (Islam), not on the basis of race, language, or geography.</p>
            <p><strong>Significance:</strong> If we abandon this ideology, the very justification for the existence of Pakistan ends. It is the "Reason for Being" (Raison d'être) of the state.</p>

            <h4>II. Source of National Unity</h4>
            <p><strong>The Glue:</strong> Pakistan has many regional cultures (Punjabi, Sindhi, Pashtun, Balochi) with different languages and customs. The only force that binds them together is the Ideology of Pakistan (Islam).</p>
            <p><strong>Brotherhood:</strong> It creates a sense of brotherhood and harmony among people who might otherwise be divided by ethnicity.</p>

            <h4>III. Protection of Muslim Identity</h4>
            <p><strong>Identity:</strong> The ideology ensures that Muslims can live according to their own culture, values, and traditions without being absorbed by the Hindu majority.</p>
            <p><strong>Two-Nation Theory:</strong> It reinforces the fact that Muslims are a separate nation with a distinct outlook on life, which protects them from cultural slavery.</p>

            <h4>IV. Guidance for the Constitution</h4>
            <p><strong>Lawmaking:</strong> The ideology provides the guidelines for the constitution. The Objective Resolution (1949) and all subsequent constitutions (1956, 1962, 1973) acknowledge that sovereignty belongs to Allah and laws must conform to the Quran and Sunnah.</p>
            <p><strong>Islamic Democracy:</strong> It establishes a democratic system based on Islamic principles of justice and equality, rather than just Western majority rule.</p>

            <h4>V. Defense against Propaganda</h4>
            <p><strong>Counter-Narrative:</strong> The enemies of Pakistan often claim it is a "failed state" or an "accident of history." The ideology provides a strong intellectual defense, proving that Pakistan was a result of a conscious, historical demand by millions of Muslims.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "BUILD"</h3>
                <ul>
                    <li><strong>B</strong> – Basis of Creation (Islam is the only basis).</li>
                    <li><strong>U</strong> – Unity (Binds different regions/languages together).</li>
                    <li><strong>I</strong> – Identity (Protects Muslim culture and distinct nationhood).</li>
                    <li><strong>L</strong> - Law & Constitution (Guides the laws like Objective Resolution).</li>
                    <li><strong>D</strong> – Defense (Intellectual defense against enemies).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Quaid-e-Azam on Unity (MUST WRITE):</strong><br>
                "We are a nation with our own culture and civilization, language and literature... we have our own distinctive outlook on life and of life."</p>

                <p><strong>Molvi Abdul Haque on Language (Identity):</strong><br>
                "Urdu is the first brick in the foundation of Pakistan."</p>

                <p><strong>On Sovereignty (Objective Resolution):</strong><br>
                "Sovereignty over the entire universe belongs to God Almighty alone and the authority which He has delegated to the State of Pakistan... is a sacred trust."</p>
            </div>
        ` 
    },
    { 
        id: 'pak5', 
        title: 'Two Nation Theory', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Two-Nation Theory is the basis of the creation of Pakistan. It states that Muslims and Hindus are two separate nations by every definition, and therefore, Muslims cannot live under the dominance of a Hindu majority. They need a separate homeland where they can live according to their own religion, culture, and traditions.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Definition & Meaning</h4>
            <p><strong>The Concept:</strong> The theory states that despite living together for over 1,000 years, Hindus and Muslims never merged into one nation. They remained two distinct streams of water running parallel but never mixing.</p>
            <p><strong>Key Differences:</strong> They have totally different religions, cultures, heroes, and social systems. One (Hindu) worships cows, the other (Muslim) eats them. One believes in thousands of gods, the other in One God (Tauheed).</p>

            <h4>II. Evolution of the Theory</h4>
            <p><strong>Sir Syed Ahmed Khan (The Pioneer):</strong> He was the first person to use the term "Two Nations" in 1867 after the Urdu-Hindi Controversy. He realized that Hindus wanted to erase Muslim culture (Urdu), so he warned that these two nations could not work together anymore.</p>
            <p><strong>Allama Iqbal (The Dreamer):</strong> In his Allahabad Address (1930), he gave the geographical boundary for this "Two Nation" concept, proposing a separate state in the North-West of India.</p>
            <p><strong>Choudhry Rahmat Ali (The Namer):</strong> In 1933, he coined the name "Pakistan" in his pamphlet Now or Never, reinforcing that Muslims are a separate nation.</p>
            <p><strong>Quaid-e-Azam (The Executor):</strong> He translated the theory into reality. In 1940, he declared that Muslims are a nation by every canon of international law.</p>

            <h4>III. Comparison: Muslim vs. Hindu Society (The "Differences")</h4>
            <p>You must memorize these 5 specific differences to score full marks.</p>
            
            <p><strong>1. Religious Differences:</strong></p>
            <ul>
                <li><strong>Muslims:</strong> Believe in Tauheed (Oneness of God), equality of man, and the Quran.</li>
                <li><strong>Hindus:</strong> Believe in multiple gods (Polytheism) and the Caste System (Brahmins, Shudras, etc.), where people are born unequal.</li>
            </ul>

            <p><strong>2. Cultural Differences:</strong></p>
            <ul>
                <li><strong>Muslims:</strong> Bury their dead. Eat beef. Have a distinct Islamic culture.</li>
                <li><strong>Hindus:</strong> Burn their dead. Worship cows. Have a self-built ancient culture.</li>
                <li><em>Key Phrase:</em> "They neither intermarry nor inter-dine." (Quaid’s quote).</li>
            </ul>

            <p><strong>3. Social Differences:</strong></p>
            <p>Their clothes, food, household utensils, names, and even words of salutation (Salaam vs. Namaste) are different.</p>
            
            <p><strong>4. Linguistic Differences (Urdu vs. Hindi):</strong></p>
            <ul>
                <li><strong>Muslims:</strong> Speak/write Urdu (Persian/Arabic script).</li>
                <li><strong>Hindus:</strong> Speak/write Hindi (Sanskrit/Devanagari script).</li>
            </ul>
            <p>This linguistic conflict (1867) was the starting point of the Two-Nation Theory.</p>

            <p><strong>5. Economic Differences:</strong></p>
            <p>After 1857, Hindus cooperated with the British and became rich/educated. Muslims were crushed, thrown out of jobs, and their properties were confiscated. This economic gap made a separate state necessary.</p>

            <h4>IV. Basis of Nationhood</h4>
            <p><strong>Not Territory:</strong> European nations are based on territory (e.g., if you live in France, you are French).</p>
            <p><strong>Based on Islam:</strong> The Muslim nation is based on Kalima (Faith). A Muslim in Bengal and a Muslim in Punjab are one nation, not because of land, but because of Islam.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "R-SCLE"</h3>
                <p><em>(Pronounced Rascal without the 'a')</em></p>
                <ul>
                    <li><strong>R</strong> – Religious (Tauheed vs. Idols).</li>
                    <li><strong>S</strong> – Social (Equality vs. Caste System).</li>
                    <li><strong>C</strong> – Cultural (Bury vs. Burn dead).</li>
                    <li><strong>L</strong> – Language (Urdu vs. Hindi).</li>
                    <li><strong>E</strong> – Economic (Poor Muslims vs. Rich Hindus).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Quaid-e-Azam (The Most Important Quote):</strong><br>
                "Muslims are not a minority; they are one nation by every definition of the word nation. By all canons of international law we are a nation."</p>

                <p><strong>Quaid-e-Azam on Co-existence:</strong><br>
                "The Hindu and the Muslims belong to two different religious philosophies, social customs and literature. They neither intermarry nor inter-dine... indeed they belong to two different civilizations."</p>

                <p><strong>Sir Syed Ahmed Khan (After Urdu-Hindi Controversy):</strong><br>
                "I am convinced now that these two nations will not join whole-heartedly in anything."</p>
            </div>
        ` 
    },
    { 
        id: 'pak6', 
        title: 'Two Nation Theory and Quaid-e-Azam', 
        content: `
            <h3>1. Introduction</h3>
            <p>Quaid-e-Azam Muhammad Ali Jinnah was the greatest exponent of the Two-Nation Theory. He did not invent the theory (Sir Syed did), but he perfected it and used it as a political weapon to achieve Pakistan. He convinced the world that the Muslim demand was not for "rights" within India, but for a "separate homeland" outside of it.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. The Clear Declaration (March 1940)</h4>
            <p><strong>The Event:</strong> At the historic Lahore Session (where the Pakistan Resolution was passed), Quaid-e-Azam gave the final definition of Muslim nationhood.</p>
            <div class="tip-box">
                <strong>The Quote:</strong> He declared:<br>
                <em>"Muslims are not a minority as it is commonly known and understood. One has only got to look round the central legislature and the provincial legislatures to see that… Muslims are a nation according to any definition of a nation and they must have their homelands, their territory and their state."</em>
            </div>
            <p><strong>Significance:</strong> This ended the Congress argument that Muslims were just a religious minority.</p>

            <h4>II. The "International Law" Argument</h4>
            <p><strong>Legal Basis:</strong> Quaid-e-Azam was a brilliant lawyer. He used international law to justify Pakistan.</p>
            <p><strong>The Quote:</strong> <em>"By all canons of international law we are a nation."</em></p>
            <p><strong>Explanation:</strong> He argued that since Muslims have a separate culture, language, and law, they fit the international definition of a "Nation" and thus have the right to self-determination.</p>

            <h4>III. Differences in Civilization</h4>
            <p><strong>Deep Divide:</strong> He explained that the conflict between Hindus and Muslims was not just religious but civilizational.</p>
            <div class="tip-box">
                <strong>The Quote:</strong><br>
                <em>"Hindustan is neither one country, nor its inhabitant’s one nation. This is Sub Continent which consists of many nations of which the Hindus and Muslims are two major nations."</em>
            </div>
            <p><strong>The "Rivers" Concept:</strong> He often highlighted that Hindus and Muslims live in the same villages but never blend—like oil and water.</p>

            <h4>IV. Refusal of United India</h4>
            <p><strong>The Trap:</strong> Quaid-e-Azam realized that a "United India" under British or Congress rule would mean permanent slavery for Muslims because they would always be outvoted 3:1 by Hindus.</p>
            <p><strong>The Solution:</strong> He stated that the only solution to India’s problem was the partition of the land into two sovereign states.</p>

            <h4>V. Protection of Identity</h4>
            <p><strong>Survival:</strong> He argued that if Muslims agreed to live in a United India, their "distinctive outlook on life" would be destroyed.</p>
            <p><strong>Vision:</strong> He wanted a state where Muslims could rule according to their own lights (values) and guard their history and traditions.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "CANONS"</h3>
                <ul>
                    <li><strong>C</strong> – Canons of International Law (We are a nation by law).</li>
                    <li><strong>A</strong> – Amalgamation Impossible (Oil and water don't mix).</li>
                    <li><strong>N</strong> – Not a Minority (We are a nation, not a minority).</li>
                    <li><strong>O</strong> – One Country (India is not one country, but a subcontinent).</li>
                    <li><strong>N</strong> – Nationhood (Defined by culture, language, etc.).</li>
                    <li><strong>S</strong> – Separate Homeland (The only solution).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                <p>Memorize these three specific quotes for this chapter.</p>
                
                <p><strong>The "Definition" Quote (Lahore 1940):</strong><br>
                "Muslims are not a minority; they are one nation by every definition of the word nation. By all canons of international law we are a nation."</p>

                <p><strong>The "Sub-Continent" Quote:</strong><br>
                "Hindustan is neither one country, nor its inhabitant’s one nation. This is Sub Continent which consists of many nations..."</p>

                <p><strong>The "Distinct Entity" Quote:</strong><br>
                "We are a nation with our own distinctive culture and civilization, language and literature, art and architecture... we have our own distinctive outlook on life and of life."</p>
            </div>
        ` 
    },
    { 
        id: 'pak7', 
        title: 'Hazrat Shah Wali Ullah (1703-1762)', 
        content: `
            <h3>1. Introduction</h3>
            <p>Hazrat Shah Wali Ullah Muhaddith Dehlvi was the first Muslim reformer of the Sub-continent. He appeared at a time when the Mughal Empire was collapsing, and the Muslim society was morally corrupt and religiously divided. He is known as the "Imam of India" because he saved the Muslims from total destruction through his intellectual and practical jihad.</p>
            <div class="tip-box"><strong>Key Concept:</strong> He believed that the decline of Muslims was due to their distance from the Quran and Sunnah.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Religious Services (The Quranic Revolution)</h4>
            <p><strong>Translation of Holy Quran:</strong> The most revolutionary step he took was translating the Quran into Persian (the language of the educated class at that time).</p>
            <p><strong>Reason:</strong> The Mullahs had made the Quran a book only for recitation, not understanding.</p>
            <p><strong>Impact:</strong> This broke the monopoly of the religious scholars and allowed common people to understand the word of Allah directly.</p>
            <p><strong>Balance between Sects (Tatbiq):</strong> Muslims were bitterly divided into Shias and Sunnis, and different schools of thought (Fiqh).</p>
            <p><strong>Action:</strong> He wrote books to prove that the differences were minor and urged Muslims to unite. He adopted a balanced approach (Adal) to end sectarian violence.</p>
            <p><strong>Key Books:</strong></p>
            <ul>
                <li><em>Hujjat-ul-Baligha:</em> His masterpiece on the philosophy of Islam.</li>
                <li><em>Izalat-ul-Akhfa:</em> Explanation of the Quran.</li>
            </ul>

            <h4>II. Political Services (Saving the Empire)</h4>
            <p><strong>Letter to Ahmed Shah Abdali:</strong> When the Marathas (Hindus) conquered Delhi and vowed to ban the cow slaughter and call to prayer (Azan), the Mughal rulers were too weak to stop them.</p>
            <p><strong>Action:</strong> Shah Wali Ullah wrote a letter to the Afghan King, Ahmed Shah Abdali, inviting him to save the Muslims of India.</p>
            <p><strong>Battle of Panipat (1761):</strong></p>
            <ul>
                <li><strong>Result:</strong> Abdali arrived and crushed the Maratha power in the Third Battle of Panipat (1761).</li>
                <li><strong>Significance:</strong> This victory destroyed the dream of a "Hindu Empire" and gave Muslims a breathing space to survive.</li>
            </ul>

            <h4>III. Social & Economic Reforms</h4>
            <p><strong>Economic Equilibrium:</strong> He was the first scholar to discuss economics.</p>
            <p><strong>Theory:</strong> He argued that wealth should not circulate only among the rich. If the labor class (farmers, workers) is exploited, society will collapse.</p>
            <p><strong>Against Luxury:</strong> He criticized the Mughal elite for their lavish lifestyle, which drained the state treasury.</p>
            <p><strong>Social Justice:</strong> He preached that Islam opposes monarchy and supports a just social order where every individual has rights.</p>

            <h4>IV. Movement for Spiritual Revival</h4>
            <p><strong>Sufism:</strong> He purified Sufism from un-Islamic Hindu practices. He taught that a Sufi must first be a strict follower of Sharia.</p>
            <p><strong>Madrasah Rahimiya:</strong> After his father’s death, he taught at Madrasah Rahimiya for years, producing a generation of scholars who later led the freedom movement (like Shah Abdul Aziz and Syed Ahmed Shaheed).</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "TEAPOT"</h3>
                <ul>
                    <li><strong>T</strong> – Translation of Quran (Into Persian).</li>
                    <li><strong>E</strong> – Economic Reforms (Against luxury, fair wages).</li>
                    <li><strong>A</strong> – Ahmed Shah Abdali (Invited him for Panipat 1761).</li>
                    <li><strong>P</strong> – Panipat Battle (Crushed Marathas).</li>
                    <li><strong>O</strong> – Opposition to Sectarianism (United Shias/Sunnis).</li>
                    <li><strong>T</strong> – Two-Nation Theory (His son and followers laid its early roots).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>On Economics:</strong><br>
                "When wealth concentrates in a few hands, the society is ruined."</p>

                <p><strong>On His Mission:</strong><br>
                "I have been sent to break the stagnation of the Muslim society."</p>

                <p><strong>To Ahmed Shah Abdali (The Letter):</strong><br>
                "If you do not arrive in time, the Muslims of India will be drowned in a river of blood."</p>
            </div>
        ` 
    },
    { 
        id: 'pak8', 
        title: 'Sheikh Ahmad Sirhindi (1564-1624)', 
        content: `
            <h3>1. Introduction</h3>
            <p>Sheikh Ahmad Sirhindi, widely known as Mujaddid Alif Sani (The Reformer of the Second Millennium), was the first major resistance against the anti-Islamic policies of Mughal Emperor Akbar. He is called the "Savior of Islam" in South Asia because he stood firm when the very identity of Muslims was threatened by the "Deen-i-Ilahi."</p>
            <div class="tip-box"><strong>Key Concept:</strong> He proved that Islam and Hinduism are two opposites that cannot be merged (negating Akbar's policy of Sulh-i-Kul).</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Opposition to Deen-i-Ilahi</h4>
            <p><strong>The Problem:</strong> Emperor Akbar had introduced a new religion called Deen-i-Ilahi, which was a mixture of Islam, Hinduism, Christianity, and Zoroastrianism. It denied the finality of Prophethood and encouraged un-Islamic practices like "Prostration" (Sajda) to the King.</p>
            <p><strong>The Action:</strong> Sheikh Ahmad Sirhindi openly declared this new religion as Kufr (disbelief). He bravely criticized the Ulema-e-Soo (bad scholars) who supported the King for worldly gains.</p>
            <p><strong>Impact:</strong> His fearless preaching eventually led to the decline of Deen-i-Ilahi.</p>

            <h4>II. Theory of Wahdat-ul-Shuhud (Unity of Witness)</h4>
            <p><strong>The Conflict:</strong> During that time, the Sufi concept of Wahdat-ul-Wajood (Unity of Being) was popular, which Hindus interpreted to mean "Ram and Rahim are one" (God is in everything). This blurred the line between Creator (Allah) and Creation.</p>
            <p><strong>The Correction:</strong> Sheikh Ahmad Sirhindi proposed the concept of Wahdat-ul-Shuhud.</p>
            <p><strong>Meaning:</strong> The Creator and Creation are separate. The world is not God, but a shadow/reflection of God’s power.</p>
            <p><strong>Result:</strong> This clarified that Islam is a distinct religion and cannot be mixed with Hinduism.</p>

            <h4>III. Imprisonment by Jehangir</h4>
            <p><strong>The Incident:</strong> When Emperor Jehangir ascended the throne, he summoned Sheikh Ahmad Sirhindi to his court. The Sheikh refused to perform Sajda-e-Ta'zeemi (Prostration of Respect) to the Emperor, stating that heads bow only to Allah.</p>
            <p><strong>Consequence:</strong> Jehangir imprisoned him in the Gwalior Fort.</p>
            <p><strong>Victory:</strong> The Sheikh preached inside the prison, converting hundreds of prisoners. Jehangir was eventually impressed by his character, released him, and even became his disciple.</p>

            <h4>IV. Two-Nation Theory Roots</h4>
            <p><strong>First Distinct Voice:</strong> Long before Sir Syed Ahmed Khan, Sheikh Ahmad Sirhindi was the first to emphasize that Muslims must keep their separate identity.</p>
            <p><strong>Stance:</strong> He strictly forbade Muslims from participating in Hindu festivals (like Diwali) and criticized policies that gave Hindus dominance over Muslims in the court.</p>

            <h4>V. Purification of Sufism</h4>
            <p><strong>Reforms:</strong> He removed un-Islamic rituals from Sufism and brought it back in line with the Sharia (Islamic Law). He famously said that no spiritual progress is possible without following the Sunnah of the Prophet (PBUH).</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "GUARD"</h3>
                <ul>
                    <li><strong>G</strong> – Gwalior Fort (Imprisoned there by Jehangir).</li>
                    <li><strong>U</strong> – Unity of Witness (Proposed Wahdat-ul-Shuhud).</li>
                    <li><strong>A</strong> – Against Deen-i-Ilahi (Opposed Akbar’s religion).</li>
                    <li><strong>R</strong> – Refusal to Bow (Refused Sajda to Jehangir).</li>
                    <li><strong>D</strong> – Distinct Identity (First to separate Islam from Hinduism).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>On the King (State):</strong><br>
                "The King is like the Soul, and the people are like the Body. If the Soul is pure, the Body is pure; if the Soul is corrupt, the Body is corrupt."</p>

                <p><strong>On Sharia:</strong><br>
                "Sharia is the only path to success in this world and the hereafter."</p>

                <p><strong>Refusal to Bow:</strong><br>
                "This head has never bowed before anyone except Allah, and it never will."</p>
            </div>
        ` 
    },
    { 
        id: 'pak9', 
        title: 'Sir Syed Ahmed Khan (1817-1898)', 
        content: `
            <h3>1. Introduction</h3>
            <p>After the War of Independence (1857), Muslims were held responsible for the rebellion and were crushed by the British. They were deprived of jobs, education, and status. In this darkest hour, Sir Syed Ahmed Khan appeared as a savior. He realized that Muslims could only survive if they acquired modern education and improved relations with the British.</p>
            <div class="tip-box"><strong>Key Concept:</strong> His movement to educate and politically awaken Muslims is known as the Aligarh Movement.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Educational Services (The Primary Focus)</h4>
            <p><strong>Scientific Society (1864):</strong></p>
            <ul>
                <li><strong>Location:</strong> Ghazipur.</li>
                <li><strong>Purpose:</strong> To translate modern English books (science, history) into Urdu so Muslims could understand Western knowledge.</li>
            </ul>
            <p><strong>M.A.O. High School (1875):</strong></p>
            <ul>
                <li>He established the Muhammadan Anglo-Oriental (M.A.O) School at Aligarh, which later became a College in 1877 and a University in 1920.</li>
                <li><strong>Goal:</strong> To produce Muslim graduates who were loyal to Islam but modern in outlook.</li>
            </ul>
            <p><strong>Mohammedan Educational Conference (1886):</strong></p>
            <ul>
                <li><strong>Organization:</strong> He set up this conference to spread the message of education to the Muslim masses across India.</li>
                <li><strong>Function:</strong> Its annual meetings became a political platform for Muslims to discuss their problems.</li>
            </ul>

            <h4>II. Political Services (Two-Nation Theory)</h4>
            <p><strong>Advice on Politics:</strong> Sir Syed advised Muslims to stay away from politics initially.</p>
            <p><strong>Reason:</strong> He believed that without education, jumping into politics against the British would destroy the Muslims completely.</p>
            <p><strong>Two-Nation Theory (1867):</strong></p>
            <ul>
                <li><strong>The Spark:</strong> The Urdu-Hindi Controversy (1867) in Banaras. Hindus demanded that Urdu (Persian script) be replaced by Hindi (Devanagari script).</li>
                <li><strong>The Realization:</strong> Sir Syed was the first person to use the term "Two Nations." He told the British officer Shakespeare that "Hindus and Muslims are two different nations who will never join whole-heartedly in anything".</li>
            </ul>
            <p><strong>Rejection of Congress:</strong> When the Indian National Congress was formed (1885), he warned Muslims not to join it because it worked only for Hindu interests.</p>

            <h4>III. Religious & Social Services</h4>
            <p><strong>Loyalty to British:</strong> He wrote the pamphlet "The Loyal Mohammedans of India" (Risala Asbab-e-Baghawat-e-Hind) to prove that Muslims were not solely responsible for the 1857 war.</p>
            <p><strong>Tameer-e-Millat:</strong> He published a magazine called Tahzeeb-ul-Akhlaq (Social Reformer) to reform Muslim society and eliminate un-Islamic customs.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "SMART"</h3>
                <ul>
                    <li><strong>S</strong> – Scientific Society (1864 at Ghazipur).</li>
                    <li><strong>M</strong> – MOHAMMEDAN Educational Conference (1886).</li>
                    <li><strong>A</strong> – Aligarh (School 1875, College 1877).</li>
                    <li><strong>R</strong> – Risala (Pamphlets to clear misunderstandings).</li>
                    <li><strong>T</strong> – Two-Nation Theory (First to propose it in 1867).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>On Two Nations (Must Write):</strong><br>
                "I am convinced now that Hindus and Muslims are two different nations who will never join whole-heartedly in anything." (After Urdu-Hindi Controversy, 1867)</p>

                <p><strong>On Education:</strong><br>
                "Look forward, learn modern science, and do not waste time in reciting old stories."</p>

                <p><strong>On Congress:</strong><br>
                "Congress is in reality a civil war without arms."</p>
            </div>
        ` 
    },
    { 
        id: 'pak10', 
        title: 'Partition of Bengal (1905-1911)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Partition of Bengal in 1905 was a pivotal event in the history of the Subcontinent. It was ostensibly an administrative measure taken by the British Viceroy, Lord Curzon, to improve the governance of the vast Bengal province. However, it turned into a massive political controversy that exposed the true "Hindu mentality" to the Muslims.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background (The Administrative Reason)</h4>
            <p><strong>Vast Size:</strong> Bengal was the largest province in British India, covering an area of 189,000 sq. miles.</p>
            <p><strong>Huge Population:</strong> It had a massive population of 80 million people.</p>
            <p><strong>Administrative Chaos:</strong> It was impossible for a single Lieutenant Governor to manage such a huge area effectively. The eastern districts were often neglected, and administration was described as "rotten".</p>
            <p><strong>Lord Curzon’s Decision:</strong> After considering various proposals, Lord Curzon decided to divide the province into two parts to improve efficiency.</p>

            <h4>II. The Division (The New Map)</h4>
            <p>The province was split into two distinct provinces on 16th October 1905:</p>
            <p><strong>East Bengal & Assam:</strong></p>
            <ul>
                <li><strong>Capital:</strong> Dacca (Dhaka).</li>
                <li><strong>Demography:</strong> This became a Muslim Majority province.</li>
                <li><strong>Benefit:</strong> Muslims, who were previously crushed by the Hindu landlords of Calcutta, finally got a chance to progress.</li>
            </ul>
            <p><strong>West Bengal:</strong></p>
            <ul>
                <li><strong>Capital:</strong> Calcutta.</li>
                <li><strong>Demography:</strong> This remained a Hindu Majority province.</li>
            </ul>

            <h4>III. Muslims’ Reaction (Joy & Relief)</h4>
            <p><strong>Welcome Move:</strong> Muslims were very happy with the partition.</p>
            <p><strong>New Hope:</strong> They saw it as an opportunity for compensation for past injustices. It meant they would be free from the economic and political dominance of the Hindu merchant class.</p>
            <p><strong>Revival:</strong> The new province of East Bengal allowed Muslims to revive their education and economy.</p>

            <h4>IV. Hindus’ Reaction (Fury & Agitation)</h4>
            <p><strong>Rejection:</strong> Hindus furiously retaliated, calling it the "Division of Motherland" (Dharti Mata).</p>
            <p><strong>Congress Involvement:</strong> The Indian National Congress dropped its mask of neutrality and joined the anti-partition movement.</p>
            <p><strong>Swadeshi Movement:</strong> They started the "Swadeshi Movement," boycotting British goods and foreign cloth to pressure the government.</p>
            <p><strong>Real Reason:</strong> Their main anger was not about "Motherland" but because they lost their economic grip over the eastern part of Bengal.</p>

            <h4>V. The Annulment (1911)</h4>
            <p><strong>British Surrender:</strong> Due to continuous violent protests, agitation, and assassination attempts by Hindu extremists, the British government eventually kneeled.</p>
            <p><strong>The Event:</strong> In 1911, King George V visited India (Delhi Darbar) and announced the Annulment of the Partition.</p>
            <p><strong>Impact on Muslims:</strong> This shocked the Muslims. They realized that the British government could not be trusted and that Congress was purely a Hindu body. This betrayal led to the Muslims defining their own political path (strengthening the Muslim League).</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "CRASH"</h3>
                <ul>
                    <li><strong>C</strong> – Curzon (Lord Curzon decided it).</li>
                    <li><strong>R</strong> – Reasons (Administrative: 80 million people, too big).</li>
                    <li><strong>A</strong> – Agitation (Hindus started Swadeshi movement).</li>
                    <li><strong>S</strong> – Separation (East Bengal = Muslim Majority).</li>
                    <li><strong>H</strong> – Hurt/Happy (Hindus Hurt, Muslims Happy).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>On the Administrative Reason (Background):</strong><br>
                "The province was too large to be managed by a single Lieutenant Governor. The partition was imperative even if Curzon had not initiated it."</p>

                <p><strong>On Muslim Reaction:</strong><br>
                "Muslims were very happy on the partition as this had enabled them to promote their life conditions."</p>

                <p><strong>On Hindu Reaction:</strong><br>
                "Hindus retaliated furiously saying it was the division of motherland."</p>
            </div>
        ` 
    },
    { 
        id: 'pak11', 
        title: 'Simla Deputation (1906)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Simla Deputation (1906) was the first systematic attempt by the Muslims of the Sub-continent to present their demands to the British government. A delegation of 35 prominent Muslim leaders, led by Sir Agha Khan III, met the Viceroy Lord Minto at Simla on 1st October 1906.</p>
            <div class="tip-box"><strong>Key Concept:</strong> This event marks the moment Muslims stopped trusting the Congress and decided to speak for themselves directly.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background (Why did they go?)</h4>
            <p><strong>Hindu Agitation:</strong> The violent Hindu reaction against the Partition of Bengal (1905) convinced Muslims that Hindus would never accept Muslim progress.</p>
            <p><strong>Liberal Party in UK:</strong> The Liberal Party had come to power in Britain and was planning to introduce new constitutional reforms (Minto-Morley Reforms). Muslims feared that if they didn't speak up, these reforms would favor the Hindu majority.</p>
            <p><strong>Need for Separate Identity:</strong> Muslims realized that the "Joint Electorate" system (where Hindus and Muslims vote together) meant Muslims would always lose because Hindus were more numerous.</p>

            <h4>II. The Delegation</h4>
            <ul>
                <li><strong>Date:</strong> 1st October 1906.</li>
                <li><strong>Venue:</strong> Simla (The summer capital of British India).</li>
                <li><strong>Leader:</strong> Sir Agha Khan III (Note: He was only 29 years old at the time).</li>
                <li><strong>Members:</strong> 35 Muslim leaders (Nobles, Jagirdars, Lawyers, Merchants) from all provinces of India.</li>
                <li><strong>Drafter:</strong> The address/petition was written by Nawab Mohsin-ul-Mulk.</li>
            </ul>

            <h4>III. The Demands (The Charter)</h4>
            <p>The delegation presented a charter of demands. You must remember the most important ones:</p>
            <p><strong>Separate Electorates (Most Important):</strong></p>
            <ul>
                <li>Muslims demanded that they should be allowed to vote for their own Muslim representatives. Hindus should not vote for Muslims.</li>
                <li><strong>Reason:</strong> In a joint system, only those Muslims would win who were "agents" of Hindus.</li>
            </ul>
            <p><strong>Weightage System:</strong></p>
            <ul>
                <li>Muslims demanded more seats than their percentage of the population (Weightage) to protect their interests as a minority.</li>
            </ul>
            <p><strong>Share in Government Jobs:</strong></p>
            <ul>
                <li>They demanded a fixed quota for Muslims in government services and the judiciary.</li>
            </ul>
            <p><strong>Representation in Councils:</strong></p>
            <ul>
                <li>Muslims should be given representation in the Viceroy’s Executive Council and University Senates.</li>
            </ul>
            <p><strong>Aid for Education:</strong></p>
            <ul>
                <li>Financial help to upgrade the M.A.O College Aligarh to the status of a University.</li>
            </ul>

            <h4>IV. Lord Minto’s Response (The Success)</h4>
            <p><strong>The Assurance:</strong> Lord Minto listened patiently and gave a very encouraging response. He agreed that the Muslim position should be estimated not just by numbers but by their political importance and service to the Empire.</p>
            <p><strong>The Historic Promise:</strong> He assured them that their political rights and interests would be safeguarded.</p>

            <h4>V. Significance / Importance</h4>
            <p><strong>Acceptance of Two-Nation Theory:</strong> By accepting the demand for "Separate Electorates," the British legally acknowledged that Muslims were a separate nation from Hindus.</p>
            <p><strong>Formation of Muslim League:</strong> The success of this deputation gave Muslims confidence. Just two months later (Dec 1906), the same leaders formed the All India Muslim League in Dhaka to pursue these demands.</p>
            <p><strong>Minto-Morley Reforms (1909):</strong> The demands were accepted and made part of the law in 1909.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "SUPER"</h3>
                <ul>
                    <li><strong>S</strong> – Separate Electorates (The core demand).</li>
                    <li><strong>U</strong> – University (Upgrade Aligarh to University).</li>
                    <li><strong>P</strong> – Political Weightage (More seats than population % because of importance).</li>
                    <li><strong>E</strong> – Executive Council (Representation in Viceroy's council).</li>
                    <li><strong>R</strong> – Reservation (Quota in Govt jobs/Judiciary).</li>
                </ul>
                <p><em>(Remember: 35 members went to Simla to become SUPER)</em></p>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Lord Minto’s Reply (MUST WRITE):</strong><br>
                "I am entirely in accord with you... I can only say to you that the Mahomedan community may rest assured that their political rights and interests as a community will be safeguarded."</p>

                <p><strong>Historical Comment (Amrita Bazar Patrika - Hindu Newspaper):</strong><br>
                "The Simla Deputation was a command performance." (Meaning the British orchestrated it to divide Indians - Use this to show the Hindu negative view).</p>

                <p><strong>Significance:</strong><br>
                "It was the first step towards the establishment of Pakistan."</p>
            </div>
        ` 
    },
    { 
        id: 'pak12', 
        title: 'All India Muslim League (1906)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The All India Muslim League (AIML) was the first political party of the Muslims of the Sub-continent. It was founded on 30th December 1906 at Dhaka. Before this, Muslims had no political platform to raise their voice, while Hindus had the Indian National Congress (founded in 1885). The creation of the League was the result of the realization that Muslims needed to safeguard their own interests.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background (Why was it formed?)</h4>
            <p><strong>Success of Simla Deputation (1906):</strong> The positive response from the Viceroy (Lord Minto) encouraged Muslim leaders to form a permanent political organization to pursue their demands.</p>
            <p><strong>Hindu Reaction to Partition of Bengal:</strong> The violent agitation by Hindus against the partition (1905) made Muslims realize that Congress was not a "National" party but a "Hindu" party working against Muslim interests.</p>
            <p><strong>Urdu-Hindi Controversy:</strong> The continuous attacks on Urdu by Hindus convinced Muslims that their culture was unsafe without political power.</p>

            <h4>II. The Event (The Birth of the Party)</h4>
            <ul>
                <li><strong>Date:</strong> 30th December 1906.</li>
                <li><strong>Venue:</strong> Dhaka (at the residence of Nawab Salimullah Khan).</li>
                <li><strong>Occasion:</strong> The 20th session of the Muhammadan Educational Conference.</li>
                <li><strong>The Proposal:</strong> After the educational session ended, the leaders met to discuss politics. Nawab Salimullah Khan of Dhaka proposed the formation of a political party.</li>
                <li><strong>Chairmanship:</strong> The meeting was presided over by Nawab Viqar-ul-Mulk.</li>
            </ul>

            <h4>III. Aims and Objectives (Must Memorize)</h4>
            <p>The Constitution of the League (known as the "Green Book") listed three primary objectives. You must write them exactly as they are:</p>
            <p><strong>Loyalty to the British Government:</strong> To promote feelings of loyalty among Muslims towards the British Government and to remove any misconceptions about government actions.</p>
            <p><strong>Protection of Political Rights:</strong> To protect and advance the political rights and interests of the Muslims of India and to respectfully represent their needs to the Government.</p>
            <p><strong>Friendly Relations:</strong> To prevent hostility (hatred) among Muslims towards other communities (like Hindus) without damaging the main objectives of the League.</p>

            <h4>IV. First Office Bearers</h4>
            <ul>
                <li><strong>President:</strong> Sir Agha Khan III (He was elected the first permanent President).</li>
                <li><strong>Secretary:</strong> Nawab Mohsin-ul-Mulk.</li>
                <li><strong>Headquarters:</strong> Established at Aligarh (later moved to Delhi).</li>
            </ul>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "L-P-F"</h3>
                <p><em>(Think: The League was formed to establish LPF in India)</em></p>
                <ul>
                    <li><strong>L</strong> – Loyalty (To British Government).</li>
                    <li><strong>P</strong> – Political Rights (Protecting Muslim interests).</li>
                    <li><strong>F</strong> – Friendly Relations (With other communities like Hindus).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Nawab Salimullah Khan (The Founder):</strong><br>
                "A central organization is needed to protect the political rights of Muslims and to counter the propaganda of Congress."</p>

                <p><strong>Historical Fact (Simla Link):</strong><br>
                "The Simla Deputation was the spirit, and the Muslim League was the body."</p>

                <p><strong>On Objectives (Constitution):</strong><br>
                "To protect and advance the political rights and interests of the Muslims of India."</p>
            </div>
        ` 
    },
    { 
        id: 'pak13', 
        title: 'Lucknow Pact (1916)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Lucknow Pact refers to a historic agreement reached between the Indian National Congress and the All India Muslim League during their joint session at Lucknow in December 1916. It was the first time these two rival parties came together to present a united demand to the British government for self-rule.</p>
            <div class="tip-box"><strong>Key Concept:</strong> This pact is the pinnacle of Hindu-Muslim Unity, masterminded by Quaid-e-Azam.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. The Architect (Jinnah's Role)</h4>
            <p><strong>Dual Membership:</strong> At that time, Muhammad Ali Jinnah was a member of both the Congress and the Muslim League. He believed that India could only get freedom if Hindus and Muslims united.</p>
            <p><strong>The Mastermind:</strong> He convinced both parties to hold their annual sessions in the same city (Bombay 1915, then Lucknow 1916) to bridge their differences.</p>
            <p><strong>The Title:</strong> Due to his tireless efforts in bringing these two parties together, the famous leader Sarojini Naidu gave him the title of "The Ambassador of Hindu-Muslim Unity".</p>

            <h4>II. The Event</h4>
            <ul>
                <li><strong>Date:</strong> December 1916.</li>
                <li><strong>Venue:</strong> Lucknow.</li>
                <li><strong>Action:</strong> Both parties accepted a common scheme of reforms, known as the Lucknow Pact.</li>
            </ul>

            <h4>III. Main Features / Clauses (Must Memorize)</h4>
            <p>The Pact contained several clauses, but these are the most critical ones you must write in the exam:</p>
            <p><strong>Separate Electorates (The Biggest Victory):</strong></p>
            <ul>
                <li>Congress agreed that Muslims would have Separate Electorates (Muslims vote for Muslims).</li>
                <li><strong>Significance:</strong> This meant Congress officially accepted the "Two-Nation Theory" and acknowledged Muslims as a distinct political entity.</li>
            </ul>
            <p><strong>One-Third Representation:</strong></p>
            <ul>
                <li>Muslims should be given 1/3rd representation in the Central Government/Legislature, even though their population was less than that.</li>
            </ul>
            <p><strong>Weightage System:</strong></p>
            <ul>
                <li>The system of "Weightage" should be adopted.</li>
                <li><strong>Meaning:</strong> In provinces where Muslims were a minority (like UP, CP), they would be given more seats than their population percentage to protect their rights.</li>
            </ul>
            <p><strong>Separation of Powers:</strong></p>
            <ul>
                <li>The Judiciary should be separated from the Executive.</li>
            </ul>
            <p><strong>Abolition of India Council:</strong></p>
            <ul>
                <li>The "India Council" (a body in London assisting the Secretary of State) must be abolished.</li>
            </ul>
            <p><strong>Salaries:</strong></p>
            <ul>
                <li>The salary of the Secretary of State for India should be paid by the British Government, not from Indian funds.</li>
            </ul>
            <p><strong>Term of Office:</strong></p>
            <ul>
                <li>The term of the Legislative Council should be fixed at 5 years.</li>
            </ul>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "SWISS-1/3"</h3>
                <ul>
                    <li><strong>S</strong> – Separate Electorates (Congress accepted it).</li>
                    <li><strong>W</strong> – Weightage System (More seats for minorities).</li>
                    <li><strong>I</strong> – India Council Abolished.</li>
                    <li><strong>S</strong> – Separation of Judiciary & Executive.</li>
                    <li><strong>S</strong> – Salaries (British should pay Secretary of State).</li>
                    <li><strong>1/3</strong> – 1/3 Representation in Center.</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Sarojini Naidu (Title for Jinnah - MUST WRITE):</strong><br>
                "He is the Ambassador of Hindu-Muslim Unity."</p>

                <p><strong>On Jinnah's Role:</strong><br>
                "Jinnah himself was the mastermind and architect of this pact."</p>
            </div>
        ` 
    },
    { 
        id: 'pak14', 
        title: 'Khilafat Movement (1919-1924)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Khilafat Movement was a religio-political movement launched by the Muslims of British India to protect the Ottoman Empire (Turkey) and the institution of the Caliphate (Khilafat). It was led by the famous Ali Brothers (Maulana Muhammad Ali Jauhar and Maulana Shaukat Ali). It was a unique time in history when Hindus (under Gandhi) and Muslims stood united against the British.</p>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background (Why did it start?)</h4>
            <p><strong>World War I (1914-1918):</strong> Turkey (Ottoman Empire) fought on the side of Germany against the British.</p>
            <p><strong>The Promise:</strong> The British Prime Minister (Lloyd George) promised Indian Muslims that if they supported Britain in the war, the British would not destroy the Ottoman Empire or harm the Caliphate.</p>
            <p><strong>The Betrayal:</strong> After winning the war, the British broke their promise. They decided to divide Turkey and strip the Caliph of his powers (Treaty of Sevres, 1920).</p>
            <p><strong>Reaction:</strong> Muslims were furious because the Ottoman Caliph was considered the spiritual leader of the entire Muslim Ummah.</p>

            <h4>II. Objectives of the Movement</h4>
            <p>You must list these three specific demands:</p>
            <p><strong>Protection of Holy Places:</strong> Makkah, Madina, and Jerusalem must remain under Muslim custody.</p>
            <p><strong>Protection of Caliphate:</strong> The institution of the Khilafat should remain intact.</p>
            <p><strong>Territorial Integrity:</strong> Turkey should not be divided, and its boundaries should be preserved (specifically Thrace and Smyrna).</p>

            <h4>III. Main Events & Activities</h4>
            <p><strong>Khilafat Committee (1919):</strong> Formed in Bombay to organize the protests.</p>
            <p><strong>Non-Cooperation Movement:</strong> Under the guidance of Gandhi, Muslims and Hindus launched a non-cooperation campaign:</p>
            <ul>
                <li><strong>Boycott:</strong> Returning British titles (Khan Bahadur, etc.), boycotting courts, schools, and foreign cloth.</li>
                <li><strong>Resignation:</strong> Muslims resigned from government jobs and police.</li>
            </ul>
            <p><strong>The Hijrat Movement (1920):</strong></p>
            <ul>
                <li><strong>The Fatwa:</strong> Some Ulema declared India as Dar-ul-Harb (House of War) and said it was unsafe for Muslims.</li>
                <li><strong>Migration:</strong> About 18,000 to 20,000 Muslims sold their properties and migrated to Afghanistan.</li>
                <li><strong>Tragedy:</strong> The Afghan government closed its borders. The migrants were forced to return, homeless and penniless. This was a great tragedy.</li>
            </ul>

            <h4>IV. Role of Gandhi (Hindu-Muslim Unity)</h4>
            <p><strong>Gandhi’s Strategy:</strong> Gandhi saw this as a "Golden Opportunity" to unite Hindus and Muslims against the British. He fully supported the Khilafat cause.</p>
            <p><strong>Impact:</strong> For the first time, slogans of "Hindu-Muslim Bhai Bhai" were heard.</p>

            <h4>V. Collapse of the Movement</h4>
            <p><strong>Chauri Chaura Incident (1922):</strong></p>
            <ul>
                <li>A mob of protesters set a police station on fire in Chauri Chaura (UP), killing 21 policemen.</li>
            </ul>
            <p><strong>Gandhi’s Withdrawal:</strong> Gandhi, who believed in non-violence (Ahimsa), suddenly called off the Non-Cooperation Movement without consulting the Muslim leaders.</li>
            <p><strong>Betrayal:</strong> Muslims felt betrayed and shocked. The movement lost its momentum.</p>
            <p><strong>Abolition of Khilafat (1924):</strong></p>
            <ul>
                <li>The final blow came from Turkey itself. The Turkish nationalist leader, Mustafa Kemal Ataturk, abolished the institution of Khilafat in 1924 and expelled the Caliph.</li>
            </ul>
            <p><strong>Result:</strong> The movement in India died automatically as there was no Khilafat left to save.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "HOT" & "CAG"</h3>
                <p><strong>To remember Objectives: "HOT"</strong></p>
                <ul>
                    <li><strong>H</strong> – Holy Places (Protect Makkah, Madina, Jerusalem).</li>
                    <li><strong>O</strong> – Ottoman Empire (Don't divide Turkey).</li>
                    <li><strong>T</strong> – Turkish Caliph (Keep the Khalifa in power).</li>
                </ul>
                <p><strong>To remember Reasons for Failure: "CAG"</strong></p>
                <ul>
                    <li><strong>C</strong> – Chauri Chaura Incident (Violence).</li>
                    <li><strong>A</strong> – Ataturk (Abolished Khilafat in 1924).</li>
                    <li><strong>G</strong> – Gandhi (Called off the support abruptly).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>The Famous Slogan (From Ali Brothers' Mother - MUST WRITE):</strong><br>
                "Boli Amma Muhammad Ali se, Jaan beta Khilafat pe dedo."<br>
                <em>(Said the mother of Muhammad Ali, give your life for the Khilafat, my son.)</em></p>

                <p><strong>Maulana Muhammad Ali Jauhar (On Freedom):</strong><br>
                "I would prefer to die in a foreign country so long as it is free, rather than return to a slave country." (Said in London before his death).</p>

                <p><strong>Gandhi (On Unity):</strong><br>
                "This is such an opportunity of uniting Hindus and Mohammedans as would not arise in a hundred years."</p>
            </div>
        ` 
    },
    { 
        id: 'pak15', 
        title: 'Nehru Report (1928)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Nehru Report was a constitutional draft prepared by the Congress party in response to the British challenge. It was chaired by Motilal Nehru (father of Jawaharlal Nehru). Instead of solving the communal problem, this report increased the gap between Hindus and Muslims because it rejected all the Muslim demands accepted in the Lucknow Pact (1916).</p>
            <div class="tip-box"><strong>Key Concept:</strong> It was the "Parting of the Ways" between Hindus and Muslims.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background (The Challenge)</h4>
            <p><strong>Simon Commission (1927):</strong> The British sent a commission led by Sir John Simon to propose reforms for India. Since it had no Indian members, both Congress and the Muslim League boycotted it.</p>
            <p><strong>Birkenhead’s Challenge:</strong> The British Secretary of State, Lord Birkenhead, mocked Indian leaders, saying they were incapable of producing a constitution that all parties would accept.</p>
            <p><strong>Acceptance:</strong> Congress accepted the challenge and called an All Parties Conference in Delhi in 1928. A committee was formed under Motilal Nehru.</p>

            <h4>II. Main Recommendations (The Anti-Muslim Clauses)</h4>
            <p>The report gave several recommendations, but the ones that shocked Muslims were:</p>
            <p><strong>Rejection of Separate Electorates:</strong></p>
            <ul>
                <li>The report declared that "Separate Electorates" were bad for the nation and demanded Joint Electorates (where Hindus would outvote Muslims).</li>
                <li><strong>Significance:</strong> This reversed the Lucknow Pact (1916).</li>
            </ul>
            <p><strong>Unitary Form of Government:</strong></p>
            <ul>
                <li>It proposed a Strong Center and weak provinces.</li>
                <li><strong>Why it hurt:</strong> Muslims wanted a "Federal" system with strong provinces (Provincial Autonomy) because they had majorities in provinces like Punjab and Bengal. A strong center meant permanent Hindu rule.</li>
            </ul>
            <p><strong>Language:</strong></p>
            <ul>
                <li>It proposed Hindi as the official language of India, ignoring Urdu.</li>
            </ul>
            <p><strong>No Reservation for Minorities:</strong></p>
            <ul>
                <li>It refused to reserve seats for Muslims in Punjab and Bengal (Muslim majority areas).</li>
            </ul>

            <h4>III. Muslim Reaction (Shock & Anger)</h4>
            <p><strong>The Betrayal:</strong> Muslims were shocked. They had boycotted the Simon Commission to support Congress, but Congress stabbed them in the back by taking away their most important safeguard (Separate Electorates).</p>
            <p><strong>Jinnah’s Effort:</strong> Quaid-e-Azam tried to amend the report at the Calcutta Convention (1928). He proposed three minor amendments (known as "Jinnah’s Amendments"), but the stubborn Congress leadership rejected them all.</p>
            <p><strong>The Final Split:</strong> A heartbroken Jinnah left the meeting saying, "This is the parting of the ways."</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "RUSH"</h3>
                <p><em>(Think: Congress tried to RUSH into power by ignoring Muslims)</em></p>
                <ul>
                    <li><strong>R</strong> – Rejection of Separate Electorates (The biggest blow).</li>
                    <li><strong>U</strong> – Unitary Government (Strong center, bad for Muslims).</li>
                    <li><strong>S</strong> – Strict Majority Rule (No reservation for Muslims in Punjab/Bengal).</li>
                    <li><strong>H</strong> – Hindi as Official Language.</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Quaid-e-Azam (Famous Quote - MUST WRITE):</strong><br>
                "This is the parting of the ways." (Said after his amendments were rejected in Calcutta).</p>

                <p><strong>Maulana Muhammad Ali Jauhar:</strong><br>
                "The Nehru Report is a legalized tyranny of numbers." (Meaning the majority will crush the minority).</p>

                <p><strong>Historical Context:</strong><br>
                "The Nehru Report was the last straw that broke the camel's back regarding Hindu-Muslim unity."</p>
            </div>
        ` 
    },
    { 
        id: 'pak16', 
        title: 'Fourteen points of Quaid-E-Azam (1929)', 
        content: `
            <h3>1. Introduction</h3>
            <p>In response to the prejudiced Nehru Report (1928), which rejected Muslim rights, Quaid-e-Azam Muhammad Ali Jinnah presented his famous Fourteen Points in March 1929 at a meeting of the Muslim League in Delhi. These points were a clear ultimatum to the Congress and the British: "Accept these demands, or Hindus and Muslims part ways forever."</p>
            <div class="tip-box"><strong>Key Concept:</strong> These points were the final constitutional formula for the protection of Muslim rights in India.</div>

            <h3>2. The Fourteen Points (Detailed & Structured)</h3>
            <p>In the exam, do not write them in a random order. I have grouped them logically to help you memorize, but you can number them 1-14 in the exam.</p>

            <h4>Group A: Constitutional Structure (The Framework)</h4>
            <p><strong>1. Federal System:</strong> The form of the future constitution should be Federal, with residuary powers vested in the provinces (meaning provinces are powerful, Center is weak).</p>
            <p><strong>2. Provincial Autonomy:</strong> A uniform measure of autonomy shall be granted to all provinces.</p>
            <p><strong>3. Constitution Amendment:</strong> No change shall be made in the constitution without the consent of the states/provinces.</p>

            <h4>Group B: Representation (The Numbers)</h4>
            <p><strong>4. One-Third at Center:</strong> In the Central Legislature, Muslim representation shall not be less than one-third (1/3).</p>
            <p><strong>5. Separate Electorates:</strong> The system of Separate Electorates must continue. (However, it was open to negotiation if other demands were met—but effectively it was a demand).</p>
            <p><strong>6. Minority Representation:</strong> All legislatures must have adequate representation of minorities without reducing any majority to a minority or equality.</p>
            <p><strong>7. Cabinet Representation:</strong> No cabinet (Central or Provincial) should be formed without at least one-third Muslim Ministers.</p>

            <h4>Group C: Provinces (Geography)</h4>
            <p><strong>8. Separation of Sindh:</strong> Sindh should be separated from the Bombay Presidency and made a distinct province.</p>
            <p><strong>9. Reforms in NWFP & Balochistan:</strong> Reforms should be introduced in the N.W.F.P (KPK) and Balochistan on the same footing as other provinces.</p>
            <p><strong>10. Territorial Redistribution:</strong> Any change in provincial boundaries should not affect the Muslim majority in Punjab, Bengal, and NWFP.</p>

            <h4>Group D: Rights & Safeguards</h4>
            <p><strong>11. Religious Liberty:</strong> Full religious liberty (worship, observance, propaganda, association, and education) shall be guaranteed to all communities.</p>
            <p><strong>12. Protection of Culture:</strong> The constitution should provide safeguards for the protection of Muslim culture, education, language, religion, and personal laws.</p>
            <p><strong>13. Share in Services:</strong> Muslims should be given their due share in all state services (government jobs).</p>
            <p><strong>14. The Veto Power:</strong> No bill or resolution shall be passed in any legislature if three-fourths (3/4) of the members of any community oppose it (fearing it hurts their interests).</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "3-4-3-4 Formula"</h3>
                <p>Memorizing 14 points is hard. Use this "3-4-3-4 Formula" to remember them in chunks:</p>
                <ul>
                    <li><strong>3 Points about Structure:</strong> (Federal, Autonomy, Amendment).</li>
                    <li><strong>4 Points about Representation:</strong> (1/3 Center, 1/3 Cabinet, Separate Electorates, Minorities).</li>
                    <li><strong>3 Points about Provinces:</strong> (Sindh, NWFP/Balochistan, Boundaries).</li>
                    <li><strong>4 Points about Rights:</strong> (Religion, Culture, Jobs/Services, Veto).</li>
                </ul>
                <p><strong>Total = 14 Points.</strong></p>
                <br>
                <p><strong>Alternatively, visualize the map:</strong></p>
                <ul>
                    <li>Look at Bombay -> Separate Sindh.</li>
                    <li>Look at West -> Reforms in NWFP/Baluchistan.</li>
                    <li>Look at Parliament -> 1/3 Seats, 1/3 Ministers, Veto.</li>
                    <li>Look at People -> Culture, Religion, Jobs.</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Quaid-e-Azam (Closing Statement):</strong><br>
                "The Nehru Report is the parting of the ways." (These 14 points were the result of that parting).</p>

                <p><strong>Historian K.K. Aziz:</strong><br>
                "The Fourteen Points were the irreducible minimum demands of the Muslims."</p>

                <p><strong>Significance:</strong><br>
                "These points became the basis of the Pakistan Movement and were later incorporated into the demands for a separate homeland."</p>
            </div>
        ` 
    },
    { 
        id: 'pak17', 
        title: 'Pakistan Resolution (1940)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Pakistan Resolution (originally known as the Lahore Resolution) was passed on 23rd March 1940 at the annual session of the All India Muslim League at Minto Park (now Iqbal Park), Lahore. It was the historic turning point where the Muslims of South Asia finally decided that they wanted a separate homeland.</p>
            <div class="tip-box"><strong>Key Concept:</strong> This resolution formally rejected the idea of a "United India" and established the goal of an independent state.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. The Session Details</h4>
            <ul>
                <li><strong>Date:</strong> 22nd – 24th March 1940.</li>
                <li><strong>Venue:</strong> Minto Park, Lahore (The site where Minar-e-Pakistan stands today).</li>
                <li><strong>President:</strong> Quaid-e-Azam Muhammad Ali Jinnah.</li>
                <li><strong>The Mover:</strong> The resolution was presented by the Tiger of Bengal, A.K. Fazlul Haq (Chief Minister of Bengal).</li>
                <li><strong>Attendance:</strong> It was the largest gathering of Muslims in history, with over 100,000 people attending despite restrictions.</li>
            </ul>

            <h4>II. Quaid-e-Azam’s Presidential Address</h4>
            <p><strong>The Analysis:</strong> Quaid-e-Azam spoke for two hours in English. He logically proved that Hindus and Muslims were two separate nations.</p>
            <p><strong>Key Argument:</strong> He argued that the problem of India was not "communal" (between communities) but "international" (between nations).</p>
            <p><strong>The Solution:</strong> He stated that the only solution was to divide India into autonomous national states.</p>

            <h4>III. Text of the Resolution (The Demand)</h4>
            <p>You must memorize the core meaning of the resolution text:</p>
            <p><strong>Geographical Contiguity:</strong> Areas where Muslims are numerically in a majority (North-Western and Eastern zones of India) should be grouped to constitute "Independent States."</p>
            <p><strong>Autonomy:</strong> These units should be autonomous and sovereign.</p>
            <p><strong>Safeguards:</strong> Adequate safeguards should be provided for minorities in these units and for Muslims in Hindu-majority regions.</p>

            <h4>IV. Reaction (The Name "Pakistan")</h4>
            <p><strong>Muslim Reaction:</strong> The Muslims welcomed it with great enthusiasm. It gave them a clear direction.</p>
            <p><strong>Hindu Reaction:</strong> The Hindu leaders and newspapers (like The Hindustan Times) mocked it. They sarcastically called it the "Pakistan Resolution" (The word 'Pakistan' was not in the original text).</p>
            <p><strong>Adoption:</strong> The Muslim League adopted this term, and later it officially became known as the Pakistan Resolution.</p>

            <h4>V. Significance</h4>
            <p><strong>End of Confusion:</strong> Before 1940, Muslims were confused about their future (Federation? Rights? Autonomy?). After 1940, the goal was clear: Partition.</p>
            <p><strong>Magnetic Force:</strong> It united the scattered Muslim population under one flag. Within 7 years (1940-1947), this goal was achieved.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "B-SIDE"</h3>
                <p>To remember the key figures who seconded (supported) the resolution from different provinces, use the mnemonic: "B-SIDE" (Think: They stood Beside the Quaid).</p>
                <ul>
                    <li><strong>B</strong> – Begum Maulana Muhammad Ali (Women/Center).</li>
                    <li><strong>S</strong> – Sir Abdullah Haroon (Sindh).</li>
                    <li><strong>I</strong> – I.I. Chundrigar (Bombay).</li>
                    <li><strong>D</strong> – Dr. Alam (Punjab).</li>
                    <li><strong>E</strong> – Qazi Muhammad Esa (Balochistan).</li>
                </ul>
                <p><em>(Note: A.K. Fazlul Haq moved it; these people supported it).</em></p>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>The Resolution Text (MUST WRITE):</strong><br>
                "The areas in which the Muslims are numerically in a majority as in the North-Western and Eastern zones of India should be grouped to constitute Independent States in which the constituent units shall be autonomous and sovereign."</p>
            </div>
        ` 
    },
    { 
        id: 'pak18', 
        title: 'Simla Conference (1945)', 
        content: `
            <h3>1. Introduction</h3>
            <p>The Simla Conference was a meeting held in June 1945 by Viceroy Lord Wavell with the political leaders of India. The purpose was to discuss the "Wavell Plan" for the formation of an interim government. The conference failed because Quaid-e-Azam stood firm on one principle: "Only the Muslim League has the right to appoint Muslim members."</p>
            <div class="tip-box"><strong>Key Concept:</strong> This conference proved that without Jinnah's agreement, the British could not move forward. It established him as the sole spokesman of Muslims.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Background: The Wavell Plan</h4>
            <p><strong>Context:</strong> World War II was ending, and the British wanted to solve the Indian political deadlock.</p>
            <p><strong>The Proposal:</strong> Lord Wavell proposed an Executive Council where:</p>
            <ul>
                <li>All members would be Indians (except the Viceroy and Commander-in-Chief).</li>
                <li>There would be Parity (Equality) between "Caste Hindus" and "Muslims" (Equal number of seats).</li>
                <li>This was a huge concession to Muslims because their population was much smaller than Hindus, yet they were offered equal power.</li>
            </ul>

            <h4>II. The Conference Details</h4>
            <ul>
                <li><strong>Date:</strong> June 25 – July 14, 1945.</li>
                <li><strong>Venue:</strong> Simla (The Viceroy’s Lodge).</li>
                <li><strong>Attendees:</strong> 21 leaders, including Quaid-e-Azam (Muslim League), Maulana Abul Kalam Azad (Congress President), and Khizar Hayat Tiwana (Unionist Party Punjab).</li>
            </ul>

            <h4>III. The Main Conflict (Why it Failed)</h4>
            <p><strong>Jinnah’s Demand:</strong> Quaid-e-Azam insisted that since the Muslim League represents the Muslim nation, all 5 Muslim members of the Council must be nominated by the Muslim League.</p>
            <p><strong>Congress’s Demand:</strong> Congress claimed to be a "National" party (not just Hindu). They insisted on nominating one Muslim member (Abul Kalam Azad) from their quota to prove they represented Muslims too.</p>
            <p><strong>Unionist Party:</strong> The British wanted to give one Muslim seat to the Unionist Party of Punjab (Khizar Hayat), which was pro-British.</p>

            <h4>IV. Jinnah’s Refusal</h4>
            <p><strong>The Logic:</strong> Jinnah argued that if he allowed Congress to nominate a Muslim, it would mean accepting that Congress represents Muslims too. This would destroy the Two-Nation Theory.</p>
            <p><strong>The Veto:</strong> He refused to participate unless the League was recognized as the sole representative of Muslims.</p>

            <h4>V. The Result</h4>
            <p><strong>Failure:</strong> Lord Wavell could not bypass Jinnah. On July 14, 1945, he officially announced the failure of the conference.</p>
            <p><strong>Significance:</strong> Although the conference failed, it was a victory for Jinnah. It proved that no constitutional arrangement could be made without the Muslim League's consent. It set the stage for the 1945-46 Elections.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "WAVE"</h3>
                <ul>
                    <li><strong>W</strong> – Wavell Plan (Equal seats for Hindus/Muslims).</li>
                    <li><strong>A</strong> – Abul Kalam Azad (Congress wanted to nominate him to trick the League).</li>
                    <li><strong>V</strong> – Veto (Jinnah exercised his "veto" power; refused to compromise).</li>
                    <li><strong>E</strong> – Elections (The failure led to the General Elections of 1945-46).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Quaid-e-Azam (On refusing the Plan):</strong><br>
                "If we accept the Congress demand, we will be signing our own death warrant." (Meaning: The League would cease to be the sole representative).</p>

                <p><strong>Quaid-e-Azam (After the Failure):</strong><br>
                "We are the sole representatives of the Muslims of India."</p>

                <p><strong>Lord Wavell (Announcing Failure):</strong><br>
                "The conference has failed. I take the full responsibility for this failure."</p>
            </div>
        ` 
    },
    { 
        id: 'pak19', 
        title: 'Constitution of 1956', 
        content: `
            <h3>1. Introduction</h3>
            <p>After 9 years of independence, Pakistan finally adopted its first constitution on 23rd March 1956. It was prepared by the cabinet of Chaudhry Muhammad Ali (Prime Minister). It replaced the Indian Independence Act of 1947 and transformed Pakistan from a British Dominion into an Islamic Republic.</p>
            <div class="tip-box"><strong>Key Concept:</strong> This constitution was a compromise between East and West Pakistan (based on the "Parity Formula"), but it was short-lived.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Salient Features (The Structure)</h4>
            <p>You must memorize these 6 technical keywords:</p>
            <p><strong>Written & Rigid:</strong></p>
            <ul>
                <li>It was a lengthy written document (234 Articles).</li>
                <li>It was Rigid, meaning it was difficult to change (Amendment required a 2/3rd majority).</li>
            </ul>
            <p><strong>Islamic Republic:</strong></p>
            <ul>
                <li>For the first time, the country was officially named the "Islamic Republic of Pakistan."</li>
            </ul>
            <p><strong>Federal System:</strong></p>
            <ul>
                <li>The country was a Federation consisting of two provinces: West Pakistan and East Pakistan.</li>
                <li>Powers were divided between the Center (Federal list) and Provinces (Provincial list).</li>
            </ul>
            <p><strong>Parliamentary Form:</strong></p>
            <ul>
                <li><strong>Prime Minister:</strong> The Head of Government (Real Power).</li>
                <li><strong>President:</strong> The Head of State (Ceremonial Power).</li>
                <li>The Cabinet was answerable to the National Assembly.</li>
            </ul>
            <p><strong>Unicameral Legislature:</strong></p>
            <ul>
                <li>There was only one house of parliament (National Assembly).</li>
                <li><strong>Parity:</strong> It had 300 members—150 from West Pakistan and 150 from East Pakistan (despite East Pakistan having a larger population).</li>
            </ul>
            <p><strong>National Languages:</strong></p>
            <ul>
                <li>To satisfy the Bengalis, both Urdu and Bengali were declared as National Languages.</li>
            </ul>

            <h4>II. Islamic Provisions (Why it was "Islamic")</h4>
            <p><strong>Head of State:</strong> The President must be a Muslim. (However, the PM could be non-Muslim).</p>
            <p><strong>Sovereignty:</strong> It included the Objective Resolution as the preamble (Sovereignty belongs to Allah).</p>
            <p><strong>Repugnancy Clause:</strong> No law shall be enacted which is repugnant (opposed) to the Quran and Sunnah.</p>
            <p><strong>Islamic Ties:</strong> Closer relations with Muslim countries were made a state policy.</p>

            <h4>III. Fundamental Rights</h4>
            <p>It guaranteed basic rights like freedom of speech, assembly, and equality before the law. The Judiciary was made independent to protect these rights.</p>

            <h4>IV. Abrogation (The Failure)</h4>
            <p><strong>Life Span:</strong> It lasted only 2.5 years.</p>
            <p><strong>The End:</strong> On 7th October 1958, President Iskander Mirza abrogated (cancelled) the constitution and imposed Martial Law.</p>
            <p><strong>Reason:</strong> Political instability (4 Prime Ministers changed in 2 years) and the fear of upcoming elections. General Ayub Khan became the Chief Martial Law Administrator.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "PURIFY"</h3>
                <p>(Since it made Pakistan an Islamic Republic)</p>
                <ul>
                    <li><strong>P</strong> – Parliamentary System (PM has power).</li>
                    <li><strong>U</strong> – Urdu & Bengali (Two languages).</li>
                    <li><strong>R</strong> – Rigid Constitution (Hard to change).</li>
                    <li><strong>I</strong> – Islamic Republic (New Name).</li>
                    <li><strong>F</strong> – Federal System (Center + 2 Provinces).</li>
                    <li><strong>Y</strong> – Years (Lasted only 2.5 Years).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Chaudhry Muhammad Ali (On passing it):</strong><br>
                "Today, we have fulfilled the dream of the Quaid-e-Azam by giving the nation its first Islamic Constitution."</p>

                <p><strong>Islamic Provision (Article 1):</strong><br>
                "Pakistan shall be a Federal Republic to be known as the Islamic Republic of Pakistan."</p>

                <p><strong>On Failure (Ayub Khan):</strong><br>
                "The Constitution was unworkable. It was full of dangerous compromises." (Use this when explaining why it was abrogated).</p>
            </div>
        ` 
    },
    { 
        id: 'pak20', 
        title: 'Constitution of 1962', 
        content: `
            <h3>1. Introduction</h3>
            <p>After abrogating the 1956 constitution and ruling under Martial Law for nearly 4 years, President Ayub Khan enforced a new constitution on 8th June 1962. Unlike the previous one which was made by an assembly, this was drafted by a commission and imposed by the President himself.</p>
            <div class="tip-box"><strong>Key Concept:</strong> It introduced the Presidential System and Basic Democracies, concentrating all powers in the hands of one man.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Salient Features (The "Presidential" Model)</h4>
            <p>You must distinguish these points from the 1956 Constitution:</p>
            <p><strong>Presidential Form of Government:</strong></p>
            <ul>
                <li><strong>All-Powerful President:</strong> The President was the Head of State and Head of Government. There was no Prime Minister.</li>
                <li><strong>Veto Power:</strong> The President could veto bills passed by the assembly.</li>
                <li><strong>Appointment:</strong> He could appoint Ministers, Governors, and Judges at his will. They were answerable to him, not the Parliament.</li>
            </ul>
            <p><strong>Indirect Elections (Basic Democracies):</strong></p>
            <ul>
                <li>The common people could not vote for the President or Assembly directly.</li>
                <li><strong>BD Members:</strong> The people elected 80,000 "Basic Democrats" (Union Council members).</li>
                <li><strong>Electoral College:</strong> These 80,000 BD members then voted to elect the President and National Assembly.</li>
            </ul>
            <p><strong>Unicameral Legislature:</strong></p>
            <ul>
                <li>Like 1956, it had only one house (National Assembly).</li>
                <li><strong>Strength:</strong> Originally 156 members (75 West, 75 East, 6 reserved for women). Later increased to 218.</li>
            </ul>
            <p><strong>Written & Rigid:</strong></p>
            <ul>
                <li>It was a detailed document (250 Articles).</li>
                <li><strong>Rigid:</strong> It was extremely difficult to amend.</li>
            </ul>
            <p><strong>Name Controversy:</strong></p>
            <ul>
                <li>Originally, the word "Islamic" was dropped, and the country was named just "Republic of Pakistan."</li>
                <li><strong>Protest:</strong> After huge public pressure, the First Amendment restored the name to "Islamic Republic of Pakistan."</li>
            </ul>

            <h4>II. Islamic Provisions</h4>
            <p><strong>Council of Islamic Ideology:</strong> Established to advise the government on religious matters (still exists today).</p>
            <p><strong>Head of State:</strong> Must be a Muslim.</p>
            <p><strong>Research:</strong> Established the Islamic Research Institute.</p>

            <h4>III. Failure / Abrogation</h4>
            <p><strong>The Agitation:</strong> The people hated the "Indirect Election" system because it took away their right to vote. The political parties formed a united front (DAC) against Ayub Khan.</p>
            <p><strong>The End:</strong> In March 1969, facing massive riots, Ayub Khan resigned.</p>
            <p><strong>Martial Law:</strong> Instead of following his own constitution (which said the Speaker takes over), he handed power to the Army Chief, General Yahya Khan, who abrogated the constitution on 25th March 1969.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "POWER"</h3>
                <p>(Since it was about one man's power)</p>
                <ul>
                    <li><strong>P</strong> – Presidential System (No PM, President is King).</li>
                    <li><strong>O</strong> – One Man Show (Ayub Khan designed it).</li>
                    <li><strong>W</strong> – Weightage to BD Members (Only 80,000 could vote).</li>
                    <li><strong>E</strong> – Electoral College (Indirect Elections).</li>
                    <li><strong>R</strong> – Republic (Initially dropped 'Islamic', later restored).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Ayub Khan (Defending the system):</strong><br>
                "We have adopted the Presidential System because it is simpler to work, more akin to our genius and history, and less liable to instability."</p>

                <p><strong>Critics (On the 1962 Constitution):</strong><br>
                "It is a constitution of the President, by the President, for the President." (A play on Lincoln's democracy quote).</p>

                <p><strong>On Abrogation (Yahya Khan):</strong><br>
                "I have no ambition other than the creation of conditions conducive to the establishment of a constitutional government."</p>
            </div>
        ` 
    },
    { 
        id: 'pak21', 
        title: 'Constitution of 1973', 
        content: `
            <h3>1. Introduction</h3>
            <p>After the tragedy of East Pakistan (1971), the new government led by Zulfiqar Ali Bhutto focused on giving the country a permanent constitution. On 14th August 1973, this constitution was enforced. It was passed unanimously by the National Assembly, making it a symbol of national unity.</p>
            <div class="tip-box"><strong>Key Concept:</strong> It introduced a Bicameral Legislature (Two Houses) for the first time to satisfy the smaller provinces.</div>

            <h3>2. Detailed Study Points (Exam Focus)</h3>

            <h4>I. Salient Features (The Structure)</h4>
            <p>You must distinguish this from 1956 and 1962. The biggest difference is Point #4.</p>
            <p><strong>Written & Rigid:</strong></p>
            <ul>
                <li>It is a detailed document (280 Articles).</li>
                <li><strong>Rigid:</strong> Amendments require a 2/3rd majority in parliament, making it stable but hard to tamper with.</li>
            </ul>
            <p><strong>Federal System:</strong></p>
            <ul>
                <li>Pakistan is a Federation of four provinces (Punjab, Sindh, KPK, Balochistan), plus FATA (now merged) and Capital territory.</li>
            </ul>
            <p><strong>Parliamentary Form:</strong></p>
            <ul>
                <li><strong>Prime Minister:</strong> The Head of Government and the most powerful person.</li>
                <li><strong>President:</strong> The Head of State (Ceremonial).</li>
                <li>The PM is elected by the National Assembly.</li>
            </ul>
            <p><strong>Bicameral Legislature (Parliament):</strong></p>
            <ul>
                <li>Unlike 1956/1962 (which were Unicameral), this parliament (Majlis-e-Shoora) has two houses:</li>
                <li><strong>Senate (Upper House):</strong> Represents provinces equally (gives power to smaller provinces like Balochistan).</li>
                <li><strong>National Assembly (Lower House):</strong> Represents people based on population (Punjab has most seats).</li>
            </ul>
            <p><strong>Direct Elections:</strong></p>
            <ul>
                <li>People directly vote for their representatives (MNA/MPA) every 5 years. (No "Basic Democracies" like 1962).</li>
            </ul>
            <p><strong>Independent Judiciary:</strong></p>
            <ul>
                <li>Guarantees full independence to the Supreme Court and High Courts.</li>
            </ul>

            <h4>II. Islamic Provisions (Stronger than before)</h4>
            <p><strong>State Religion:</strong> For the first time, Article 2 declared: "Islam shall be the State Religion of Pakistan."</p>
            <p><strong>Head of State & Govt:</strong> Both the President AND the Prime Minister must be Muslims. (In 1956, only the President had to be Muslim).</p>
            <p><strong>Definition of Muslim:</strong> Later (via 2nd Amendment), a legal definition of "Muslim" was added, and Ahmadis were declared non-Muslims.</p>
            <p><strong>Council of Islamic Ideology (CII):</strong> A permanent body to ensure laws align with Islam.</p>
            <p><strong>Education:</strong> Teaching of Holy Quran and Islamiat made compulsory for Muslims.</p>

            <h4>III. Fundamental Rights</h4>
            <p>It provides a comprehensive list of rights: Security of person, freedom of speech, freedom of movement, and equality of citizens. The courts can suspend any law that violates these rights.</p>

            <div class="mnemonic-box">
                <h3>🧠 Memory Corner: "B-IPAD"</h3>
                <p>(To remember the unique features of 1973)</p>
                <ul>
                    <li><strong>B</strong> – Bicameral (Two houses: Senate + NA).</li>
                    <li><strong>I</strong> – Islam as State Religion (Declared officially).</li>
                    <li><strong>P</strong> – Parliamentary System (PM is boss).</li>
                    <li><strong>A</strong> – Article 6 (High Treason for abrogating constitution).</li>
                    <li><strong>D</strong> – Direct Elections (18+ can vote).</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Golden Quotes for the Exam</h3>
                
                <p><strong>Zulfiqar Ali Bhutto (On consensus):</strong><br>
                "This is not the constitution of the People's Party... it is the constitution of the people of Pakistan."</p>

                <p><strong>Article 2 (The Identity):</strong><br>
                "Islam shall be the State religion of Pakistan."</p>

                <p><strong>Article 6 (The Protection - Must Write):</strong><br>
                "Any person who abrogates or subverts the Constitution by force... shall be guilty of high treason." (This was added to stop future Martial Laws).</p>
            </div>
        ` 
    }
];

function renderPakNotes() {
    const grid = document.getElementById('pak-notes-grid');
    if(grid) {
        grid.innerHTML = pakNotes.map((n, i) => `
            <div class="card pak-card-enter" 
                 style="animation-delay: ${i * 0.05}s" 
                 onclick="openPakNote('${n.id}')"
                 onmousemove="handlePakTilt(event, this)"
                 onmouseleave="resetPakTilt(this)">
                <span class="tag cyan">TOPIC ${n.id.replace('pak','')}</span>
                <h3>${n.title}</h3>
                <p>Click to read detailed notes.</p>
            </div>
        `).join('');
    }
}

function handlePakTilt(e, card) {
    // Only apply in Pak Mode for performance/theme consistency
    if (!document.body.classList.contains('pak-mode')) return;

    card.classList.add('pak-3d-active');
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    
    // Calculate rotation (max 15 degrees)
    const centerX = rect.width / 2;
    const centerY = rect.height / 2;
    
    const rotateX = ((y - centerY) / centerY) * -15; 
    const rotateY = ((x - centerX) / centerX) * 15;

    // Apply 3D Transform
    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
    
    // Dynamic Glow based on mouse position
    const glowX = (x / rect.width) * 100;
    const glowY = (y / rect.height) * 100;
    card.style.background = `radial-gradient(circle at ${glowX}% ${glowY}%, rgba(225, 29, 72, 0.4), rgba(40, 4, 15, 0.8))`;
    card.style.borderColor = 'rgba(255, 255, 255, 0.5)';
}

function resetPakTilt(card) {
    card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
    card.style.background = ''; // Revert to CSS default
    card.style.borderColor = '';
    setTimeout(() => card.classList.remove('pak-3d-active'), 200);
}

function openPakNote(id) {
    const n = pakNotes.find(x => x.id === id);
    if(n) {
         document.getElementById('pak-note-body').innerHTML = `
            <h1 style="animation: fadeSlideUp 0.5s ease forwards">${n.title}</h1>
            <div style="animation: fadeSlideUp 0.5s 0.2s ease forwards; opacity:0; transform:translateY(20px); animation-fill-mode:forwards;">
                ${n.content}
            </div>`;
         document.getElementById('pak-notes-grid').style.display = 'none';
         document.getElementById('pak-note-detail').style.display = 'block';
         window.scrollTo(0,0);
    }
}

function closePakNote() {
    document.getElementById('pak-note-detail').style.display = 'none';
    document.getElementById('pak-notes-grid').style.display = 'grid';
    // Re-trigger animation when going back? Optional.
    // renderPakNotes(); 
}

function switchPakTab(tab, btn) {
    // Buttons
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    if(btn) btn.classList.add('active');

    // Content
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    
    if (tab === 'notes') {
        document.getElementById('pak-notes-content').classList.add('active');
        renderPakNotes(); // Ensure notes are rendered
    } else if (tab === 'qa') {
        document.getElementById('pak-qa-content').classList.add('active');
    }
}

// --- PAKISTAN RAIN SYSTEM (REMASTERED) ---
let rainState = 0; // 0=Off, 1=Rain, 2=Thunder
let rainAnimId = null;
let drops = [];
let splashes = [];
let bolts = [];
let thunderFlash = 0;
let mouseX = 0, mouseY = 0;

// Track mouse for interaction
document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
});

function toggleRain() {
    rainState = (rainState + 1) % 3;
    const btn = document.getElementById('rain-btn');
    const canvas = document.getElementById('pak-rain');
    
    if (rainState === 1) { // Rain
        btn.innerHTML = '🌧️';
        canvas.style.display = 'block';
        initRain(false);
    } else if (rainState === 2) { // Thunder
        btn.innerHTML = '⚡';
        initRain(true);
    } else { // Off
        btn.innerHTML = '☁️';
        cancelAnimationFrame(rainAnimId);
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        canvas.style.display = 'none';
        drops = [];
        bolts = [];
        splashes = [];
    }
}

function initRain(isThunder) {
    const canvas = document.getElementById('pak-rain');
    // Ensure accurate sizing
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    // Reset drops
    drops = [];
    bolts = []; 
    splashes = []; // Clear splashes
    
    // 1. Heavy Rain for Thunder, Light for Normal
    const count = isThunder ? 1500 : 600; 
    for(let i=0; i<count; i++) drops.push(createDrop(canvas, isThunder));

    if (rainAnimId) cancelAnimationFrame(rainAnimId);
    loopRain(isThunder);
}

function createDrop(canvas, isThunder) {
    return {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        l: Math.random() * 25 + 10,
        // Faster rain for thunder
        s: isThunder ? Math.random() * 20 + 20 : Math.random() * 8 + 8, 
        vx: isThunder ? -3 : 0, 
        vy: 0,
        alpha: Math.random() * 0.5 + 0.5
    };
}

function createSplash(x, y, color) {
    const count = Math.floor(Math.random() * 3) + 2;
    for(let i=0; i<count; i++) {
        splashes.push({
            x: x,
            y: y,
            vx: (Math.random() - 0.5) * 4,
            vy: (Math.random() * -5) - 2, // Upward burst
            life: 20, // Frames
            color: color
        });
    }
}

// --- 3. ZEUS MODE & RIPPLES ---
let ripples = [];

document.addEventListener('click', (e) => {
    // Only in Pak Mode
    if (!document.body.classList.contains('pak-mode')) return;
    
    // ZEUS STRIKE
    // Summon bolt from top (random X nearby) to mouse (click X, Y)
    const startX = e.clientX + (Math.random() - 0.5) * 200;
    bolts.push(new LightningBolt(startX, 0, window.innerHeight, e.clientX, e.clientY));
    
    // RIPPLE EFFECT
    createRipple(e.clientX, e.clientY);
    
    // FLASH SCREEN
    thunderFlash = 5;
    
    // Shake Effect
    document.body.style.transform = `translate(${Math.random()*6-3}px, ${Math.random()*6-3}px)`;
    setTimeout(() => document.body.style.transform = 'none', 50);
});

function createRipple(x, y) {
    ripples.push({
        x: x, 
        y: y,
        r: 0, // Radius
        alpha: 1,
        speed: 5
    });
}

// --- LIGHTNING BOLT GENERATOR (UPDATED FOR ZEUS) ---
class LightningBolt {
    constructor(x, y, height, targetX = null, targetY = null) {
        this.segments = [];
        this.life = 15; 
        this.totalHeight = height;
        this.targetX = targetX;
        this.targetY = targetY;
        this.generate(x, y);
    }

    generate(x, y) {
        let currX = x;
        let currY = y;
        
        let limitY = this.targetY ? this.targetY : (this.totalHeight + 100);
        
        while (currY < limitY) {
            // If we have a target, bias towards it
            let biasX = 0;
            if (this.targetX !== null) {
                // Calculate direction to target
                const remainingY = this.targetY - currY;
                const remainingX = this.targetX - currX;
                if (remainingY > 0) biasX = remainingX / (remainingY / 20); // 20 is step size
            }

            // Jagged steps
            let nextX = currX + (Math.random() - 0.5) * 50 + biasX; 
            let nextY = currY + (Math.random() * 30 + 10);
            
            // Clamp if we overshoot targetY
            if (this.targetY && nextY > this.targetY) {
                nextY = this.targetY;
                nextX = this.targetX; // Snap to target
            }
            
            this.segments.push({x1: currX, y1: currY, x2: nextX, y2: nextY});
            
            // Chance to branch (only if not near target)
            if (Math.random() < 0.2 && (!this.targetY || (this.targetY - currY) > 100)) {
                this.createBranch(currX, currY, this.totalHeight);
            }

            currX = nextX;
            currY = nextY;
            if (this.targetY && currY >= this.targetY) break;
        }
    }

    createBranch(x, y, limit) {
        let currX = x;
        let currY = y;
        let length = 0;
        
        // Branch is shorter
        while (length < 200 && currY < limit) {
            let nextX = currX + (Math.random() - 0.5) * 60; 
            let nextY = currY + (Math.random() * 20 + 10);
            this.segments.push({x1: currX, y1: currY, x2: nextX, y2: nextY, isBranch: true});
            currX = nextX;
            currY = nextY;
            length += 30;
        }
    }

    draw(ctx) {
        ctx.save();
        ctx.strokeStyle = '#fff';
        ctx.shadowBlur = 30;
        ctx.shadowColor = '#fb7185'; // Rose Glow
        ctx.globalAlpha = Math.random() * 0.5 + 0.5; // Flicker
        
        // Fading out
        if (this.life < 10) ctx.globalAlpha = this.life / 10;

        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let s of this.segments) {
            if (s.isBranch) ctx.lineWidth = 1;
            else ctx.lineWidth = 2.5;

            ctx.moveTo(s.x1, s.y1);
            ctx.lineTo(s.x2, s.y2);
        }
        ctx.stroke();
        
        // Draw Impact Point if Zeus
        if (this.targetX && this.life > 10) {
            ctx.fillStyle = "#fff";
            ctx.beginPath();
            ctx.arc(this.targetX, this.targetY, 5 + Math.random() * 10, 0, Math.PI*2);
            ctx.fill();
        }

        ctx.restore();
        
        this.life--;
    }
}

function loopRain(isThunder) {
    const canvas = document.getElementById('pak-rain');
    const ctx = canvas.getContext('2d');

    // --- THUNDER LOGIC ---
    if (isThunder) {
        if (Math.random() < 0.005) { // Slightly rarer but more impactful
             bolts.push(new LightningBolt(Math.random() * canvas.width, 0, canvas.height));
             thunderFlash = 8; // Bright flash frames
             // Optional: Shake body slightly?
             document.body.style.transform = `translate(${Math.random()*4-2}px, ${Math.random()*4-2}px)`;
             setTimeout(() => document.body.style.transform = 'none', 100);
        }
    }

    // --- DRAW BACKGROUND & FLASH ---
    ctx.clearRect(0, 0, canvas.width, canvas.height); 
    
    if (thunderFlash > 0) {
        ctx.fillStyle = `rgba(255, 230, 240, ${thunderFlash / 10})`; 
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        thunderFlash--;
    }

    // --- DRAW BOLTS ---
    for (let i = bolts.length - 1; i >= 0; i--) {
        bolts[i].draw(ctx);
        if (bolts[i].life <= 0) bolts.splice(i, 1);
    }

    // --- DRAW RIPPLES ---
    ctx.lineWidth = 2;
    for (let i = ripples.length - 1; i >= 0; i--) {
        const r = ripples[i];
        r.r += r.speed;
        r.alpha -= 0.02;
        
        ctx.beginPath();
        ctx.arc(r.x, r.y, r.r, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(255, 255, 255, ${r.alpha})`;
        ctx.stroke();

        if (r.alpha <= 0) ripples.splice(i, 1);
    }

    // --- DRAW RAIN ---
    // Use gradient for more realistic streak
    const rainColor = isThunder ? '255, 255, 255' : '253, 164, 175'; // White or Rose-300
    
    for (let d of drops) {
        // Physics & Interaction
        const dx = d.x - mouseX;
        const dy = d.y - mouseY;
        const dist = Math.sqrt(dx*dx + dy*dy);
        
        // Repel from mouse with visual feedback
        let repelForce = 0;
        if (dist < 150) {
            repelForce = (150 - dist) / 150;
            d.vx += (dx / dist) * repelForce * 10; 
            d.vy += (dy / dist) * repelForce * 10;
        }

        d.x += d.vx;
        d.y += d.s + d.vy;
        
        // Dampen velocity
        if (isThunder) d.vx = (d.vx * 0.9) - 0.2; 
        else { d.vx *= 0.9; d.vy *= 0.9; }

        // Draw Drop
        ctx.beginPath();
        // Dynamic gradient for each drop based on velocity/length
        const grad = ctx.createLinearGradient(d.x, d.y, d.x + d.vx, d.y + d.l);
        grad.addColorStop(0, `rgba(${rainColor}, 0)`);
        grad.addColorStop(1, `rgba(${rainColor}, ${d.alpha})`);
        
        ctx.strokeStyle = grad;
        ctx.lineWidth = isThunder ? 2 : 1.5;
        ctx.moveTo(d.x, d.y);
        ctx.lineTo(d.x + d.vx * 2, d.y + d.l);
        ctx.stroke();

        // Reset & Splash
        if (d.y > canvas.height) {
            // Spawn splash
            if(Math.random() > 0.5) createSplash(d.x, canvas.height, rainColor); // 50% chance for performance
            
            d.y = -d.l;
            d.x = Math.random() * canvas.width;
            d.vx = isThunder ? -3 : 0; 
            d.vy = 0;
        }
    }

    // --- DRAW SPLASHES ---
    for (let i = splashes.length - 1; i >= 0; i--) {
        const s = splashes[i];
        s.x += s.vx;
        s.y += s.vy;
        s.vy += 0.5; // Gravity
        s.life--;
        
        ctx.fillStyle = `rgba(${s.color}, ${s.life / 20})`;
        ctx.beginPath();
        ctx.arc(s.x, s.y, 1.5, 0, Math.PI*2);
        ctx.fill();

        if (s.life <= 0) splashes.splice(i, 1);
    }
    
    rainAnimId = requestAnimationFrame(() => loopRain(isThunder));
}

// --- 1. VAULT DECODER LOGIC ---
function scrambleText(element, finalString) {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()';
    let iterations = 0;
    
    // Safety check
    if(!element) return;
    
    const interval = setInterval(() => {
        element.innerText = finalString
            .split('')
            .map((letter, index) => {
                if(index < iterations) return finalString[index];
                return chars[Math.floor(Math.random() * chars.length)];
            })
            .join('');
        
        if(iterations >= finalString.length) clearInterval(interval);
        iterations += 1/2; // Speed of decoding
    }, 30);
}

// --- 2. TIMELINE & PARALLAX LOGIC ---
let pakTimelineYears = [];

function initPakFeatures() {
    console.log("Initializing Pak Features...");
    
    // 1. Inject Timeline Container
    if (!document.querySelector('.pak-timeline-container')) {
        const tContainer = document.createElement('div');
        tContainer.className = 'pak-timeline-container';
        tContainer.style.display = 'block'; // Force visible
        tContainer.style.position = 'fixed'; // Fixed to screen
        tContainer.style.left = '280px'; // Clear of Sidebar (250px)
        tContainer.style.top = '100px';
        tContainer.style.zIndex = '1000'; 
        tContainer.innerHTML = `<div class="pak-timeline-progress" id="pak-time-bar"></div>`;
        document.body.appendChild(tContainer); // Append to Body for safety
    }

    // 2. Inject Skyline
    if (!document.querySelector('.pak-skyline')) {
        const skyline = document.createElement('div');
        skyline.className = 'pak-skyline';
        skyline.style.zIndex = '-1'; // Behind content
        document.body.appendChild(skyline);
    }

    // 3. Inject Map Widget
    if (!document.querySelector('.pak-map-widget')) {
        const mapWidget = document.createElement('div');
        mapWidget.className = 'pak-map-widget';
        mapWidget.title = "The Partition (1947)";
        mapWidget.style.position = 'fixed'; // Fixed to viewport
        mapWidget.style.top = '20px';
        mapWidget.style.right = '20px';
        mapWidget.style.zIndex = '2000'; // Very high Z-index
        
        // Use standard SVG string
        mapWidget.innerHTML = `
        <svg  viewBox="0 0 200 150" style="width:100%; height:100%;">
            <path id="map-pak-west" d="M10,80 L30,60 L50,70 L40,100 Z" fill="#374151" stroke="#be123c" stroke-width="1.5" />
            <path id="map-pak-east" d="M150,80 L170,75 L180,90 L160,100 Z" fill="#374151" stroke="#be123c" stroke-width="1.5" />
            <path id="map-india" d="M50,70 L150,80 L100,140 Z" fill="rgba(255,255,255,0.05)" />
            <text x="50%" y="140" text-anchor="middle" fill="#be123c" font-size="10">1947</text>
        </svg>`;
        
        mapWidget.addEventListener('mouseenter', () => {
             const west = document.getElementById('map-pak-west');
             const east = document.getElementById('map-pak-east');
             if(west) { west.setAttribute('fill', '#e11d48'); west.setAttribute('filter', 'drop-shadow(0 0 5px #e11d48)'); }
             if(east) { east.setAttribute('fill', '#e11d48'); east.setAttribute('filter', 'drop-shadow(0 0 5px #e11d48)'); }
        });
        mapWidget.addEventListener('mouseleave', () => {
             const west = document.getElementById('map-pak-west');
             const east = document.getElementById('map-pak-east');
             if(west) { west.setAttribute('fill', '#374151'); west.setAttribute('filter', 'none'); }
             if(east) { east.setAttribute('fill', '#374151'); east.setAttribute('filter', 'none'); }
        });

        document.body.appendChild(mapWidget); // Append to Body
    }
}

function updatePakTimeline() {
    const years = pakNotes.map(n => {
        const m = n.title.match(/\b(19\d{2})\b/); // Extract Year (19xx)
        return m ? m[0] : null; 
    }).filter(y => y); // Clean list

    pakTimelineYears = [...new Set(years)].sort();

    const container = document.querySelector('.pak-timeline-container');
    if (!container) return; 

    // Clear old markers
    container.innerHTML = `<div class="pak-timeline-progress" id="pak-time-bar"></div>`;

    pakTimelineYears.forEach((year, i) => {
        const marker = document.createElement('div');
        marker.className = 'timeline-year';
        marker.innerText = year;
        marker.style.top = `${(i / (pakTimelineYears.length - 1)) * 100}%`;
        marker.onclick = () => scrollToYear(year);
        container.appendChild(marker);
    });
}

function scrollToYear(year) {
    const targetCard = Array.from(document.querySelectorAll('#pak-notes-grid .card')).find(c => c.innerText.includes(year));
    if (targetCard) {
        targetCard.scrollIntoView({behavior: 'smooth', block: 'center'});
    }
}

// Global Scroll Handler for Timeline & Parallax
window.addEventListener('scroll', () => {
    // Only active in Pak Mode
    if (!document.body.classList.contains('pak-mode')) {
        // Hide features if not in Pak Mode
        const skyline = document.querySelector('.pak-skyline');
        const timeline = document.querySelector('.pak-timeline-container');
        const map = document.querySelector('.pak-map-widget');
        if(skyline) skyline.style.display = 'none';
        if(timeline) timeline.style.display = 'none';
        if(map) map.style.display = 'none';
        return;
    } else {
        // Show features
        const skyline = document.querySelector('.pak-skyline');
        const timeline = document.querySelector('.pak-timeline-container');
        const map = document.querySelector('.pak-map-widget');
        if(skyline) skyline.style.display = 'block';
        if(timeline) timeline.style.display = 'block';
        if(map) map.style.display = 'flex'; // Widget is flex
    }

    // 1. Parallax Monument
    const skyline = document.querySelector('.pak-skyline');
    if (skyline) {
        const scrollPercent = window.scrollY / (document.body.scrollHeight - window.innerHeight);
        skyline.style.backgroundPosition = `-${window.scrollY * 0.2}px bottom`; 
    }
    
    // 2. Timeline Progress
    const grid = document.getElementById('pak-notes-grid');
    if (grid && grid.style.display !== 'none') {
        const progressBar = document.getElementById('pak-time-bar');
        const scrollP = window.scrollY / (grid.scrollHeight - window.innerHeight);
        const satScroll = Math.min(Math.max(scrollP, 0), 1);
        if (progressBar) progressBar.style.height = `${satScroll * 100}%`;
    }
});

function openPakNote(id) {
    const n = pakNotes.find(x => x.id === id);
    if(n) {
         const body = document.getElementById('pak-note-body');
         // Use existing animation wrapper
         
         // 1. Render Basic Layout
         body.innerHTML = `
            <h1 id="pak-note-title" style="opacity:0"></h1>
            <div id="pak-note-text" style="animation: fadeSlideUp 0.5s 0.2s ease forwards; opacity:0; transform:translateY(20px); animation-fill-mode:forwards;">
                ${n.content}
            </div>`;
         
         // 2. Scramble Effect for Title
         const titleEl = document.getElementById('pak-note-title');
         titleEl.style.opacity = '1';
         titleEl.classList.add('scramble-text');
         scrambleText(titleEl, n.title);

         document.getElementById('pak-notes-grid').style.display = 'none';
         document.getElementById('pak-note-detail').style.display = 'block';
         window.scrollTo(0,0);
         
         // Hide timeline in detail view
         const tContainer = document.querySelector('.pak-timeline-container');
         if(tContainer) tContainer.style.display = 'none';
    }
}

function closePakNote() {
    document.getElementById('pak-note-detail').style.display = 'none';
    document.getElementById('pak-notes-grid').style.display = 'grid';
    // Show timeline
    const tContainer = document.querySelector('.pak-timeline-container');
    if(tContainer) tContainer.style.display = 'block';
}

// Robust Initialization
document.addEventListener('DOMContentLoaded', () => {
    // Render all note sections
    if (typeof renderNotes === 'function') renderNotes();
    renderItNotes();
    renderPakNotes();
    
    // Init Visuals
    initPakFeatures();
    updatePakTimeline();
});

// --- ISLAMIC NOTES ---


        // --- FLASHCARDS ---
        function filterCards() {
            const cat = document.getElementById('fc-filter').value;
            if (cat === 'all') cards = [...flashcardsData];
            else cards = flashcardsData.filter(c => c.ch === cat);
            cIdx = 0; updateCard();
        }
        function updateCard() {
            if (cards.length === 0) return;
            const c = cards[cIdx];
            document.getElementById('fc-tag').innerText = c.ch.toUpperCase();
            document.getElementById('fc-front').innerText = c.f;
            document.getElementById('fc-back').innerText = c.b;
            document.getElementById('fc-count').innerText = `${cIdx + 1} / ${cards.length}`;
            document.querySelector('.flashcard').classList.remove('flipped');
        }
        function moveCard(dir) {
            cIdx = (cIdx + dir + cards.length) % cards.length;
            updateCard();
        }

        // --- QUIZ ---
        function loadQuiz() {
            if (qIdx >= quizData.length) {
                document.getElementById('quiz-container').innerHTML = `<h1 style="text-align:center;">🎉 Quiz Complete! <br>Score: ${qScore}/${quizData.length}</h1>`;
                return;
            }
            const q = quizData[qIdx];
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('q-options').innerHTML = q.a.map((opt, i) => `
                <button class="quiz-opt" onclick="checkAnswer(this, ${i})">${opt}</button>
            `).join('');
            document.getElementById('q-next').style.display = 'none';
        }
        function checkAnswer(btn, i) {
            document.querySelectorAll('.quiz-opt').forEach(b => b.disabled = true);
            const q = quizData[qIdx];
            if (i === q.c) { btn.classList.add('correct'); qScore++; document.getElementById('q-score').innerText = qScore; }
            else { btn.classList.add('wrong'); document.querySelectorAll('.quiz-opt')[q.c].classList.add('correct'); }
            document.getElementById('q-next').style.display = 'block';
        }
        function nextQ() { qIdx++; loadQuiz(); }

        // --- TIMER LOGIC ---
        function toggleTimer() {
            if (isRunning) {
                clearInterval(timerInterval);
                document.getElementById('timerBtn').innerText = "Resume Focus";
                document.getElementById('timerBtn').classList.remove('btn-danger'); // Assuming you might have a danger class, otherwise simple text change
            } else {
                timerInterval = setInterval(() => {
                    timerTime--;
                    updateTimerDisplay();
                    if (timerTime <= 0) {
                        clearInterval(timerInterval);
                        isRunning = false;
                        document.getElementById('timerBtn').innerText = "Start Focus";
                        if (soundEnabled) document.getElementById('timerSound').play();
                        // Optional: Add a visual alarm
                        alert("Session Complete!");
                    }
                }, 1000);
                document.getElementById('timerBtn').innerText = "Pause";
            }
            isRunning = !isRunning;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            timerTime = 25 * 60;
            updateTimerDisplay();
            document.getElementById('timerBtn').innerText = "Start Focus";
        }

        function updateTimerDisplay() {
            const m = Math.floor(timerTime / 60);
            const s = timerTime % 60;
            document.getElementById('timer').innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundBtn').innerText = soundEnabled ? "Sound: On" : "Sound: Off";
            document.getElementById('soundBtn').style.opacity = soundEnabled ? "1" : "0.5";
        }

        // --- CLOCK LOGIC ---
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString([], { weekday: 'long', month: 'short', day: 'numeric' });

            const clockEl = document.getElementById('live-clock');
            if (clockEl) {
                clockEl.innerHTML = `<div style="text-align:right; line-height:1.2;">
                    <div style="font-size:2rem; font-weight:700; color:white;">${timeString}</div>
                    <div style="font-size:0.9rem; color:var(--text-secondary); text-transform:uppercase; letter-spacing:1px;">${dateString}</div>
                </div>`;
            }
        }
        setInterval(updateClock, 1000); // Start clock ticker

        // --- EXAM COUNTDOWN ---
        function updateExamCountdown() {
            const exams = [
                { date: '2025-12-16', id: 'countdown-0' },
                { date: '2025-12-18', id: 'countdown-1' },
                { date: '2025-12-22', id: 'countdown-2' },
                { date: '2025-12-24', id: 'countdown-3' },
                { date: '2025-12-26', id: 'countdown-4' },
                { date: '2025-12-30', id: 'countdown-5' }
            ];

            const now = new Date();

            exams.forEach(ex => {
                const target = new Date(ex.date);
                const diffTime = target - now;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                const el = document.getElementById(ex.id);
                if (el) {
                    // Update Time Left
                    if (diffDays > 0) el.innerText = `${diffDays} Days`;
                    else if (diffDays === 0) el.innerText = "Today!";
                    else el.innerText = "Done";

                    // Update Status Column (Sibling)
                    const statusCell = el.nextElementSibling;
                    if (statusCell) {
                        if (diffDays < 0) {
                            statusCell.innerHTML = `<span style="color:#ef4444; font-weight:bold; opacity:1;">Passed</span>`;
                            el.style.color = "#64748b"; // Dim the 'Done' text
                        } else if (diffDays === 0) {
                            statusCell.innerHTML = `<span style="color:#10b981; font-weight:bold; opacity:1;">Active</span>`;
                            el.style.color = "#10b981";
                        } else {
                            statusCell.innerHTML = `<span style="opacity:0.3;">Upcoming</span>`;
                        }
                    }
                }
            });
        }



        function toggleMobileNav() {
            const sidebar = document.getElementById('mainSidebar');
            const overlay = document.getElementById('sidebarOverlay');

            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // --- AI LAUNCHER LOGIC ---
        // --- AI LAUNCHER LOGIC ---
        
        // Add spinner animation style dynamically if not present
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        `;
        document.head.appendChild(styleSheet);



        // --- FOA MODULE LOGIC ---
        function switchFoaTab(tab, btn) {
            // Hide all tabs
            document.querySelectorAll('.foa-content').forEach(el => el.style.display = 'none');
            // Show target tab
            const target = document.getElementById('foa-tab-' + tab);
            if (target) target.style.display = 'block';

            // Reset buttons
            document.querySelectorAll('.foa-tab-btn').forEach(b => {
                b.classList.remove('btn-primary');
                b.style.opacity = '0.7'; 
            });
            
            // Highlight active button
            btn.classList.add('btn-primary');
            btn.style.opacity = '1';
        }

        function playVideo(videoId) {
            const player = document.getElementById('main-video-player');
            if (player) {
                player.src = 'https://www.youtube.com/embed/' + videoId + '?autoplay=1';
            }
        }

        function toggleAnswer(button) {
            // Robustly find the answer div. 
            // It assumes structure: <button>...</button> <div class="answer">...</div>
            // nextElementSibling skips text nodes (newlines)
            const answer = button.nextElementSibling;
            
            if (answer && answer.classList.contains('answer')) {
                const isHidden = !answer.classList.contains('show');
                
                if (isHidden) {
                    answer.classList.add('show');
                    button.innerHTML = 'Hide Answer';
                    button.style.background = 'rgba(255,255,255,0.1)';
                    button.style.color = 'var(--text-muted)';
                } else {
                    answer.classList.remove('show');
                    button.innerHTML = 'Show Answer';
                    button.style.background = 'var(--brand-primary)';
                    button.style.color = '#000';
                }
            } else {
                console.error("Answer element not found next to button", button);
            }
        }
    </script>
</body>

</html>